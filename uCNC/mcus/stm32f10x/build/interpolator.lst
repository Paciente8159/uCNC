ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"interpolator.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.itp_init,"ax",%progbits
  16              		.align	1
  17              		.global	itp_init
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	itp_init:
  25              	.LFB75:
  26              		.file 1 "../../interpolator.c"
   1:../../interpolator.c **** /*
   2:../../interpolator.c **** 	Name: itp_linear.c
   3:../../interpolator.c **** 	Description: Implementation of a linear acceleration interpolator for µCNC.
   4:../../interpolator.c **** 		The linear acceleration interpolator generates step profiles with constant acceleration.
   5:../../interpolator.c **** 
   6:../../interpolator.c **** 	Copyright: Copyright (c) João Martins
   7:../../interpolator.c **** 	Author: João Martins
   8:../../interpolator.c **** 	Date: 13/10/2019
   9:../../interpolator.c **** 
  10:../../interpolator.c **** 	µCNC is free software: you can redistribute it and/or modify
  11:../../interpolator.c **** 	it under the terms of the GNU General Public License as published by
  12:../../interpolator.c **** 	the Free Software Foundation, either version 3 of the License, or
  13:../../interpolator.c **** 	(at your option) any later version. Please see <http://www.gnu.org/licenses/>
  14:../../interpolator.c **** 
  15:../../interpolator.c **** 	µCNC is distributed WITHOUT ANY WARRANTY;
  16:../../interpolator.c **** 	Also without the implied warranty of	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  17:../../interpolator.c **** 	See the	GNU General Public License for more details.
  18:../../interpolator.c **** */
  19:../../interpolator.c **** 
  20:../../interpolator.c **** #include <stdio.h>
  21:../../interpolator.c **** #include <string.h>
  22:../../interpolator.c **** #include <stdint.h>
  23:../../interpolator.c **** #include <math.h>
  24:../../interpolator.c **** #include <float.h>
  25:../../interpolator.c **** #include "config.h"
  26:../../interpolator.c **** #include "mcu.h"
  27:../../interpolator.c **** #include "interpolator.h"
  28:../../interpolator.c **** #include "settings.h"
  29:../../interpolator.c **** #include "planner.h"
  30:../../interpolator.c **** #include "utils.h"
  31:../../interpolator.c **** #include "cnc.h"
  32:../../interpolator.c **** #include "io_control.h"
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 2


  33:../../interpolator.c **** #include "kinematics.h"
  34:../../interpolator.c **** 
  35:../../interpolator.c **** #define F_INTEGRATOR 100
  36:../../interpolator.c **** #define INTEGRATOR_DELTA_T (1.0f / F_INTEGRATOR)
  37:../../interpolator.c **** //the amount of motion precomputed and stored for the step generator is never less then
  38:../../interpolator.c **** //the size of the buffer x time window size
  39:../../interpolator.c **** //in this case the buffer never holds less then 100ms of motions
  40:../../interpolator.c **** 
  41:../../interpolator.c **** //integrator calculates 10ms (minimum size) time frame windows
  42:../../interpolator.c **** #define INTERPOLATOR_BUFFER_SIZE 5 //number of windows in the buffer
  43:../../interpolator.c **** 
  44:../../interpolator.c **** //contains data of the block being executed by the pulse routine
  45:../../interpolator.c **** //this block has the necessary data to execute the Bresenham line algorithm
  46:../../interpolator.c **** typedef struct itp_blk_
  47:../../interpolator.c **** {
  48:../../interpolator.c ****     uint8_t dirbits;
  49:../../interpolator.c ****     uint32_t steps[STEPPER_COUNT];
  50:../../interpolator.c ****     uint32_t totalsteps;
  51:../../interpolator.c ****     uint32_t errors[STEPPER_COUNT];
  52:../../interpolator.c ****     #ifdef GCODE_PROCESS_LINE_NUMBERS
  53:../../interpolator.c ****     uint32_t line;
  54:../../interpolator.c ****     #endif
  55:../../interpolator.c **** } INTERPOLATOR_BLOCK;
  56:../../interpolator.c **** 
  57:../../interpolator.c **** //contains data of the block segment being executed by the pulse and integrator routines
  58:../../interpolator.c **** //the segment is a fragment of the motion defined in the block
  59:../../interpolator.c **** //this also contains the acceleration/deacceleration info
  60:../../interpolator.c **** typedef struct pulse_sgm_
  61:../../interpolator.c **** {
  62:../../interpolator.c ****     INTERPOLATOR_BLOCK *block;
  63:../../interpolator.c ****     uint8_t next_stepbits;
  64:../../interpolator.c ****     uint16_t remaining_steps;
  65:../../interpolator.c ****     uint16_t clocks_per_tick;
  66:../../interpolator.c ****     uint8_t ticks_per_step;
  67:../../interpolator.c ****     #ifdef USE_SPINDLE
  68:../../interpolator.c ****     uint8_t spindle;
  69:../../interpolator.c ****     bool spindle_inv;
  70:../../interpolator.c ****     #endif
  71:../../interpolator.c ****     float feed;
  72:../../interpolator.c ****     bool update_speed;
  73:../../interpolator.c **** } INTERPOLATOR_SEGMENT;
  74:../../interpolator.c **** 
  75:../../interpolator.c **** //circular buffers
  76:../../interpolator.c **** //creates new type PULSE_BLOCK_BUFFER
  77:../../interpolator.c **** static INTERPOLATOR_BLOCK itp_blk_data[INTERPOLATOR_BUFFER_SIZE];
  78:../../interpolator.c **** static uint8_t itp_blk_data_write;
  79:../../interpolator.c **** static uint8_t itp_blk_data_read;
  80:../../interpolator.c **** static uint8_t itp_blk_data_slots;
  81:../../interpolator.c **** 
  82:../../interpolator.c **** static INTERPOLATOR_SEGMENT itp_sgm_data[INTERPOLATOR_BUFFER_SIZE];
  83:../../interpolator.c **** static volatile uint8_t itp_sgm_data_write;
  84:../../interpolator.c **** static uint8_t itp_sgm_data_read;
  85:../../interpolator.c **** static volatile uint8_t itp_sgm_data_slots;
  86:../../interpolator.c **** //static buffer_t itp_sgm_buffer;
  87:../../interpolator.c **** 
  88:../../interpolator.c **** static planner_block_t *itp_cur_plan_block;
  89:../../interpolator.c **** //pointer to the segment being executed
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 3


  90:../../interpolator.c **** static INTERPOLATOR_SEGMENT *itp_running_sgm;
  91:../../interpolator.c **** 
  92:../../interpolator.c **** //stores the current position of the steppers in the interpolator after processing a planner block
  93:../../interpolator.c **** static uint32_t itp_step_pos[STEPPER_COUNT];
  94:../../interpolator.c **** //keeps track of the machine realtime position
  95:../../interpolator.c **** static uint32_t itp_rt_step_pos[STEPPER_COUNT];
  96:../../interpolator.c **** volatile static uint8_t itp_rt_spindle;
  97:../../interpolator.c **** //flag to force the interpolator to recalc entry and exit limit position of acceleration/deaccelera
  98:../../interpolator.c **** static bool itp_needs_update;
  99:../../interpolator.c **** static volatile bool itp_isr_finnished;
 100:../../interpolator.c **** #ifdef ENABLE_DUAL_DRIVE_AXIS
 101:../../interpolator.c **** volatile static uint8_t itp_step_lock;
 102:../../interpolator.c **** #endif
 103:../../interpolator.c **** 
 104:../../interpolator.c **** volatile static bool itp_busy;
 105:../../interpolator.c **** 
 106:../../interpolator.c **** /*
 107:../../interpolator.c **** 	Interpolator segment buffer functions
 108:../../interpolator.c **** */
 109:../../interpolator.c **** static inline void itp_sgm_buffer_read(void)
 110:../../interpolator.c **** {
 111:../../interpolator.c ****     itp_sgm_data_slots++;
 112:../../interpolator.c ****     if (++itp_sgm_data_read == INTERPOLATOR_BUFFER_SIZE)
 113:../../interpolator.c ****     {
 114:../../interpolator.c ****         itp_sgm_data_read = 0;
 115:../../interpolator.c ****     }
 116:../../interpolator.c **** }
 117:../../interpolator.c **** 
 118:../../interpolator.c **** static inline void itp_sgm_buffer_write(void)
 119:../../interpolator.c **** {
 120:../../interpolator.c ****     itp_sgm_data_slots--;
 121:../../interpolator.c ****     if (++itp_sgm_data_write == INTERPOLATOR_BUFFER_SIZE)
 122:../../interpolator.c ****     {
 123:../../interpolator.c ****         itp_sgm_data_write = 0;
 124:../../interpolator.c ****     }
 125:../../interpolator.c **** }
 126:../../interpolator.c **** 
 127:../../interpolator.c **** static inline bool itp_sgm_is_empty(void)
 128:../../interpolator.c **** {
 129:../../interpolator.c ****     return (itp_sgm_data_slots == INTERPOLATOR_BUFFER_SIZE);
 130:../../interpolator.c **** }
 131:../../interpolator.c **** 
 132:../../interpolator.c **** static inline bool itp_sgm_is_full(void)
 133:../../interpolator.c **** {
 134:../../interpolator.c ****     return (itp_sgm_data_slots == 0);
 135:../../interpolator.c **** }
 136:../../interpolator.c **** 
 137:../../interpolator.c **** static inline void itp_sgm_clear(void)
 138:../../interpolator.c **** {
 139:../../interpolator.c ****     itp_sgm_data_write = 0;
 140:../../interpolator.c ****     itp_sgm_data_read = 0;
 141:../../interpolator.c ****     itp_sgm_data_slots = INTERPOLATOR_BUFFER_SIZE;
 142:../../interpolator.c ****     memset(itp_sgm_data, 0, sizeof(itp_sgm_data));
 143:../../interpolator.c **** }
 144:../../interpolator.c **** 
 145:../../interpolator.c **** /*
 146:../../interpolator.c **** 	Interpolator block buffer functions
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 4


 147:../../interpolator.c **** */
 148:../../interpolator.c **** //NOT NEEDED
 149:../../interpolator.c **** /*
 150:../../interpolator.c **** static inline void itp_blk_buffer_read(void)
 151:../../interpolator.c **** {
 152:../../interpolator.c **** 	itp_blk_data_read++;
 153:../../interpolator.c **** 	itp_blk_data_slots++;
 154:../../interpolator.c **** 	if (itp_blk_data_read == INTERPOLATOR_BUFFER_SIZE)
 155:../../interpolator.c **** 	{
 156:../../interpolator.c **** 		itp_blk_data_read = 0;
 157:../../interpolator.c **** 	}
 158:../../interpolator.c **** }*/
 159:../../interpolator.c **** 
 160:../../interpolator.c **** static inline void itp_blk_buffer_write(void)
 161:../../interpolator.c **** {
 162:../../interpolator.c ****     //itp_blk_data_slots--; //AUTOMATIC LOOP
 163:../../interpolator.c ****     if (++itp_blk_data_write == INTERPOLATOR_BUFFER_SIZE)
 164:../../interpolator.c ****     {
 165:../../interpolator.c ****         itp_blk_data_write = 0;
 166:../../interpolator.c ****     }
 167:../../interpolator.c **** }
 168:../../interpolator.c **** /* NOT NECESSARY
 169:../../interpolator.c **** static inline bool itp_blk_is_empty(void)
 170:../../interpolator.c **** {
 171:../../interpolator.c **** 	return (itp_blk_data_slots == INTERPOLATOR_BUFFER_SIZE);
 172:../../interpolator.c **** }*/
 173:../../interpolator.c **** 
 174:../../interpolator.c **** /*static inline bool itp_blk_is_full(void)
 175:../../interpolator.c **** {
 176:../../interpolator.c **** 	return (itp_blk_data_slots == 0);
 177:../../interpolator.c **** }*/
 178:../../interpolator.c **** 
 179:../../interpolator.c **** static inline void itp_blk_clear(void)
 180:../../interpolator.c **** {
 181:../../interpolator.c ****     itp_blk_data_write = 0;
 182:../../interpolator.c ****     itp_blk_data_read = 0;
 183:../../interpolator.c ****     itp_blk_data_slots = INTERPOLATOR_BUFFER_SIZE;
 184:../../interpolator.c ****     memset(itp_blk_data, 0, sizeof(itp_blk_data));
 185:../../interpolator.c **** }
 186:../../interpolator.c **** 
 187:../../interpolator.c **** /*
 188:../../interpolator.c **** 	Interpolator functions
 189:../../interpolator.c **** */
 190:../../interpolator.c **** //declares functions called by the stepper ISR
 191:../../interpolator.c **** void itp_init(void)
 192:../../interpolator.c **** {
  27              		.loc 1 192 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31 0000 10B5     		push	{r4, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 8
  34              		.cfi_offset 4, -8
  35              		.cfi_offset 14, -4
 193:../../interpolator.c **** #ifdef FORCE_GLOBALS_TO_0
 194:../../interpolator.c ****     //resets buffers
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 5


 195:../../interpolator.c ****     memset(&itp_step_pos, 0, sizeof(itp_step_pos));
 196:../../interpolator.c ****     memset(&itp_rt_step_pos, 0, sizeof(itp_rt_step_pos));
 197:../../interpolator.c ****     itp_running_sgm = NULL;
 198:../../interpolator.c ****     itp_cur_plan_block = NULL;
 199:../../interpolator.c ****     itp_needs_update = false;
 200:../../interpolator.c **** #endif
 201:../../interpolator.c ****     itp_busy = false;
  36              		.loc 1 201 5 view .LVU1
  37              		.loc 1 201 14 is_stmt 0 view .LVU2
  38 0002 0024     		movs	r4, #0
  39 0004 0C4B     		ldr	r3, .L3
  40 0006 1C70     		strb	r4, [r3]
 202:../../interpolator.c ****     itp_isr_finnished = true;
  41              		.loc 1 202 5 is_stmt 1 view .LVU3
  42              		.loc 1 202 23 is_stmt 0 view .LVU4
  43 0008 0C4B     		ldr	r3, .L3+4
  44 000a 0122     		movs	r2, #1
  45 000c 1A70     		strb	r2, [r3]
 203:../../interpolator.c ****     //initialize circular buffers
 204:../../interpolator.c ****     itp_blk_clear();
  46              		.loc 1 204 5 is_stmt 1 view .LVU5
  47              	.LBB28:
  48              	.LBI28:
 179:../../interpolator.c **** {
  49              		.loc 1 179 20 view .LVU6
  50              	.LBB29:
 181:../../interpolator.c ****     itp_blk_data_read = 0;
  51              		.loc 1 181 5 view .LVU7
 181:../../interpolator.c ****     itp_blk_data_read = 0;
  52              		.loc 1 181 24 is_stmt 0 view .LVU8
  53 000e 0C4B     		ldr	r3, .L3+8
  54 0010 1C70     		strb	r4, [r3]
 182:../../interpolator.c ****     itp_blk_data_slots = INTERPOLATOR_BUFFER_SIZE;
  55              		.loc 1 182 5 is_stmt 1 view .LVU9
 183:../../interpolator.c ****     memset(itp_blk_data, 0, sizeof(itp_blk_data));
  56              		.loc 1 183 5 view .LVU10
 184:../../interpolator.c **** }
  57              		.loc 1 184 5 view .LVU11
  58 0012 A022     		movs	r2, #160
  59 0014 2146     		mov	r1, r4
  60 0016 0B48     		ldr	r0, .L3+12
  61 0018 FFF7FEFF 		bl	memset
  62              	.LVL0:
  63              	.LBE29:
  64              	.LBE28:
 205:../../interpolator.c ****     itp_sgm_clear();
  65              		.loc 1 205 5 view .LVU12
  66              	.LBB30:
  67              	.LBI30:
 137:../../interpolator.c **** {
  68              		.loc 1 137 20 view .LVU13
  69              	.LBB31:
 139:../../interpolator.c ****     itp_sgm_data_read = 0;
  70              		.loc 1 139 5 view .LVU14
 139:../../interpolator.c ****     itp_sgm_data_read = 0;
  71              		.loc 1 139 24 is_stmt 0 view .LVU15
  72 001c 0A4B     		ldr	r3, .L3+16
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 6


  73 001e 1C70     		strb	r4, [r3]
 140:../../interpolator.c ****     itp_sgm_data_slots = INTERPOLATOR_BUFFER_SIZE;
  74              		.loc 1 140 5 is_stmt 1 view .LVU16
 140:../../interpolator.c ****     itp_sgm_data_slots = INTERPOLATOR_BUFFER_SIZE;
  75              		.loc 1 140 23 is_stmt 0 view .LVU17
  76 0020 0A4B     		ldr	r3, .L3+20
  77 0022 1C70     		strb	r4, [r3]
 141:../../interpolator.c ****     memset(itp_sgm_data, 0, sizeof(itp_sgm_data));
  78              		.loc 1 141 5 is_stmt 1 view .LVU18
 141:../../interpolator.c ****     memset(itp_sgm_data, 0, sizeof(itp_sgm_data));
  79              		.loc 1 141 24 is_stmt 0 view .LVU19
  80 0024 0A4B     		ldr	r3, .L3+24
  81 0026 0522     		movs	r2, #5
  82 0028 1A70     		strb	r2, [r3]
 142:../../interpolator.c **** }
  83              		.loc 1 142 5 is_stmt 1 view .LVU20
  84 002a 6422     		movs	r2, #100
  85 002c 2146     		mov	r1, r4
  86 002e 0948     		ldr	r0, .L3+28
  87 0030 FFF7FEFF 		bl	memset
  88              	.LVL1:
  89              	.LBE31:
  90              	.LBE30:
 206:../../interpolator.c **** }
  91              		.loc 1 206 1 is_stmt 0 view .LVU21
  92 0034 10BD     		pop	{r4, pc}
  93              	.L4:
  94 0036 00BF     		.align	2
  95              	.L3:
  96 0038 00000000 		.word	.LANCHOR0
  97 003c 00000000 		.word	.LANCHOR1
  98 0040 00000000 		.word	.LANCHOR2
  99 0044 00000000 		.word	.LANCHOR3
 100 0048 00000000 		.word	.LANCHOR4
 101 004c 00000000 		.word	.LANCHOR5
 102 0050 00000000 		.word	.LANCHOR6
 103 0054 00000000 		.word	.LANCHOR7
 104              		.cfi_endproc
 105              	.LFE75:
 107              		.section	.text.itp_update,"ax",%progbits
 108              		.align	1
 109              		.global	itp_update
 110              		.syntax unified
 111              		.thumb
 112              		.thumb_func
 113              		.fpu softvfp
 115              	itp_update:
 116              	.LFB77:
 207:../../interpolator.c **** 
 208:../../interpolator.c **** void itp_run(void)
 209:../../interpolator.c **** {
 210:../../interpolator.c ****     //static INTERPOLATOR_BLOCK *new_block = NULL;
 211:../../interpolator.c ****     //static bool read_new_block = true;
 212:../../interpolator.c ****     //conversion vars
 213:../../interpolator.c ****     static float min_step_distance = 0;
 214:../../interpolator.c ****     static float steps_per_mm = 0;
 215:../../interpolator.c ****     //limits of the speed profile
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 7


 216:../../interpolator.c ****     static uint32_t accel_until = 0;
 217:../../interpolator.c ****     static uint32_t deaccel_from = 0;
 218:../../interpolator.c ****     static float junction_speed_sqr = 0;
 219:../../interpolator.c ****     static float half_speed_change = 0;
 220:../../interpolator.c ****     static bool initial_accel_negative = false;
 221:../../interpolator.c **** 
 222:../../interpolator.c ****     //accel profile vars
 223:../../interpolator.c ****     //static float processed_steps = 0;
 224:../../interpolator.c ****     static uint32_t unprocessed_steps = 0;
 225:../../interpolator.c ****     //static uint8_t accel_profile = 0;
 226:../../interpolator.c **** 
 227:../../interpolator.c ****     INTERPOLATOR_SEGMENT *sgm = NULL;
 228:../../interpolator.c **** 
 229:../../interpolator.c ****     //creates segments and fills the buffer
 230:../../interpolator.c ****     while (!itp_sgm_is_full())
 231:../../interpolator.c ****     {
 232:../../interpolator.c ****         if(cnc_get_exec_state(EXEC_ALARM))
 233:../../interpolator.c ****         {
 234:../../interpolator.c ****             //on any active alarm exits
 235:../../interpolator.c ****             return;
 236:../../interpolator.c ****         }
 237:../../interpolator.c ****         /* NOT NECESSARY
 238:../../interpolator.c ****         /* BLOCKS CAN BE OVERWRITTEN SINCE THEY NEVER WILL BE LARGER THEN THE NUMBER OF SEGMENTS
 239:../../interpolator.c ****         //flushes completed blocks
 240:../../interpolator.c ****         /*
 241:../../interpolator.c ****         if (itp_sgm_data[itp_sgm_data_read].block != NULL)
 242:../../interpolator.c ****         {
 243:../../interpolator.c ****         	if (!itp_blk_is_empty() && (itp_sgm_data[itp_sgm_data_read].block != &itp_blk_data[itp_blk
 244:../../interpolator.c ****         	{
 245:../../interpolator.c ****         		itp_blk_buffer_read();
 246:../../interpolator.c ****         	}
 247:../../interpolator.c ****         }*/
 248:../../interpolator.c **** 
 249:../../interpolator.c ****         //no planner blocks has beed processed or last planner block was fully processed
 250:../../interpolator.c ****         if (itp_cur_plan_block == NULL)
 251:../../interpolator.c ****         {
 252:../../interpolator.c ****             //planner is empty or interpolator block buffer full. Nothing to be done
 253:../../interpolator.c ****             if (planner_buffer_is_empty()/* || itp_blk_is_full()*/)
 254:../../interpolator.c ****             {
 255:../../interpolator.c ****                 break;
 256:../../interpolator.c ****             }
 257:../../interpolator.c ****             //get the first block in the planner
 258:../../interpolator.c ****             itp_cur_plan_block = planner_get_block();
 259:../../interpolator.c ****             #ifdef GCODE_PROCESS_LINE_NUMBERS
 260:../../interpolator.c ****             itp_blk_data[itp_blk_data_write].line = itp_cur_plan_block->line;
 261:../../interpolator.c ****             #endif
 262:../../interpolator.c **** 
 263:../../interpolator.c ****             if (itp_cur_plan_block->dwell != 0)
 264:../../interpolator.c ****             {
 265:../../interpolator.c ****                 itp_delay(itp_cur_plan_block->dwell);
 266:../../interpolator.c ****             }
 267:../../interpolator.c **** 
 268:../../interpolator.c ****             if (itp_cur_plan_block->distance == 0)
 269:../../interpolator.c ****             {
 270:../../interpolator.c ****                 #ifdef USE_SPINDLE
 271:../../interpolator.c **** 				if (itp_cur_plan_block->dwell == 0) //if dwell is 0 then run a single loop to updtate outputs (
 272:../../interpolator.c **** 	            {
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 8


 273:../../interpolator.c **** 	                itp_delay(1);
 274:../../interpolator.c **** 	            }
 275:../../interpolator.c ****                 #endif
 276:../../interpolator.c ****             	//no motion action (doesn't need a interpolator block = NULL)
 277:../../interpolator.c ****                 itp_cur_plan_block = NULL;
 278:../../interpolator.c ****                 planner_discard_block();
 279:../../interpolator.c ****                 break; //exits after adding the dwell segment if motion is 0 (empty motion block)
 280:../../interpolator.c ****             }
 281:../../interpolator.c **** 
 282:../../interpolator.c ****             //erases previous values
 283:../../interpolator.c ****             itp_blk_data[itp_blk_data_write].dirbits = 0;
 284:../../interpolator.c ****             itp_blk_data[itp_blk_data_write].totalsteps = 0;
 285:../../interpolator.c ****             //itp_blk_data[itp_blk_data_write].step_freq = F_STEP_MIN;
 286:../../interpolator.c **** 
 287:../../interpolator.c ****             uint32_t step_new_pos[STEPPER_COUNT];
 288:../../interpolator.c ****             //applies the inverse kinematic to get next position in steps
 289:../../interpolator.c ****             kinematics_apply_inverse(itp_cur_plan_block->pos, (uint32_t *)&step_new_pos);
 290:../../interpolator.c **** 
 291:../../interpolator.c ****             //calculates the number of steps to execute
 292:../../interpolator.c ****             itp_blk_data[itp_blk_data_write].dirbits = 0;
 293:../../interpolator.c ****             for (uint8_t i = STEPPER_COUNT; i != 0;)
 294:../../interpolator.c ****             {
 295:../../interpolator.c ****                 i--;
 296:../../interpolator.c ****                 itp_blk_data[itp_blk_data_write].steps[i] = step_new_pos[i] - itp_step_pos[i];
 297:../../interpolator.c **** 
 298:../../interpolator.c ****                 if(itp_blk_data[itp_blk_data_write].steps[i] > (uint32_t)INT32_MAX)
 299:../../interpolator.c ****                 {
 300:../../interpolator.c ****                     itp_blk_data[itp_blk_data_write].dirbits |= (1<<i);
 301:../../interpolator.c ****                     itp_blk_data[itp_blk_data_write].steps[i] = ~itp_blk_data[itp_blk_data_write].s
 302:../../interpolator.c ****                 }
 303:../../interpolator.c **** 
 304:../../interpolator.c ****                 itp_blk_data[itp_blk_data_write].totalsteps = MAX(itp_blk_data[itp_blk_data_write].
 305:../../interpolator.c ****             }
 306:../../interpolator.c **** 
 307:../../interpolator.c ****             //copies data for interpolator step_pos
 308:../../interpolator.c ****             //itp_blk_data[itp_blk_data_write].dirbits = itp_cur_plan_block->dirbits;
 309:../../interpolator.c ****             memcpy(&(itp_step_pos), &(step_new_pos), sizeof(step_new_pos));
 310:../../interpolator.c **** 
 311:../../interpolator.c ****             //calculates conversion vars
 312:../../interpolator.c ****             steps_per_mm = ((float)itp_blk_data[itp_blk_data_write].totalsteps) / itp_cur_plan_bloc
 313:../../interpolator.c ****             min_step_distance = 1.0f / steps_per_mm;
 314:../../interpolator.c **** 
 315:../../interpolator.c ****             //initializes data for generating step segments
 316:../../interpolator.c ****             unprocessed_steps = itp_blk_data[itp_blk_data_write].totalsteps;
 317:../../interpolator.c **** 
 318:../../interpolator.c ****             //flags block for recalculation of speeds
 319:../../interpolator.c ****             itp_needs_update = true;
 320:../../interpolator.c **** 
 321:../../interpolator.c ****             half_speed_change = 0.5f * INTEGRATOR_DELTA_T * itp_cur_plan_block->acceleration;
 322:../../interpolator.c **** 
 323:../../interpolator.c ****             uint32_t error = itp_blk_data[itp_blk_data_write].totalsteps >> 1;
 324:../../interpolator.c ****             for (uint8_t i = 0; i < STEPPER_COUNT; i++)
 325:../../interpolator.c ****             {
 326:../../interpolator.c ****                 itp_blk_data[itp_blk_data_write].errors[i] = error;
 327:../../interpolator.c ****             }
 328:../../interpolator.c ****         }
 329:../../interpolator.c **** 
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 9


 330:../../interpolator.c ****         if(itp_sgm_is_full()) //re-checks in case an injected dweel filled the buffer
 331:../../interpolator.c ****         {
 332:../../interpolator.c ****             break;
 333:../../interpolator.c ****         }
 334:../../interpolator.c **** 
 335:../../interpolator.c ****         //uint32_t prev_unprocessed_steps = unprocessed_steps;
 336:../../interpolator.c ****         //float min_delta = 0;
 337:../../interpolator.c **** 
 338:../../interpolator.c ****         sgm = &itp_sgm_data[itp_sgm_data_write];
 339:../../interpolator.c ****         sgm->block = &itp_blk_data[itp_blk_data_write];
 340:../../interpolator.c ****         //sgm->update_speed = true;
 341:../../interpolator.c **** 
 342:../../interpolator.c ****         //if an hold is active forces to deaccelerate
 343:../../interpolator.c ****         if (cnc_get_exec_state(EXEC_HOLD))
 344:../../interpolator.c ****         {
 345:../../interpolator.c ****             //forces deacceleration by overriding the profile juntion points
 346:../../interpolator.c ****             accel_until = unprocessed_steps;
 347:../../interpolator.c ****             deaccel_from = unprocessed_steps;
 348:../../interpolator.c ****             itp_needs_update = true;
 349:../../interpolator.c ****         }
 350:../../interpolator.c ****         else if (itp_needs_update) //forces recalculation of acceleration and deacceleration profil
 351:../../interpolator.c ****         {
 352:../../interpolator.c ****             itp_needs_update = false;
 353:../../interpolator.c ****             float exit_speed_sqr = planner_get_block_exit_speed_sqr();
 354:../../interpolator.c ****             junction_speed_sqr = planner_get_block_top_speed();
 355:../../interpolator.c **** 
 356:../../interpolator.c ****             accel_until = unprocessed_steps;
 357:../../interpolator.c ****             deaccel_from = 0;
 358:../../interpolator.c ****             if (junction_speed_sqr != itp_cur_plan_block->entry_feed_sqr)
 359:../../interpolator.c ****             {
 360:../../interpolator.c ****                 float accel_dist = 0.5f * ABS(junction_speed_sqr - itp_cur_plan_block->entry_feed_s
 361:../../interpolator.c ****                 accel_until -= floorf(accel_dist * steps_per_mm);
 362:../../interpolator.c ****                 initial_accel_negative = (junction_speed_sqr < itp_cur_plan_block->entry_feed_sqr);
 363:../../interpolator.c ****             }
 364:../../interpolator.c ****             
 365:../../interpolator.c ****             //if entry speed already a junction speed updates it.
 366:../../interpolator.c ****             if(accel_until == unprocessed_steps)
 367:../../interpolator.c ****             {
 368:../../interpolator.c ****             	itp_cur_plan_block->entry_feed_sqr = junction_speed_sqr;
 369:../../interpolator.c **** 			}
 370:../../interpolator.c **** 
 371:../../interpolator.c ****             if (junction_speed_sqr > exit_speed_sqr)
 372:../../interpolator.c ****             {
 373:../../interpolator.c ****                 float deaccel_dist = 0.5f * (junction_speed_sqr - exit_speed_sqr) * itp_cur_plan_bl
 374:../../interpolator.c ****                 deaccel_from = floorf(deaccel_dist * steps_per_mm);
 375:../../interpolator.c ****             }
 376:../../interpolator.c ****         }
 377:../../interpolator.c **** 
 378:../../interpolator.c ****         float speed_change;
 379:../../interpolator.c ****         float profile_steps_limit;
 380:../../interpolator.c ****         //acceleration profile
 381:../../interpolator.c ****         if (unprocessed_steps > accel_until)
 382:../../interpolator.c ****         {
 383:../../interpolator.c ****             /*
 384:../../interpolator.c ****             	computes the traveled distance within a fixed amount of time
 385:../../interpolator.c ****             	this time is the reverse integrator frequency (INTEGRATOR_DELTA_T)
 386:../../interpolator.c ****             	for constant acceleration or deceleration the traveled distance will be equal
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 10


 387:../../interpolator.c ****             	to the same distance traveled at a constant speed given that
 388:../../interpolator.c ****             	constant_speed = 0.5 * (final_speed - initial_speed) + initial_speed
 389:../../interpolator.c **** 
 390:../../interpolator.c ****             	where
 391:../../interpolator.c **** 
 392:../../interpolator.c ****             	(final_speed - initial_speed) = acceleration * INTEGRATOR_DELTA_T;
 393:../../interpolator.c ****             */
 394:../../interpolator.c ****             speed_change = (!initial_accel_negative) ? half_speed_change : -half_speed_change;
 395:../../interpolator.c ****             profile_steps_limit = accel_until;
 396:../../interpolator.c ****             sgm->update_speed = true;
 397:../../interpolator.c **** 
 398:../../interpolator.c ****         }
 399:../../interpolator.c ****         else if (unprocessed_steps > deaccel_from)
 400:../../interpolator.c ****         {
 401:../../interpolator.c ****             /*if(unprocessed_steps == accel_until)	//first time in const step speed updates current
 402:../../interpolator.c ****             {
 403:../../interpolator.c ****             	itp_cur_plan_block->entry_feed_sqr = junction_speed_sqr;
 404:../../interpolator.c ****             }*/
 405:../../interpolator.c ****             //constant speed segment
 406:../../interpolator.c ****             speed_change = 0;
 407:../../interpolator.c ****             profile_steps_limit = deaccel_from;
 408:../../interpolator.c ****             sgm->update_speed = false;
 409:../../interpolator.c ****         }
 410:../../interpolator.c ****         else
 411:../../interpolator.c ****         {
 412:../../interpolator.c ****             speed_change = -half_speed_change;
 413:../../interpolator.c ****             profile_steps_limit = 0;
 414:../../interpolator.c ****             sgm->update_speed = true;
 415:../../interpolator.c ****         }
 416:../../interpolator.c **** 
 417:../../interpolator.c ****         float current_speed = fast_sqrt(itp_cur_plan_block->entry_feed_sqr);
 418:../../interpolator.c ****         /*
 419:../../interpolator.c ****         	common calculations for all three profiles (accel, constant and deaccel)
 420:../../interpolator.c ****         */
 421:../../interpolator.c ****         current_speed += speed_change;
 422:../../interpolator.c ****         //if on active hold state
 423:../../interpolator.c ****         if (cnc_get_exec_state(EXEC_HOLD))
 424:../../interpolator.c ****         {
 425:../../interpolator.c ****             if (current_speed < 0)
 426:../../interpolator.c ****             {
 427:../../interpolator.c ****                 //after a feed hold if 0 speed reached exits and starves the buffer
 428:../../interpolator.c ****                 return;
 429:../../interpolator.c ****             }
 430:../../interpolator.c ****         }
 431:../../interpolator.c **** 
 432:../../interpolator.c ****         float partial_distance = current_speed * INTEGRATOR_DELTA_T;
 433:../../interpolator.c ****         //computes how many steps it can perform at this speed and frame window
 434:../../interpolator.c ****         uint16_t steps = (uint16_t)floorf(partial_distance * steps_per_mm);
 435:../../interpolator.c ****         //if traveled distance is less the one step fits at least one step
 436:../../interpolator.c ****         if (steps == 0)
 437:../../interpolator.c ****         {
 438:../../interpolator.c ****             steps = 1;
 439:../../interpolator.c ****         }
 440:../../interpolator.c ****         //if computed steps exceed the remaining steps for the motion shortens the distance
 441:../../interpolator.c ****         if (steps > (unprocessed_steps - profile_steps_limit))
 442:../../interpolator.c ****         {
 443:../../interpolator.c ****             steps = (uint16_t)(unprocessed_steps - profile_steps_limit);
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 11


 444:../../interpolator.c ****         }
 445:../../interpolator.c **** 
 446:../../interpolator.c ****         //recalculates the precise distance to travel the given amount os steps
 447:../../interpolator.c ****         partial_distance = steps * min_step_distance;
 448:../../interpolator.c **** 
 449:../../interpolator.c ****         if(sgm->update_speed)
 450:../../interpolator.c ****         {
 451:../../interpolator.c ****             float new_speed_sqr;
 452:../../interpolator.c ****             if(speed_change>0)
 453:../../interpolator.c ****             {
 454:../../interpolator.c ****                 //calculates the final speed at the end of this position
 455:../../interpolator.c ****                 new_speed_sqr = 2 * itp_cur_plan_block->acceleration * partial_distance + itp_cur_p
 456:../../interpolator.c ****             }
 457:../../interpolator.c ****             else
 458:../../interpolator.c ****             {
 459:../../interpolator.c ****                 //calculates the final speed at the end of this position
 460:../../interpolator.c ****                 new_speed_sqr = itp_cur_plan_block->entry_feed_sqr - (2 * itp_cur_plan_block->accel
 461:../../interpolator.c ****                 new_speed_sqr = MAX(new_speed_sqr, 0); //avoids rounding errors since speed is alwa
 462:../../interpolator.c ****             }
 463:../../interpolator.c ****             current_speed = 0.5f * (fast_sqrt(new_speed_sqr) + fast_sqrt(itp_cur_plan_block->entry_
 464:../../interpolator.c ****             itp_cur_plan_block->entry_feed_sqr = new_speed_sqr;
 465:../../interpolator.c ****         }
 466:../../interpolator.c **** 
 467:../../interpolator.c ****         //completes the segment information (step speed, steps) and updates the block
 468:../../interpolator.c ****         mcu_freq_to_clocks(current_speed * steps_per_mm, &(sgm->clocks_per_tick), &(sgm->ticks_per_
 469:../../interpolator.c ****         sgm->remaining_steps = steps;
 470:../../interpolator.c ****         itp_cur_plan_block->distance -= partial_distance;
 471:../../interpolator.c **** 
 472:../../interpolator.c ****         sgm->feed = current_speed;
 473:../../interpolator.c ****         #ifdef USE_SPINDLE
 474:../../interpolator.c ****         float top_speed_inv = fast_inv_sqrt(junction_speed_sqr);
 475:../../interpolator.c ****         #ifdef LASER_MODE
 476:../../interpolator.c ****         planner_get_spindle_speed(MIN(1, current_speed * top_speed_inv), &(sgm->spindle), &(sgm->sp
 477:../../interpolator.c ****         #else
 478:../../interpolator.c ****         planner_get_spindle_speed(1, &(sgm->spindle), &(sgm->spindle_inv));
 479:../../interpolator.c ****         #endif
 480:../../interpolator.c ****         #endif
 481:../../interpolator.c ****         unprocessed_steps -= sgm->remaining_steps;
 482:../../interpolator.c **** 
 483:../../interpolator.c ****         if (unprocessed_steps == accel_until) //resets float additions error
 484:../../interpolator.c ****         {
 485:../../interpolator.c ****             itp_cur_plan_block->entry_feed_sqr = junction_speed_sqr;
 486:../../interpolator.c ****             itp_cur_plan_block->distance = min_step_distance * accel_until;
 487:../../interpolator.c ****         }
 488:../../interpolator.c ****         else if (unprocessed_steps == deaccel_from) //resets float additions error
 489:../../interpolator.c ****         {
 490:../../interpolator.c ****             itp_cur_plan_block->distance = min_step_distance * deaccel_from;
 491:../../interpolator.c ****         }
 492:../../interpolator.c **** 
 493:../../interpolator.c ****         itp_sgm_buffer_write();
 494:../../interpolator.c **** 
 495:../../interpolator.c ****         if (unprocessed_steps == 0)
 496:../../interpolator.c ****         {
 497:../../interpolator.c ****             itp_blk_buffer_write();
 498:../../interpolator.c ****             itp_cur_plan_block = NULL;
 499:../../interpolator.c ****             planner_discard_block(); //discards planner block
 500:../../interpolator.c ****             //accel_profile = 0; //no updates necessary to planner
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 12


 501:../../interpolator.c ****             //break;
 502:../../interpolator.c ****         }
 503:../../interpolator.c ****     }
 504:../../interpolator.c **** 
 505:../../interpolator.c ****     //starts the step isr if is stopped and there are segments to execute
 506:../../interpolator.c ****     if (!cnc_get_exec_state(EXEC_HOLD | EXEC_ALARM | EXEC_RUN) && (itp_sgm_data_slots != INTERPOLAT
 507:../../interpolator.c ****     {
 508:../../interpolator.c **** #ifdef STEPPER_ENABLE
 509:../../interpolator.c ****         io_set_outputs(STEPPER_ENABLE);
 510:../../interpolator.c **** #endif
 511:../../interpolator.c ****         cnc_set_exec_state(EXEC_RUN); //flags that it started running
 512:../../interpolator.c ****         mcu_start_step_ISR(itp_sgm_data[itp_sgm_data_read].clocks_per_tick, itp_sgm_data[itp_sgm_da
 513:../../interpolator.c ****     }
 514:../../interpolator.c **** }
 515:../../interpolator.c **** 
 516:../../interpolator.c **** void itp_update(void)
 517:../../interpolator.c **** {
 117              		.loc 1 517 1 is_stmt 1 view -0
 118              		.cfi_startproc
 119              		@ args = 0, pretend = 0, frame = 0
 120              		@ frame_needed = 0, uses_anonymous_args = 0
 121              		@ link register save eliminated.
 518:../../interpolator.c ****     //flags executing block for update
 519:../../interpolator.c ****     itp_needs_update = true;
 122              		.loc 1 519 5 view .LVU23
 123              		.loc 1 519 22 is_stmt 0 view .LVU24
 124 0000 014B     		ldr	r3, .L6
 125 0002 0122     		movs	r2, #1
 126 0004 1A70     		strb	r2, [r3]
 520:../../interpolator.c **** }
 127              		.loc 1 520 1 view .LVU25
 128 0006 7047     		bx	lr
 129              	.L7:
 130              		.align	2
 131              	.L6:
 132 0008 00000000 		.word	.LANCHOR8
 133              		.cfi_endproc
 134              	.LFE77:
 136              		.section	.text.itp_stop,"ax",%progbits
 137              		.align	1
 138              		.global	itp_stop
 139              		.syntax unified
 140              		.thumb
 141              		.thumb_func
 142              		.fpu softvfp
 144              	itp_stop:
 145              	.LFB78:
 521:../../interpolator.c **** 
 522:../../interpolator.c **** void itp_stop(void)
 523:../../interpolator.c **** {
 146              		.loc 1 523 1 is_stmt 1 view -0
 147              		.cfi_startproc
 148              		@ args = 0, pretend = 0, frame = 0
 149              		@ frame_needed = 0, uses_anonymous_args = 0
 150 0000 08B5     		push	{r3, lr}
 151              	.LCFI1:
 152              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 13


 153              		.cfi_offset 3, -8
 154              		.cfi_offset 14, -4
 524:../../interpolator.c ****     mcu_step_stop_ISR();
 155              		.loc 1 524 5 view .LVU27
 156 0002 FFF7FEFF 		bl	mcu_step_stop_ISR
 157              	.LVL2:
 525:../../interpolator.c ****     cnc_clear_exec_state(EXEC_RUN);
 158              		.loc 1 525 5 view .LVU28
 159 0006 0120     		movs	r0, #1
 160 0008 FFF7FEFF 		bl	cnc_clear_exec_state
 161              	.LVL3:
 526:../../interpolator.c **** }
 162              		.loc 1 526 1 is_stmt 0 view .LVU29
 163 000c 08BD     		pop	{r3, pc}
 164              		.cfi_endproc
 165              	.LFE78:
 167              		.section	.text.itp_clear,"ax",%progbits
 168              		.align	1
 169              		.global	itp_clear
 170              		.syntax unified
 171              		.thumb
 172              		.thumb_func
 173              		.fpu softvfp
 175              	itp_clear:
 176              	.LFB79:
 527:../../interpolator.c **** 
 528:../../interpolator.c **** void itp_clear(void)
 529:../../interpolator.c **** {
 177              		.loc 1 529 1 is_stmt 1 view -0
 178              		.cfi_startproc
 179              		@ args = 0, pretend = 0, frame = 0
 180              		@ frame_needed = 0, uses_anonymous_args = 0
 181 0000 10B5     		push	{r4, lr}
 182              	.LCFI2:
 183              		.cfi_def_cfa_offset 8
 184              		.cfi_offset 4, -8
 185              		.cfi_offset 14, -4
 530:../../interpolator.c ****     itp_cur_plan_block = NULL;
 186              		.loc 1 530 5 view .LVU31
 187              		.loc 1 530 24 is_stmt 0 view .LVU32
 188 0002 0023     		movs	r3, #0
 189 0004 0B4A     		ldr	r2, .L12
 190 0006 1360     		str	r3, [r2]
 531:../../interpolator.c ****     itp_running_sgm = NULL;
 191              		.loc 1 531 5 is_stmt 1 view .LVU33
 192              		.loc 1 531 21 is_stmt 0 view .LVU34
 193 0008 0B4A     		ldr	r2, .L12+4
 194 000a 1360     		str	r3, [r2]
 532:../../interpolator.c ****     //syncs the stored position and the real position
 533:../../interpolator.c ****     memcpy(&itp_step_pos, &itp_rt_step_pos, sizeof(itp_step_pos));
 195              		.loc 1 533 5 is_stmt 1 view .LVU35
 196 000c 0B4C     		ldr	r4, .L12+8
 197 000e 0C4A     		ldr	r2, .L12+12
 198 0010 07CA     		ldm	r2, {r0, r1, r2}
 199 0012 84E80700 		stm	r4, {r0, r1, r2}
 534:../../interpolator.c ****     itp_sgm_data_write = 0;
 200              		.loc 1 534 5 view .LVU36
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 14


 201              		.loc 1 534 24 is_stmt 0 view .LVU37
 202 0016 0B4A     		ldr	r2, .L12+16
 203 0018 1370     		strb	r3, [r2]
 535:../../interpolator.c ****     itp_sgm_data_read = 0;
 204              		.loc 1 535 5 is_stmt 1 view .LVU38
 205              		.loc 1 535 23 is_stmt 0 view .LVU39
 206 001a 0B4A     		ldr	r2, .L12+20
 207 001c 1370     		strb	r3, [r2]
 536:../../interpolator.c ****     itp_sgm_data_slots = INTERPOLATOR_BUFFER_SIZE;
 208              		.loc 1 536 5 is_stmt 1 view .LVU40
 209              		.loc 1 536 24 is_stmt 0 view .LVU41
 210 001e 0B4A     		ldr	r2, .L12+24
 211 0020 0521     		movs	r1, #5
 212 0022 1170     		strb	r1, [r2]
 537:../../interpolator.c ****     itp_blk_clear();
 213              		.loc 1 537 5 is_stmt 1 view .LVU42
 214              	.LBB32:
 215              	.LBI32:
 179:../../interpolator.c **** {
 216              		.loc 1 179 20 view .LVU43
 217              	.LBB33:
 181:../../interpolator.c ****     itp_blk_data_read = 0;
 218              		.loc 1 181 5 view .LVU44
 181:../../interpolator.c ****     itp_blk_data_read = 0;
 219              		.loc 1 181 24 is_stmt 0 view .LVU45
 220 0024 0A4A     		ldr	r2, .L12+28
 221 0026 1370     		strb	r3, [r2]
 182:../../interpolator.c ****     itp_blk_data_slots = INTERPOLATOR_BUFFER_SIZE;
 222              		.loc 1 182 5 is_stmt 1 view .LVU46
 183:../../interpolator.c ****     memset(itp_blk_data, 0, sizeof(itp_blk_data));
 223              		.loc 1 183 5 view .LVU47
 184:../../interpolator.c **** }
 224              		.loc 1 184 5 view .LVU48
 225 0028 A022     		movs	r2, #160
 226 002a 1946     		mov	r1, r3
 227 002c 0948     		ldr	r0, .L12+32
 228 002e FFF7FEFF 		bl	memset
 229              	.LVL4:
 230              	.LBE33:
 231              	.LBE32:
 538:../../interpolator.c **** }
 232              		.loc 1 538 1 is_stmt 0 view .LVU49
 233 0032 10BD     		pop	{r4, pc}
 234              	.L13:
 235              		.align	2
 236              	.L12:
 237 0034 00000000 		.word	.LANCHOR9
 238 0038 00000000 		.word	.LANCHOR10
 239 003c 00000000 		.word	.LANCHOR11
 240 0040 00000000 		.word	.LANCHOR12
 241 0044 00000000 		.word	.LANCHOR4
 242 0048 00000000 		.word	.LANCHOR5
 243 004c 00000000 		.word	.LANCHOR6
 244 0050 00000000 		.word	.LANCHOR2
 245 0054 00000000 		.word	.LANCHOR3
 246              		.cfi_endproc
 247              	.LFE79:
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 15


 249              		.section	.text.itp_get_rt_position,"ax",%progbits
 250              		.align	1
 251              		.global	itp_get_rt_position
 252              		.syntax unified
 253              		.thumb
 254              		.thumb_func
 255              		.fpu softvfp
 257              	itp_get_rt_position:
 258              	.LVL5:
 259              	.LFB80:
 539:../../interpolator.c **** 
 540:../../interpolator.c **** void itp_get_rt_position(float *axis)
 541:../../interpolator.c **** {
 260              		.loc 1 541 1 is_stmt 1 view -0
 261              		.cfi_startproc
 262              		@ args = 0, pretend = 0, frame = 16
 263              		@ frame_needed = 0, uses_anonymous_args = 0
 264              		.loc 1 541 1 is_stmt 0 view .LVU51
 265 0000 10B5     		push	{r4, lr}
 266              	.LCFI3:
 267              		.cfi_def_cfa_offset 8
 268              		.cfi_offset 4, -8
 269              		.cfi_offset 14, -4
 270 0002 84B0     		sub	sp, sp, #16
 271              	.LCFI4:
 272              		.cfi_def_cfa_offset 24
 273 0004 0446     		mov	r4, r0
 542:../../interpolator.c ****     uint32_t step_pos[STEPPER_COUNT];
 274              		.loc 1 542 5 is_stmt 1 view .LVU52
 543:../../interpolator.c ****     memcpy(step_pos, itp_rt_step_pos, sizeof(step_pos));
 275              		.loc 1 543 5 view .LVU53
 276 0006 054A     		ldr	r2, .L16
 277 0008 01AB     		add	r3, sp, #4
 278 000a 07CA     		ldm	r2, {r0, r1, r2}
 279              	.LVL6:
 280              		.loc 1 543 5 is_stmt 0 view .LVU54
 281 000c 83E80700 		stm	r3, {r0, r1, r2}
 544:../../interpolator.c ****     kinematics_apply_forward((uint32_t *)&step_pos, axis);
 282              		.loc 1 544 5 is_stmt 1 view .LVU55
 283 0010 2146     		mov	r1, r4
 284 0012 1846     		mov	r0, r3
 285 0014 FFF7FEFF 		bl	kinematics_apply_forward
 286              	.LVL7:
 545:../../interpolator.c **** }
 287              		.loc 1 545 1 is_stmt 0 view .LVU56
 288 0018 04B0     		add	sp, sp, #16
 289              	.LCFI5:
 290              		.cfi_def_cfa_offset 8
 291              		@ sp needed
 292 001a 10BD     		pop	{r4, pc}
 293              	.LVL8:
 294              	.L17:
 295              		.loc 1 545 1 view .LVU57
 296              		.align	2
 297              	.L16:
 298 001c 00000000 		.word	.LANCHOR12
 299              		.cfi_endproc
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 16


 300              	.LFE80:
 302              		.section	.text.itp_reset_rt_position,"ax",%progbits
 303              		.align	1
 304              		.global	itp_reset_rt_position
 305              		.syntax unified
 306              		.thumb
 307              		.thumb_func
 308              		.fpu softvfp
 310              	itp_reset_rt_position:
 311              	.LFB81:
 546:../../interpolator.c **** 
 547:../../interpolator.c **** void itp_reset_rt_position(void)
 548:../../interpolator.c **** {
 312              		.loc 1 548 1 is_stmt 1 view -0
 313              		.cfi_startproc
 314              		@ args = 0, pretend = 0, frame = 16
 315              		@ frame_needed = 0, uses_anonymous_args = 0
 549:../../interpolator.c ****     if (g_settings.homing_enabled)
 316              		.loc 1 549 5 view .LVU59
 317              		.loc 1 549 19 is_stmt 0 view .LVU60
 318 0000 174B     		ldr	r3, .L32
 319 0002 DB7D     		ldrb	r3, [r3, #23]	@ zero_extendqisi2
 320              		.loc 1 549 8 view .LVU61
 321 0004 2BB3     		cbz	r3, .L30
 548:../../interpolator.c ****     if (g_settings.homing_enabled)
 322              		.loc 1 548 1 view .LVU62
 323 0006 00B5     		push	{lr}
 324              	.LCFI6:
 325              		.cfi_def_cfa_offset 4
 326              		.cfi_offset 14, -4
 327 0008 85B0     		sub	sp, sp, #20
 328              	.LCFI7:
 329              		.cfi_def_cfa_offset 24
 330              	.LBB34:
 331              	.LBB35:
 550:../../interpolator.c ****     {
 551:../../interpolator.c ****         float origin[AXIS_COUNT];
 552:../../interpolator.c ****         for (uint8_t i = AXIS_COUNT; i != 0;)
 332              		.loc 1 552 22 view .LVU63
 333 000a 0323     		movs	r3, #3
 334 000c 05E0     		b	.L19
 335              	.LVL9:
 336              	.L21:
 553:../../interpolator.c ****         {
 554:../../interpolator.c ****             i--;
 555:../../interpolator.c ****             if (g_settings.homing_dir_invert_mask & (1 << i))
 556:../../interpolator.c ****             {
 557:../../interpolator.c ****                 origin[i] = g_settings.max_distance[i];
 558:../../interpolator.c ****             }
 559:../../interpolator.c ****             else
 560:../../interpolator.c ****             {
 561:../../interpolator.c ****                 origin[i] = 0;
 337              		.loc 1 561 17 is_stmt 1 view .LVU64
 338              		.loc 1 561 27 is_stmt 0 view .LVU65
 339 000e 0021     		movs	r1, #0
 340 0010 04AA     		add	r2, sp, #16
 341 0012 02EB8302 		add	r2, r2, r3, lsl #2
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 17


 342 0016 42F80C1C 		str	r1, [r2, #-12]	@ float
 343              	.LVL10:
 344              	.L19:
 552:../../interpolator.c ****         {
 345              		.loc 1 552 38 is_stmt 1 discriminator 1 view .LVU66
 552:../../interpolator.c ****         {
 346              		.loc 1 552 9 is_stmt 0 discriminator 1 view .LVU67
 347 001a 9BB1     		cbz	r3, .L31
 554:../../interpolator.c ****             if (g_settings.homing_dir_invert_mask & (1 << i))
 348              		.loc 1 554 13 is_stmt 1 view .LVU68
 554:../../interpolator.c ****             if (g_settings.homing_dir_invert_mask & (1 << i))
 349              		.loc 1 554 14 is_stmt 0 view .LVU69
 350 001c 013B     		subs	r3, r3, #1
 351              	.LVL11:
 554:../../interpolator.c ****             if (g_settings.homing_dir_invert_mask & (1 << i))
 352              		.loc 1 554 14 view .LVU70
 353 001e DBB2     		uxtb	r3, r3
 354              	.LVL12:
 555:../../interpolator.c ****             {
 355              		.loc 1 555 13 is_stmt 1 view .LVU71
 555:../../interpolator.c ****             {
 356              		.loc 1 555 27 is_stmt 0 view .LVU72
 357 0020 0F4A     		ldr	r2, .L32
 358 0022 127E     		ldrb	r2, [r2, #24]	@ zero_extendqisi2
 555:../../interpolator.c ****             {
 359              		.loc 1 555 17 view .LVU73
 360 0024 1A41     		asrs	r2, r2, r3
 555:../../interpolator.c ****             {
 361              		.loc 1 555 16 view .LVU74
 362 0026 12F0010F 		tst	r2, #1
 363 002a F0D0     		beq	.L21
 557:../../interpolator.c ****             }
 364              		.loc 1 557 17 is_stmt 1 view .LVU75
 557:../../interpolator.c ****             }
 365              		.loc 1 557 52 is_stmt 0 view .LVU76
 366 002c 03F11402 		add	r2, r3, #20
 367 0030 0B49     		ldr	r1, .L32
 368 0032 01EB8202 		add	r2, r1, r2, lsl #2
 369 0036 5168     		ldr	r1, [r2, #4]	@ float
 557:../../interpolator.c ****             }
 370              		.loc 1 557 27 view .LVU77
 371 0038 04AA     		add	r2, sp, #16
 372 003a 02EB8302 		add	r2, r2, r3, lsl #2
 373 003e 42F80C1C 		str	r1, [r2, #-12]	@ float
 374 0042 EAE7     		b	.L19
 375              	.L31:
 557:../../interpolator.c ****             }
 376              		.loc 1 557 27 view .LVU78
 377              	.LBE35:
 562:../../interpolator.c ****             }
 563:../../interpolator.c ****         }
 564:../../interpolator.c **** 
 565:../../interpolator.c ****         kinematics_apply_inverse((float *)&origin, (uint32_t *)&itp_rt_step_pos);
 378              		.loc 1 565 9 is_stmt 1 view .LVU79
 379 0044 0749     		ldr	r1, .L32+4
 380 0046 01A8     		add	r0, sp, #4
 381 0048 FFF7FEFF 		bl	kinematics_apply_inverse
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 18


 382              	.LVL13:
 383              		.loc 1 565 9 is_stmt 0 view .LVU80
 384              	.LBE34:
 566:../../interpolator.c ****     }
 567:../../interpolator.c ****     else
 568:../../interpolator.c ****     {
 569:../../interpolator.c ****         memset(&itp_rt_step_pos, 0, sizeof(itp_rt_step_pos));
 570:../../interpolator.c ****     }
 571:../../interpolator.c **** }
 385              		.loc 1 571 1 view .LVU81
 386 004c 05B0     		add	sp, sp, #20
 387              	.LCFI8:
 388              		.cfi_def_cfa_offset 4
 389              		@ sp needed
 390 004e 5DF804FB 		ldr	pc, [sp], #4
 391              	.L30:
 392              	.LCFI9:
 393              		.cfi_def_cfa_offset 0
 394              		.cfi_restore 14
 569:../../interpolator.c ****     }
 395              		.loc 1 569 9 is_stmt 1 view .LVU82
 396 0052 044B     		ldr	r3, .L32+4
 397 0054 0022     		movs	r2, #0
 398 0056 1A60     		str	r2, [r3]
 399 0058 5A60     		str	r2, [r3, #4]
 400 005a 9A60     		str	r2, [r3, #8]
 401 005c 7047     		bx	lr
 402              	.L33:
 403 005e 00BF     		.align	2
 404              	.L32:
 405 0060 00000000 		.word	g_settings
 406 0064 00000000 		.word	.LANCHOR12
 407              		.cfi_endproc
 408              	.LFE81:
 410              		.section	.text.itp_get_rt_feed,"ax",%progbits
 411              		.align	1
 412              		.global	itp_get_rt_feed
 413              		.syntax unified
 414              		.thumb
 415              		.thumb_func
 416              		.fpu softvfp
 418              	itp_get_rt_feed:
 419              	.LFB82:
 572:../../interpolator.c **** 
 573:../../interpolator.c **** float itp_get_rt_feed(void)
 574:../../interpolator.c **** {
 420              		.loc 1 574 1 view -0
 421              		.cfi_startproc
 422              		@ args = 0, pretend = 0, frame = 0
 423              		@ frame_needed = 0, uses_anonymous_args = 0
 424 0000 08B5     		push	{r3, lr}
 425              	.LCFI10:
 426              		.cfi_def_cfa_offset 8
 427              		.cfi_offset 3, -8
 428              		.cfi_offset 14, -4
 575:../../interpolator.c ****     float feed = 0;
 429              		.loc 1 575 5 view .LVU84
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 19


 430              	.LVL14:
 576:../../interpolator.c ****     if (!cnc_get_exec_state(EXEC_RUN))
 431              		.loc 1 576 5 view .LVU85
 432              		.loc 1 576 10 is_stmt 0 view .LVU86
 433 0002 0120     		movs	r0, #1
 434 0004 FFF7FEFF 		bl	cnc_get_exec_state
 435              	.LVL15:
 436              		.loc 1 576 8 view .LVU87
 437 0008 68B1     		cbz	r0, .L36
 577:../../interpolator.c ****     {
 578:../../interpolator.c ****         return feed;
 579:../../interpolator.c ****     }
 580:../../interpolator.c **** 
 581:../../interpolator.c ****     if (itp_sgm_data_slots != INTERPOLATOR_BUFFER_SIZE)
 438              		.loc 1 581 5 is_stmt 1 view .LVU88
 439              		.loc 1 581 28 is_stmt 0 view .LVU89
 440 000a 094B     		ldr	r3, .L39
 441 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 442 000e DBB2     		uxtb	r3, r3
 443              		.loc 1 581 8 view .LVU90
 444 0010 052B     		cmp	r3, #5
 445 0012 0AD0     		beq	.L37
 582:../../interpolator.c ****     {
 583:../../interpolator.c ****         feed = itp_sgm_data[itp_sgm_data_read].feed;
 446              		.loc 1 583 9 is_stmt 1 view .LVU91
 447              		.loc 1 583 47 is_stmt 0 view .LVU92
 448 0014 074B     		ldr	r3, .L39+4
 449 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 450              		.loc 1 583 14 view .LVU93
 451 0018 03EB8303 		add	r3, r3, r3, lsl #2
 452 001c 064A     		ldr	r2, .L39+8
 453 001e 02EB8303 		add	r3, r2, r3, lsl #2
 454 0022 D868     		ldr	r0, [r3, #12]	@ float
 455              	.LVL16:
 456              	.L34:
 584:../../interpolator.c ****     }
 585:../../interpolator.c **** 
 586:../../interpolator.c ****     return feed;
 587:../../interpolator.c **** }
 457              		.loc 1 587 1 view .LVU94
 458 0024 08BD     		pop	{r3, pc}
 459              	.LVL17:
 460              	.L36:
 578:../../interpolator.c ****     }
 461              		.loc 1 578 16 view .LVU95
 462 0026 0020     		movs	r0, #0
 463 0028 FCE7     		b	.L34
 464              	.L37:
 575:../../interpolator.c ****     if (!cnc_get_exec_state(EXEC_RUN))
 465              		.loc 1 575 11 view .LVU96
 466 002a 0020     		movs	r0, #0
 467              	.LVL18:
 575:../../interpolator.c ****     if (!cnc_get_exec_state(EXEC_RUN))
 468              		.loc 1 575 11 view .LVU97
 469 002c FAE7     		b	.L34
 470              	.L40:
 471 002e 00BF     		.align	2
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 20


 472              	.L39:
 473 0030 00000000 		.word	.LANCHOR6
 474 0034 00000000 		.word	.LANCHOR5
 475 0038 00000000 		.word	.LANCHOR7
 476              		.cfi_endproc
 477              	.LFE82:
 479              		.section	.text.itp_step_reset_isr,"ax",%progbits
 480              		.align	1
 481              		.global	itp_step_reset_isr
 482              		.syntax unified
 483              		.thumb
 484              		.thumb_func
 485              		.fpu softvfp
 487              	itp_step_reset_isr:
 488              	.LFB83:
 588:../../interpolator.c **** 
 589:../../interpolator.c **** #ifdef USE_SPINDLE
 590:../../interpolator.c **** uint16_t itp_get_rt_spindle(void)
 591:../../interpolator.c **** {
 592:../../interpolator.c **** 	float spindle = (float)itp_rt_spindle;
 593:../../interpolator.c **** 	spindle *= g_settings.spindle_max_rpm * UINT8_MAX_INV;
 594:../../interpolator.c **** 	
 595:../../interpolator.c **** 	return (uint16_t)roundf(spindle);
 596:../../interpolator.c **** }
 597:../../interpolator.c **** #endif
 598:../../interpolator.c **** 
 599:../../interpolator.c **** #ifdef ENABLE_DUAL_DRIVE_AXIS
 600:../../interpolator.c **** void itp_lock_stepper(uint8_t lockmask)
 601:../../interpolator.c **** {
 602:../../interpolator.c ****     itp_step_lock = lockmask;
 603:../../interpolator.c **** }
 604:../../interpolator.c **** #endif
 605:../../interpolator.c **** 
 606:../../interpolator.c **** #ifdef GCODE_PROCESS_LINE_NUMBERS
 607:../../interpolator.c **** uint32_t itp_get_rt_line_number(void)
 608:../../interpolator.c **** {
 609:../../interpolator.c ****     return ((itp_sgm_data[itp_sgm_data_read].block!=NULL) ? itp_sgm_data[itp_sgm_data_read].block->
 610:../../interpolator.c **** }
 611:../../interpolator.c **** #endif
 612:../../interpolator.c **** 
 613:../../interpolator.c **** //always fires after pulse
 614:../../interpolator.c **** void itp_step_reset_isr(void)
 615:../../interpolator.c **** {
 489              		.loc 1 615 1 is_stmt 1 view -0
 490              		.cfi_startproc
 491              		@ args = 0, pretend = 0, frame = 0
 492              		@ frame_needed = 0, uses_anonymous_args = 0
 493 0000 10B5     		push	{r4, lr}
 494              	.LCFI11:
 495              		.cfi_def_cfa_offset 8
 496              		.cfi_offset 4, -8
 497              		.cfi_offset 14, -4
 616:../../interpolator.c ****     //always resets all stepper pins
 617:../../interpolator.c ****     io_set_steps(g_settings.step_invert_mask);
 498              		.loc 1 617 5 view .LVU99
 499 0002 1A4B     		ldr	r3, .L49
 500 0004 9879     		ldrb	r0, [r3, #6]	@ zero_extendqisi2
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 21


 501 0006 FFF7FEFF 		bl	io_set_steps
 502              	.LVL19:
 618:../../interpolator.c ****     
 619:../../interpolator.c ****     if (itp_isr_finnished)
 503              		.loc 1 619 5 view .LVU100
 504              		.loc 1 619 9 is_stmt 0 view .LVU101
 505 000a 194B     		ldr	r3, .L49+4
 506 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 507              		.loc 1 619 8 view .LVU102
 508 000e 33BB     		cbnz	r3, .L47
 620:../../interpolator.c ****     {
 621:../../interpolator.c ****         itp_stop(); //the buffer is empty. The ISR can stop
 622:../../interpolator.c ****         return; //itp_sgm is null
 623:../../interpolator.c ****     }
 624:../../interpolator.c ****     
 625:../../interpolator.c ****     if(itp_running_sgm == NULL) //just in case it reenters
 509              		.loc 1 625 5 is_stmt 1 view .LVU103
 510              		.loc 1 625 24 is_stmt 0 view .LVU104
 511 0010 184B     		ldr	r3, .L49+8
 512 0012 1B68     		ldr	r3, [r3]
 513              		.loc 1 625 7 view .LVU105
 514 0014 13B3     		cbz	r3, .L41
 626:../../interpolator.c ****     {
 627:../../interpolator.c ****     	return;
 628:../../interpolator.c **** 	}
 629:../../interpolator.c ****     
 630:../../interpolator.c ****     //if segment needs to update the step ISR (after preloading first step byte
 631:../../interpolator.c ****     if(itp_running_sgm->update_speed)
 515              		.loc 1 631 5 is_stmt 1 view .LVU106
 516              		.loc 1 631 23 is_stmt 0 view .LVU107
 517 0016 1A7C     		ldrb	r2, [r3, #16]	@ zero_extendqisi2
 518              		.loc 1 631 7 view .LVU108
 519 0018 6AB1     		cbz	r2, .L44
 632:../../interpolator.c **** 	{
 633:../../interpolator.c **** 		//set dir bits
 634:../../interpolator.c **** 		if(itp_running_sgm->block != NULL)
 520              		.loc 1 634 3 is_stmt 1 view .LVU109
 521              		.loc 1 634 21 is_stmt 0 view .LVU110
 522 001a 1B68     		ldr	r3, [r3]
 523              		.loc 1 634 5 view .LVU111
 524 001c 13B1     		cbz	r3, .L45
 635:../../interpolator.c **** 		{
 636:../../interpolator.c **** 			io_set_dirs(itp_running_sgm->block->dirbits);
 525              		.loc 1 636 4 is_stmt 1 view .LVU112
 526 001e 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 527 0020 FFF7FEFF 		bl	io_set_dirs
 528              	.LVL20:
 529              	.L45:
 637:../../interpolator.c **** 		}
 638:../../interpolator.c **** 		
 639:../../interpolator.c **** 		mcu_change_step_ISR(itp_running_sgm->clocks_per_tick, itp_running_sgm->ticks_per_step);
 530              		.loc 1 639 3 view .LVU113
 531              		.loc 1 639 38 is_stmt 0 view .LVU114
 532 0024 134C     		ldr	r4, .L49+8
 533 0026 2368     		ldr	r3, [r4]
 534              		.loc 1 639 3 view .LVU115
 535 0028 997A     		ldrb	r1, [r3, #10]	@ zero_extendqisi2
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 22


 536 002a 1889     		ldrh	r0, [r3, #8]
 537 002c FFF7FEFF 		bl	mcu_change_step_ISR
 538              	.LVL21:
 640:../../interpolator.c **** 		#ifdef USE_SPINDLE
 641:../../interpolator.c **** 		mcu_set_pwm(SPINDLE_PWM, itp_running_sgm->spindle);
 642:../../interpolator.c **** 		if(!itp_running_sgm->spindle_inv)
 643:../../interpolator.c **** 		{
 644:../../interpolator.c **** 			mcu_clear_output(SPINDLE_DIR);
 645:../../interpolator.c **** 		}
 646:../../interpolator.c **** 		else
 647:../../interpolator.c **** 		{
 648:../../interpolator.c **** 			mcu_set_output(SPINDLE_DIR);
 649:../../interpolator.c **** 		}
 650:../../interpolator.c **** 		
 651:../../interpolator.c **** 		itp_rt_spindle = itp_running_sgm->spindle;
 652:../../interpolator.c **** 		#endif
 653:../../interpolator.c **** 		itp_running_sgm->update_speed = false;
 539              		.loc 1 653 3 is_stmt 1 view .LVU116
 540              		.loc 1 653 18 is_stmt 0 view .LVU117
 541 0030 2368     		ldr	r3, [r4]
 542              		.loc 1 653 33 view .LVU118
 543 0032 0022     		movs	r2, #0
 544 0034 1A74     		strb	r2, [r3, #16]
 545              	.L44:
 654:../../interpolator.c **** 	}
 655:../../interpolator.c **** 	
 656:../../interpolator.c ****     //one step remaining discards current segment
 657:../../interpolator.c ****     if (itp_running_sgm->remaining_steps == 0)
 546              		.loc 1 657 5 is_stmt 1 view .LVU119
 547              		.loc 1 657 24 is_stmt 0 view .LVU120
 548 0036 0F4B     		ldr	r3, .L49+8
 549 0038 1B68     		ldr	r3, [r3]
 550 003a DB88     		ldrh	r3, [r3, #6]
 551              		.loc 1 657 8 view .LVU121
 552 003c 73B9     		cbnz	r3, .L41
 658:../../interpolator.c ****     {
 659:../../interpolator.c ****         itp_running_sgm = NULL;
 553              		.loc 1 659 9 is_stmt 1 view .LVU122
 554              		.loc 1 659 25 is_stmt 0 view .LVU123
 555 003e 0D4B     		ldr	r3, .L49+8
 556 0040 0022     		movs	r2, #0
 557 0042 1A60     		str	r2, [r3]
 660:../../interpolator.c ****         itp_sgm_buffer_read();
 558              		.loc 1 660 9 is_stmt 1 view .LVU124
 559              	.LBB36:
 560              	.LBI36:
 109:../../interpolator.c **** {
 561              		.loc 1 109 20 view .LVU125
 562              	.LBB37:
 111:../../interpolator.c ****     if (++itp_sgm_data_read == INTERPOLATOR_BUFFER_SIZE)
 563              		.loc 1 111 5 view .LVU126
 111:../../interpolator.c ****     if (++itp_sgm_data_read == INTERPOLATOR_BUFFER_SIZE)
 564              		.loc 1 111 23 is_stmt 0 view .LVU127
 565 0044 0C4A     		ldr	r2, .L49+12
 566 0046 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 567 0048 0133     		adds	r3, r3, #1
 568 004a DBB2     		uxtb	r3, r3
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 23


 569 004c 1370     		strb	r3, [r2]
 112:../../interpolator.c ****     {
 570              		.loc 1 112 5 is_stmt 1 view .LVU128
 112:../../interpolator.c ****     {
 571              		.loc 1 112 9 is_stmt 0 view .LVU129
 572 004e 0B4A     		ldr	r2, .L49+16
 573 0050 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 574 0052 0133     		adds	r3, r3, #1
 575 0054 DBB2     		uxtb	r3, r3
 112:../../interpolator.c ****     {
 576              		.loc 1 112 8 view .LVU130
 577 0056 1370     		strb	r3, [r2]
 578 0058 052B     		cmp	r3, #5
 579 005a 03D0     		beq	.L48
 580              	.L41:
 581              	.LBE37:
 582              	.LBE36:
 661:../../interpolator.c ****     }
 662:../../interpolator.c **** }
 583              		.loc 1 662 1 view .LVU131
 584 005c 10BD     		pop	{r4, pc}
 585              	.L47:
 621:../../interpolator.c ****         return; //itp_sgm is null
 586              		.loc 1 621 9 is_stmt 1 view .LVU132
 587 005e FFF7FEFF 		bl	itp_stop
 588              	.LVL22:
 622:../../interpolator.c ****     }
 589              		.loc 1 622 9 view .LVU133
 590 0062 FBE7     		b	.L41
 591              	.L48:
 592              	.LBB39:
 593              	.LBB38:
 114:../../interpolator.c ****     }
 594              		.loc 1 114 9 view .LVU134
 114:../../interpolator.c ****     }
 595              		.loc 1 114 27 is_stmt 0 view .LVU135
 596 0064 1346     		mov	r3, r2
 597 0066 0022     		movs	r2, #0
 598 0068 1A70     		strb	r2, [r3]
 599 006a F7E7     		b	.L41
 600              	.L50:
 601              		.align	2
 602              	.L49:
 603 006c 00000000 		.word	g_settings
 604 0070 00000000 		.word	.LANCHOR1
 605 0074 00000000 		.word	.LANCHOR10
 606 0078 00000000 		.word	.LANCHOR6
 607 007c 00000000 		.word	.LANCHOR5
 608              	.LBE38:
 609              	.LBE39:
 610              		.cfi_endproc
 611              	.LFE83:
 613              		.section	.text.itp_step_isr,"ax",%progbits
 614              		.align	1
 615              		.global	itp_step_isr
 616              		.syntax unified
 617              		.thumb
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 24


 618              		.thumb_func
 619              		.fpu softvfp
 621              	itp_step_isr:
 622              	.LFB84:
 663:../../interpolator.c **** 
 664:../../interpolator.c **** void itp_step_isr(void)
 665:../../interpolator.c **** {
 623              		.loc 1 665 1 is_stmt 1 view -0
 624              		.cfi_startproc
 625              		@ args = 0, pretend = 0, frame = 0
 626              		@ frame_needed = 0, uses_anonymous_args = 0
 666:../../interpolator.c ****     static uint8_t stepbits = 0;
 627              		.loc 1 666 5 view .LVU137
 667:../../interpolator.c ****     if(itp_busy) //prevents reentrancy
 628              		.loc 1 667 5 view .LVU138
 629              		.loc 1 667 8 is_stmt 0 view .LVU139
 630 0000 4C4B     		ldr	r3, .L68
 631 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 632              		.loc 1 667 7 view .LVU140
 633 0004 03B1     		cbz	r3, .L65
 634 0006 7047     		bx	lr
 635              	.L65:
 665:../../interpolator.c ****     static uint8_t stepbits = 0;
 636              		.loc 1 665 1 view .LVU141
 637 0008 10B5     		push	{r4, lr}
 638              	.LCFI12:
 639              		.cfi_def_cfa_offset 8
 640              		.cfi_offset 4, -8
 641              		.cfi_offset 14, -4
 668:../../interpolator.c ****     {
 669:../../interpolator.c ****     	return;
 670:../../interpolator.c ****     }
 671:../../interpolator.c **** 
 672:../../interpolator.c ****     //sets step bits
 673:../../interpolator.c ****     io_toggle_steps(stepbits);
 642              		.loc 1 673 5 is_stmt 1 view .LVU142
 643 000a 4B4C     		ldr	r4, .L68+4
 644 000c 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 645 000e FFF7FEFF 		bl	io_toggle_steps
 646              	.LVL23:
 674:../../interpolator.c ****     stepbits = 0;
 647              		.loc 1 674 5 view .LVU143
 648              		.loc 1 674 14 is_stmt 0 view .LVU144
 649 0012 0023     		movs	r3, #0
 650 0014 2370     		strb	r3, [r4]
 675:../../interpolator.c **** 
 676:../../interpolator.c ****     itp_busy = true;
 651              		.loc 1 676 5 is_stmt 1 view .LVU145
 652              		.loc 1 676 14 is_stmt 0 view .LVU146
 653 0016 474B     		ldr	r3, .L68
 654 0018 0122     		movs	r2, #1
 655 001a 1A70     		strb	r2, [r3]
 677:../../interpolator.c ****     mcu_enable_interrupts();
 656              		.loc 1 677 5 is_stmt 1 view .LVU147
 657 001c FFF7FEFF 		bl	mcu_enable_interrupts
 658              	.LVL24:
 678:../../interpolator.c ****     
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 25


 679:../../interpolator.c ****     //if buffer empty loads one
 680:../../interpolator.c ****     if (itp_running_sgm == NULL)
 659              		.loc 1 680 5 view .LVU148
 660              		.loc 1 680 25 is_stmt 0 view .LVU149
 661 0020 464B     		ldr	r3, .L68+8
 662 0022 1B68     		ldr	r3, [r3]
 663              		.loc 1 680 8 view .LVU150
 664 0024 002B     		cmp	r3, #0
 665 0026 5CD0     		beq	.L66
 666              	.L53:
 681:../../interpolator.c ****     {
 682:../../interpolator.c ****         //if buffer is not empty
 683:../../interpolator.c ****         if (itp_sgm_data_slots < INTERPOLATOR_BUFFER_SIZE)
 684:../../interpolator.c ****         {
 685:../../interpolator.c ****             //loads a new segment
 686:../../interpolator.c ****             itp_running_sgm = &itp_sgm_data[itp_sgm_data_read];
 687:../../interpolator.c ****             cnc_set_exec_state(EXEC_RUN);
 688:../../interpolator.c ****             itp_isr_finnished = false;
 689:../../interpolator.c ****         }
 690:../../interpolator.c ****         else
 691:../../interpolator.c ****         {
 692:../../interpolator.c ****         	itp_isr_finnished = true;
 693:../../interpolator.c ****         }
 694:../../interpolator.c ****     }
 695:../../interpolator.c ****     
 696:../../interpolator.c **** 	//is steps remaining starts calc next step bits
 697:../../interpolator.c ****     if (itp_running_sgm != NULL)
 667              		.loc 1 697 5 is_stmt 1 view .LVU151
 668              		.loc 1 697 25 is_stmt 0 view .LVU152
 669 0028 444B     		ldr	r3, .L68+8
 670 002a 1B68     		ldr	r3, [r3]
 671              		.loc 1 697 8 view .LVU153
 672 002c 002B     		cmp	r3, #0
 673 002e 52D0     		beq	.L55
 698:../../interpolator.c ****     {
 699:../../interpolator.c ****         itp_running_sgm->remaining_steps--;
 674              		.loc 1 699 9 is_stmt 1 view .LVU154
 675              		.loc 1 699 24 is_stmt 0 view .LVU155
 676 0030 DA88     		ldrh	r2, [r3, #6]
 677              		.loc 1 699 41 view .LVU156
 678 0032 013A     		subs	r2, r2, #1
 679 0034 DA80     		strh	r2, [r3, #6]	@ movhi
 700:../../interpolator.c ****         if(itp_running_sgm->block!=NULL)
 680              		.loc 1 700 9 is_stmt 1 view .LVU157
 681              		.loc 1 700 27 is_stmt 0 view .LVU158
 682 0036 1A68     		ldr	r2, [r3]
 683              		.loc 1 700 11 view .LVU159
 684 0038 002A     		cmp	r2, #0
 685 003a 4CD0     		beq	.L55
 701:../../interpolator.c ****         {
 702:../../interpolator.c **** //prepares the next step bits mask
 703:../../interpolator.c **** #ifdef STEP0
 704:../../interpolator.c ****             itp_running_sgm->block->errors[0] += itp_running_sgm->block->steps[0];
 686              		.loc 1 704 13 is_stmt 1 view .LVU160
 687              		.loc 1 704 79 is_stmt 0 view .LVU161
 688 003c 5068     		ldr	r0, [r2, #4]
 689              		.loc 1 704 47 view .LVU162
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 26


 690 003e 5169     		ldr	r1, [r2, #20]
 691 0040 0144     		add	r1, r1, r0
 692 0042 5161     		str	r1, [r2, #20]
 705:../../interpolator.c ****             if (itp_running_sgm->block->errors[0] > itp_running_sgm->block->totalsteps)
 693              		.loc 1 705 13 is_stmt 1 view .LVU163
 694              		.loc 1 705 32 is_stmt 0 view .LVU164
 695 0044 1A68     		ldr	r2, [r3]
 696              		.loc 1 705 47 view .LVU165
 697 0046 5169     		ldr	r1, [r2, #20]
 698              		.loc 1 705 75 view .LVU166
 699 0048 1069     		ldr	r0, [r2, #16]
 700              		.loc 1 705 16 view .LVU167
 701 004a 8142     		cmp	r1, r0
 702 004c 0FD9     		bls	.L56
 706:../../interpolator.c ****             {
 707:../../interpolator.c ****                 itp_running_sgm->block->errors[0] -= itp_running_sgm->block->totalsteps;
 703              		.loc 1 707 17 is_stmt 1 view .LVU168
 704              		.loc 1 707 51 is_stmt 0 view .LVU169
 705 004e 091A     		subs	r1, r1, r0
 706 0050 5161     		str	r1, [r2, #20]
 708:../../interpolator.c ****                 stepbits |= STEP0_ITP_MASK;
 707              		.loc 1 708 17 is_stmt 1 view .LVU170
 708              		.loc 1 708 26 is_stmt 0 view .LVU171
 709 0052 3949     		ldr	r1, .L68+4
 710 0054 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 711 0056 42F00102 		orr	r2, r2, #1
 712 005a 0A70     		strb	r2, [r1]
 709:../../interpolator.c ****                 if (itp_running_sgm->block->dirbits & DIR0_MASK)
 713              		.loc 1 709 17 is_stmt 1 view .LVU172
 714              		.loc 1 709 36 is_stmt 0 view .LVU173
 715 005c 1A68     		ldr	r2, [r3]
 716              		.loc 1 709 43 view .LVU174
 717 005e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 718              		.loc 1 709 20 view .LVU175
 719 0060 12F0010F 		tst	r2, #1
 720 0064 56D0     		beq	.L57
 710:../../interpolator.c ****                 {
 711:../../interpolator.c ****                     itp_rt_step_pos[0]--;
 721              		.loc 1 711 21 is_stmt 1 view .LVU176
 722              		.loc 1 711 36 is_stmt 0 view .LVU177
 723 0066 3649     		ldr	r1, .L68+12
 724 0068 0A68     		ldr	r2, [r1]
 725              		.loc 1 711 39 view .LVU178
 726 006a 013A     		subs	r2, r2, #1
 727 006c 0A60     		str	r2, [r1]
 728              	.L56:
 712:../../interpolator.c ****                 }
 713:../../interpolator.c ****                 else
 714:../../interpolator.c ****                 {
 715:../../interpolator.c ****                     itp_rt_step_pos[0]++;
 716:../../interpolator.c ****                 }
 717:../../interpolator.c ****             }
 718:../../interpolator.c **** #endif
 719:../../interpolator.c **** #ifdef STEP1
 720:../../interpolator.c ****             itp_running_sgm->block->errors[1] += itp_running_sgm->block->steps[1];
 729              		.loc 1 720 13 is_stmt 1 view .LVU179
 730              		.loc 1 720 28 is_stmt 0 view .LVU180
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 27


 731 006e 1A68     		ldr	r2, [r3]
 732              		.loc 1 720 79 view .LVU181
 733 0070 9068     		ldr	r0, [r2, #8]
 734              		.loc 1 720 47 view .LVU182
 735 0072 9169     		ldr	r1, [r2, #24]
 736 0074 0144     		add	r1, r1, r0
 737 0076 9161     		str	r1, [r2, #24]
 721:../../interpolator.c ****             if (itp_running_sgm->block->errors[1] > itp_running_sgm->block->totalsteps)
 738              		.loc 1 721 13 is_stmt 1 view .LVU183
 739              		.loc 1 721 32 is_stmt 0 view .LVU184
 740 0078 1A68     		ldr	r2, [r3]
 741              		.loc 1 721 47 view .LVU185
 742 007a 9169     		ldr	r1, [r2, #24]
 743              		.loc 1 721 75 view .LVU186
 744 007c 1069     		ldr	r0, [r2, #16]
 745              		.loc 1 721 16 view .LVU187
 746 007e 8142     		cmp	r1, r0
 747 0080 0FD9     		bls	.L58
 722:../../interpolator.c ****             {
 723:../../interpolator.c ****                 itp_running_sgm->block->errors[1] -= itp_running_sgm->block->totalsteps;
 748              		.loc 1 723 17 is_stmt 1 view .LVU188
 749              		.loc 1 723 51 is_stmt 0 view .LVU189
 750 0082 091A     		subs	r1, r1, r0
 751 0084 9161     		str	r1, [r2, #24]
 724:../../interpolator.c ****                 stepbits |= STEP1_ITP_MASK;
 752              		.loc 1 724 17 is_stmt 1 view .LVU190
 753              		.loc 1 724 26 is_stmt 0 view .LVU191
 754 0086 2C49     		ldr	r1, .L68+4
 755 0088 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 756 008a 42F00202 		orr	r2, r2, #2
 757 008e 0A70     		strb	r2, [r1]
 725:../../interpolator.c ****                 if (itp_running_sgm->block->dirbits & DIR1_MASK)
 758              		.loc 1 725 17 is_stmt 1 view .LVU192
 759              		.loc 1 725 36 is_stmt 0 view .LVU193
 760 0090 1A68     		ldr	r2, [r3]
 761              		.loc 1 725 43 view .LVU194
 762 0092 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 763              		.loc 1 725 20 view .LVU195
 764 0094 12F0020F 		tst	r2, #2
 765 0098 41D0     		beq	.L59
 726:../../interpolator.c ****                 {
 727:../../interpolator.c ****                     itp_rt_step_pos[1]--;
 766              		.loc 1 727 21 is_stmt 1 view .LVU196
 767              		.loc 1 727 36 is_stmt 0 view .LVU197
 768 009a 2949     		ldr	r1, .L68+12
 769 009c 4A68     		ldr	r2, [r1, #4]
 770              		.loc 1 727 39 view .LVU198
 771 009e 013A     		subs	r2, r2, #1
 772 00a0 4A60     		str	r2, [r1, #4]
 773              	.L58:
 728:../../interpolator.c ****                 }
 729:../../interpolator.c ****                 else
 730:../../interpolator.c ****                 {
 731:../../interpolator.c ****                     itp_rt_step_pos[1]++;
 732:../../interpolator.c ****                 }
 733:../../interpolator.c ****             }
 734:../../interpolator.c **** #endif
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 28


 735:../../interpolator.c **** #ifdef STEP2
 736:../../interpolator.c ****             itp_running_sgm->block->errors[2] += itp_running_sgm->block->steps[2];
 774              		.loc 1 736 13 is_stmt 1 view .LVU199
 775              		.loc 1 736 28 is_stmt 0 view .LVU200
 776 00a2 1A68     		ldr	r2, [r3]
 777              		.loc 1 736 79 view .LVU201
 778 00a4 D068     		ldr	r0, [r2, #12]
 779              		.loc 1 736 47 view .LVU202
 780 00a6 D169     		ldr	r1, [r2, #28]
 781 00a8 0144     		add	r1, r1, r0
 782 00aa D161     		str	r1, [r2, #28]
 737:../../interpolator.c ****             if (itp_running_sgm->block->errors[2] > itp_running_sgm->block->totalsteps)
 783              		.loc 1 737 13 is_stmt 1 view .LVU203
 784              		.loc 1 737 32 is_stmt 0 view .LVU204
 785 00ac 1A68     		ldr	r2, [r3]
 786              		.loc 1 737 47 view .LVU205
 787 00ae D169     		ldr	r1, [r2, #28]
 788              		.loc 1 737 75 view .LVU206
 789 00b0 1069     		ldr	r0, [r2, #16]
 790              		.loc 1 737 16 view .LVU207
 791 00b2 8142     		cmp	r1, r0
 792 00b4 0FD9     		bls	.L55
 738:../../interpolator.c ****             {
 739:../../interpolator.c ****                 itp_running_sgm->block->errors[2] -= itp_running_sgm->block->totalsteps;
 793              		.loc 1 739 17 is_stmt 1 view .LVU208
 794              		.loc 1 739 51 is_stmt 0 view .LVU209
 795 00b6 091A     		subs	r1, r1, r0
 796 00b8 D161     		str	r1, [r2, #28]
 740:../../interpolator.c ****                 stepbits |= STEP2_ITP_MASK;
 797              		.loc 1 740 17 is_stmt 1 view .LVU210
 798              		.loc 1 740 26 is_stmt 0 view .LVU211
 799 00ba 1F49     		ldr	r1, .L68+4
 800 00bc 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 801 00be 42F00402 		orr	r2, r2, #4
 802 00c2 0A70     		strb	r2, [r1]
 741:../../interpolator.c ****                 if (itp_running_sgm->block->dirbits & DIR2_MASK)
 803              		.loc 1 741 17 is_stmt 1 view .LVU212
 804              		.loc 1 741 36 is_stmt 0 view .LVU213
 805 00c4 1B68     		ldr	r3, [r3]
 806              		.loc 1 741 43 view .LVU214
 807 00c6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 808              		.loc 1 741 20 view .LVU215
 809 00c8 13F0040F 		tst	r3, #4
 810 00cc 2CD0     		beq	.L60
 742:../../interpolator.c ****                 {
 743:../../interpolator.c ****                     itp_rt_step_pos[2]--;
 811              		.loc 1 743 21 is_stmt 1 view .LVU216
 812              		.loc 1 743 36 is_stmt 0 view .LVU217
 813 00ce 1C4A     		ldr	r2, .L68+12
 814 00d0 9368     		ldr	r3, [r2, #8]
 815              		.loc 1 743 39 view .LVU218
 816 00d2 013B     		subs	r3, r3, #1
 817 00d4 9360     		str	r3, [r2, #8]
 818              	.L55:
 744:../../interpolator.c ****                 }
 745:../../interpolator.c ****                 else
 746:../../interpolator.c ****                 {
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 29


 747:../../interpolator.c ****                     itp_rt_step_pos[2]++;
 748:../../interpolator.c ****                 }
 749:../../interpolator.c ****             }
 750:../../interpolator.c **** #endif
 751:../../interpolator.c **** #ifdef STEP3
 752:../../interpolator.c ****             itp_running_sgm->block->errors[3] += itp_running_sgm->block->steps[3];
 753:../../interpolator.c ****             if (itp_running_sgm->block->errors[3] > itp_running_sgm->block->totalsteps)
 754:../../interpolator.c ****             {
 755:../../interpolator.c ****                 itp_running_sgm->block->errors[3] -= itp_running_sgm->block->totalsteps;
 756:../../interpolator.c ****                 stepbits |= STEP3_ITP_MASK;
 757:../../interpolator.c ****                 if (itp_running_sgm->block->dirbits & DIR3_MASK)
 758:../../interpolator.c ****                 {
 759:../../interpolator.c ****                     itp_rt_step_pos[3]--;
 760:../../interpolator.c ****                 }
 761:../../interpolator.c ****                 else
 762:../../interpolator.c ****                 {
 763:../../interpolator.c ****                     itp_rt_step_pos[3]++;
 764:../../interpolator.c ****                 }
 765:../../interpolator.c ****             }
 766:../../interpolator.c **** #endif
 767:../../interpolator.c **** #ifdef STEP4
 768:../../interpolator.c ****             itp_running_sgm->block->errors[4] += itp_running_sgm->block->steps[4];
 769:../../interpolator.c ****             if (itp_running_sgm->block->errors[4] > itp_running_sgm->block->totalsteps)
 770:../../interpolator.c ****             {
 771:../../interpolator.c ****                 itp_running_sgm->block->errors[4] -= itp_running_sgm->block->totalsteps;
 772:../../interpolator.c ****                 stepbits |= STEP4_ITP_MASK;
 773:../../interpolator.c ****                 if (itp_running_sgm->block->dirbits & DIR4_MASK)
 774:../../interpolator.c ****                 {
 775:../../interpolator.c ****                     itp_rt_step_pos[4]--;
 776:../../interpolator.c ****                 }
 777:../../interpolator.c ****                 else
 778:../../interpolator.c ****                 {
 779:../../interpolator.c ****                     itp_rt_step_pos[4]++;
 780:../../interpolator.c ****                 }
 781:../../interpolator.c ****             }
 782:../../interpolator.c **** #endif
 783:../../interpolator.c **** #ifdef STEP5
 784:../../interpolator.c ****             itp_running_sgm->block->errors[5] += itp_running_sgm->block->steps[5];
 785:../../interpolator.c ****             if (itp_running_sgm->block->errors[5] > itp_running_sgm->block->totalsteps)
 786:../../interpolator.c ****             {
 787:../../interpolator.c ****                 itp_running_sgm->block->errors[5] -= itp_running_sgm->block->totalsteps;
 788:../../interpolator.c ****                 stepbits |= STEP5_ITP_MASK;
 789:../../interpolator.c ****                 if (itp_running_sgm->block->dirbits & DIR5_MASK)
 790:../../interpolator.c ****                 {
 791:../../interpolator.c ****                     itp_rt_step_pos[5]--;
 792:../../interpolator.c ****                 }
 793:../../interpolator.c ****                 else
 794:../../interpolator.c ****                 {
 795:../../interpolator.c ****                     itp_rt_step_pos[5]++;
 796:../../interpolator.c ****                 }
 797:../../interpolator.c ****             }
 798:../../interpolator.c **** #endif
 799:../../interpolator.c ****         }
 800:../../interpolator.c **** 
 801:../../interpolator.c ****     }
 802:../../interpolator.c **** 
 803:../../interpolator.c **** 	#ifdef ENABLE_DUAL_DRIVE_AXIS
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 30


 804:../../interpolator.c **** 	stepbits &= ~itp_step_lock;
 805:../../interpolator.c **** 	#endif
 806:../../interpolator.c **** 	mcu_disable_interrupts();//lock isr before clearin busy flag
 819              		.loc 1 806 2 is_stmt 1 view .LVU219
 820 00d6 FFF7FEFF 		bl	mcu_disable_interrupts
 821              	.LVL25:
 807:../../interpolator.c ****     itp_busy = false;
 822              		.loc 1 807 5 view .LVU220
 823              		.loc 1 807 14 is_stmt 0 view .LVU221
 824 00da 164B     		ldr	r3, .L68
 825 00dc 0022     		movs	r2, #0
 826 00de 1A70     		strb	r2, [r3]
 808:../../interpolator.c **** }
 827              		.loc 1 808 1 view .LVU222
 828 00e0 10BD     		pop	{r4, pc}
 829              	.L66:
 683:../../interpolator.c ****         {
 830              		.loc 1 683 9 is_stmt 1 view .LVU223
 683:../../interpolator.c ****         {
 831              		.loc 1 683 32 is_stmt 0 view .LVU224
 832 00e2 184B     		ldr	r3, .L68+16
 833 00e4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 834 00e6 DBB2     		uxtb	r3, r3
 683:../../interpolator.c ****         {
 835              		.loc 1 683 12 view .LVU225
 836 00e8 042B     		cmp	r3, #4
 837 00ea 03D9     		bls	.L67
 692:../../interpolator.c ****         }
 838              		.loc 1 692 10 is_stmt 1 view .LVU226
 692:../../interpolator.c ****         }
 839              		.loc 1 692 28 is_stmt 0 view .LVU227
 840 00ec 164B     		ldr	r3, .L68+20
 841 00ee 0122     		movs	r2, #1
 842 00f0 1A70     		strb	r2, [r3]
 843 00f2 99E7     		b	.L53
 844              	.L67:
 686:../../interpolator.c ****             cnc_set_exec_state(EXEC_RUN);
 845              		.loc 1 686 13 is_stmt 1 view .LVU228
 686:../../interpolator.c ****             cnc_set_exec_state(EXEC_RUN);
 846              		.loc 1 686 44 is_stmt 0 view .LVU229
 847 00f4 154B     		ldr	r3, .L68+24
 848 00f6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 686:../../interpolator.c ****             cnc_set_exec_state(EXEC_RUN);
 849              		.loc 1 686 31 view .LVU230
 850 00f8 03EB8303 		add	r3, r3, r3, lsl #2
 851 00fc 9A00     		lsls	r2, r3, #2
 852 00fe 144B     		ldr	r3, .L68+28
 853 0100 1344     		add	r3, r3, r2
 686:../../interpolator.c ****             cnc_set_exec_state(EXEC_RUN);
 854              		.loc 1 686 29 view .LVU231
 855 0102 0E4A     		ldr	r2, .L68+8
 856 0104 1360     		str	r3, [r2]
 687:../../interpolator.c ****             itp_isr_finnished = false;
 857              		.loc 1 687 13 is_stmt 1 view .LVU232
 858 0106 0120     		movs	r0, #1
 859 0108 FFF7FEFF 		bl	cnc_set_exec_state
 860              	.LVL26:
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 31


 688:../../interpolator.c ****         }
 861              		.loc 1 688 13 view .LVU233
 688:../../interpolator.c ****         }
 862              		.loc 1 688 31 is_stmt 0 view .LVU234
 863 010c 0E4B     		ldr	r3, .L68+20
 864 010e 0022     		movs	r2, #0
 865 0110 1A70     		strb	r2, [r3]
 866 0112 89E7     		b	.L53
 867              	.L57:
 715:../../interpolator.c ****                 }
 868              		.loc 1 715 21 is_stmt 1 view .LVU235
 715:../../interpolator.c ****                 }
 869              		.loc 1 715 36 is_stmt 0 view .LVU236
 870 0114 0A49     		ldr	r1, .L68+12
 871 0116 0A68     		ldr	r2, [r1]
 715:../../interpolator.c ****                 }
 872              		.loc 1 715 39 view .LVU237
 873 0118 0132     		adds	r2, r2, #1
 874 011a 0A60     		str	r2, [r1]
 875 011c A7E7     		b	.L56
 876              	.L59:
 731:../../interpolator.c ****                 }
 877              		.loc 1 731 21 is_stmt 1 view .LVU238
 731:../../interpolator.c ****                 }
 878              		.loc 1 731 36 is_stmt 0 view .LVU239
 879 011e 0849     		ldr	r1, .L68+12
 880 0120 4A68     		ldr	r2, [r1, #4]
 731:../../interpolator.c ****                 }
 881              		.loc 1 731 39 view .LVU240
 882 0122 0132     		adds	r2, r2, #1
 883 0124 4A60     		str	r2, [r1, #4]
 884 0126 BCE7     		b	.L58
 885              	.L60:
 747:../../interpolator.c ****                 }
 886              		.loc 1 747 21 is_stmt 1 view .LVU241
 747:../../interpolator.c ****                 }
 887              		.loc 1 747 36 is_stmt 0 view .LVU242
 888 0128 054A     		ldr	r2, .L68+12
 889 012a 9368     		ldr	r3, [r2, #8]
 747:../../interpolator.c ****                 }
 890              		.loc 1 747 39 view .LVU243
 891 012c 0133     		adds	r3, r3, #1
 892 012e 9360     		str	r3, [r2, #8]
 893 0130 D1E7     		b	.L55
 894              	.L69:
 895 0132 00BF     		.align	2
 896              	.L68:
 897 0134 00000000 		.word	.LANCHOR0
 898 0138 00000000 		.word	.LANCHOR13
 899 013c 00000000 		.word	.LANCHOR10
 900 0140 00000000 		.word	.LANCHOR12
 901 0144 00000000 		.word	.LANCHOR6
 902 0148 00000000 		.word	.LANCHOR1
 903 014c 00000000 		.word	.LANCHOR5
 904 0150 00000000 		.word	.LANCHOR7
 905              		.cfi_endproc
 906              	.LFE84:
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 32


 908              		.section	.text.itp_delay,"ax",%progbits
 909              		.align	1
 910              		.global	itp_delay
 911              		.syntax unified
 912              		.thumb
 913              		.thumb_func
 914              		.fpu softvfp
 916              	itp_delay:
 917              	.LVL27:
 918              	.LFB85:
 809:../../interpolator.c **** 
 810:../../interpolator.c **** void itp_delay(uint16_t delay)
 811:../../interpolator.c **** {
 919              		.loc 1 811 1 is_stmt 1 view -0
 920              		.cfi_startproc
 921              		@ args = 0, pretend = 0, frame = 0
 922              		@ frame_needed = 0, uses_anonymous_args = 0
 923              		.loc 1 811 1 is_stmt 0 view .LVU245
 924 0000 70B5     		push	{r4, r5, r6, lr}
 925              	.LCFI13:
 926              		.cfi_def_cfa_offset 16
 927              		.cfi_offset 4, -16
 928              		.cfi_offset 5, -12
 929              		.cfi_offset 6, -8
 930              		.cfi_offset 14, -4
 931 0002 0646     		mov	r6, r0
 812:../../interpolator.c ****     itp_sgm_data[itp_sgm_data_write].block = NULL;
 932              		.loc 1 812 5 is_stmt 1 view .LVU246
 933              		.loc 1 812 37 is_stmt 0 view .LVU247
 934 0004 1D4C     		ldr	r4, .L74
 935 0006 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 936              		.loc 1 812 44 view .LVU248
 937 0008 1D4D     		ldr	r5, .L74+4
 938 000a 03EB8303 		add	r3, r3, r3, lsl #2
 939 000e 9B00     		lsls	r3, r3, #2
 940 0010 0022     		movs	r2, #0
 941 0012 EA50     		str	r2, [r5, r3]
 813:../../interpolator.c ****     //clicks every 100ms (10Hz)
 814:../../interpolator.c ****     mcu_freq_to_clocks(10, &(itp_sgm_data[itp_sgm_data_write].clocks_per_tick), &(itp_sgm_data[itp_
 942              		.loc 1 814 5 is_stmt 1 view .LVU249
 943              		.loc 1 814 62 is_stmt 0 view .LVU250
 944 0014 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 945              		.loc 1 814 115 view .LVU251
 946 0016 2278     		ldrb	r2, [r4]	@ zero_extendqisi2
 947              		.loc 1 814 5 view .LVU252
 948 0018 02EB8202 		add	r2, r2, r2, lsl #2
 949 001c 9200     		lsls	r2, r2, #2
 950 001e 0832     		adds	r2, r2, #8
 951 0020 2A44     		add	r2, r2, r5
 952 0022 01EB8101 		add	r1, r1, r1, lsl #2
 953 0026 8900     		lsls	r1, r1, #2
 954 0028 0831     		adds	r1, r1, #8
 955 002a 0232     		adds	r2, r2, #2
 956 002c 2944     		add	r1, r1, r5
 957 002e 1548     		ldr	r0, .L74+8
 958              	.LVL28:
 959              		.loc 1 814 5 view .LVU253
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 33


 960 0030 FFF7FEFF 		bl	mcu_freq_to_clocks
 961              	.LVL29:
 815:../../interpolator.c ****     itp_sgm_data[itp_sgm_data_write].remaining_steps = delay;
 962              		.loc 1 815 5 is_stmt 1 view .LVU254
 963              		.loc 1 815 37 is_stmt 0 view .LVU255
 964 0034 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 965              		.loc 1 815 54 view .LVU256
 966 0036 03EB8303 		add	r3, r3, r3, lsl #2
 967 003a 05EB8303 		add	r3, r5, r3, lsl #2
 968 003e DE80     		strh	r6, [r3, #6]	@ movhi
 816:../../interpolator.c ****     itp_sgm_data[itp_sgm_data_write].update_speed = true;
 969              		.loc 1 816 5 is_stmt 1 view .LVU257
 970              		.loc 1 816 37 is_stmt 0 view .LVU258
 971 0040 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 972              		.loc 1 816 51 view .LVU259
 973 0042 03EB8303 		add	r3, r3, r3, lsl #2
 974 0046 05EB8303 		add	r3, r5, r3, lsl #2
 975 004a 0122     		movs	r2, #1
 976 004c 1A74     		strb	r2, [r3, #16]
 817:../../interpolator.c ****     itp_sgm_data[itp_sgm_data_write].feed = 0;
 977              		.loc 1 817 5 is_stmt 1 view .LVU260
 978              		.loc 1 817 37 is_stmt 0 view .LVU261
 979 004e 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 980              		.loc 1 817 43 view .LVU262
 981 0050 03EB8303 		add	r3, r3, r3, lsl #2
 982 0054 05EB8305 		add	r5, r5, r3, lsl #2
 983 0058 0023     		movs	r3, #0
 984 005a EB60     		str	r3, [r5, #12]	@ float
 818:../../interpolator.c ****     #ifdef USE_SPINDLE
 819:../../interpolator.c ****     #ifdef LASER_MODE
 820:../../interpolator.c ****     itp_sgm_data[itp_sgm_data_write].spindle = 0;
 821:../../interpolator.c ****     itp_sgm_data[itp_sgm_data_write].spindle_inv = false;
 822:../../interpolator.c ****     #else
 823:../../interpolator.c ****     planner_get_spindle_speed(1, &(itp_sgm_data[itp_sgm_data_write].spindle), &(itp_sgm_data[itp_sg
 824:../../interpolator.c ****     #endif
 825:../../interpolator.c ****     #endif
 826:../../interpolator.c ****     itp_sgm_buffer_write();
 985              		.loc 1 826 5 is_stmt 1 view .LVU263
 986              	.LBB40:
 987              	.LBI40:
 118:../../interpolator.c **** {
 988              		.loc 1 118 20 view .LVU264
 989              	.LBB41:
 120:../../interpolator.c ****     if (++itp_sgm_data_write == INTERPOLATOR_BUFFER_SIZE)
 990              		.loc 1 120 5 view .LVU265
 120:../../interpolator.c ****     if (++itp_sgm_data_write == INTERPOLATOR_BUFFER_SIZE)
 991              		.loc 1 120 23 is_stmt 0 view .LVU266
 992 005c 0A4A     		ldr	r2, .L74+12
 993 005e 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 994 0060 013B     		subs	r3, r3, #1
 995 0062 DBB2     		uxtb	r3, r3
 996 0064 1370     		strb	r3, [r2]
 121:../../interpolator.c ****     {
 997              		.loc 1 121 5 is_stmt 1 view .LVU267
 121:../../interpolator.c ****     {
 998              		.loc 1 121 9 is_stmt 0 view .LVU268
 999 0066 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 34


 1000 0068 0133     		adds	r3, r3, #1
 1001 006a DBB2     		uxtb	r3, r3
 121:../../interpolator.c ****     {
 1002              		.loc 1 121 8 view .LVU269
 1003 006c 2370     		strb	r3, [r4]
 1004 006e 052B     		cmp	r3, #5
 1005 0070 00D0     		beq	.L73
 1006              	.L70:
 1007              	.LBE41:
 1008              	.LBE40:
 827:../../interpolator.c **** }
 1009              		.loc 1 827 1 view .LVU270
 1010 0072 70BD     		pop	{r4, r5, r6, pc}
 1011              	.L73:
 1012              	.LBB43:
 1013              	.LBB42:
 123:../../interpolator.c ****     }
 1014              		.loc 1 123 9 is_stmt 1 view .LVU271
 123:../../interpolator.c ****     }
 1015              		.loc 1 123 28 is_stmt 0 view .LVU272
 1016 0074 0022     		movs	r2, #0
 1017 0076 2270     		strb	r2, [r4]
 1018              	.LBE42:
 1019              	.LBE43:
 1020              		.loc 1 827 1 view .LVU273
 1021 0078 FBE7     		b	.L70
 1022              	.L75:
 1023 007a 00BF     		.align	2
 1024              	.L74:
 1025 007c 00000000 		.word	.LANCHOR4
 1026 0080 00000000 		.word	.LANCHOR7
 1027 0084 00002041 		.word	1092616192
 1028 0088 00000000 		.word	.LANCHOR6
 1029              		.cfi_endproc
 1030              	.LFE85:
 1032              		.global	__aeabi_fcmpeq
 1033              		.global	__aeabi_ui2f
 1034              		.global	__aeabi_fdiv
 1035              		.global	__aeabi_fmul
 1036              		.global	__aeabi_fsub
 1037              		.global	__aeabi_fcmpgt
 1038              		.global	__aeabi_f2uiz
 1039              		.global	__aeabi_fcmplt
 1040              		.global	__aeabi_fadd
 1041              		.global	__aeabi_i2f
 1042              		.section	.text.itp_run,"ax",%progbits
 1043              		.align	1
 1044              		.global	itp_run
 1045              		.syntax unified
 1046              		.thumb
 1047              		.thumb_func
 1048              		.fpu softvfp
 1050              	itp_run:
 1051              	.LFB76:
 209:../../interpolator.c ****     //static INTERPOLATOR_BLOCK *new_block = NULL;
 1052              		.loc 1 209 1 is_stmt 1 view -0
 1053              		.cfi_startproc
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 35


 1054              		@ args = 0, pretend = 0, frame = 16
 1055              		@ frame_needed = 0, uses_anonymous_args = 0
 1056 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1057              	.LCFI14:
 1058              		.cfi_def_cfa_offset 36
 1059              		.cfi_offset 4, -36
 1060              		.cfi_offset 5, -32
 1061              		.cfi_offset 6, -28
 1062              		.cfi_offset 7, -24
 1063              		.cfi_offset 8, -20
 1064              		.cfi_offset 9, -16
 1065              		.cfi_offset 10, -12
 1066              		.cfi_offset 11, -8
 1067              		.cfi_offset 14, -4
 1068 0004 85B0     		sub	sp, sp, #20
 1069              	.LCFI15:
 1070              		.cfi_def_cfa_offset 56
 213:../../interpolator.c ****     static float steps_per_mm = 0;
 1071              		.loc 1 213 5 view .LVU275
 214:../../interpolator.c ****     //limits of the speed profile
 1072              		.loc 1 214 5 view .LVU276
 216:../../interpolator.c ****     static uint32_t deaccel_from = 0;
 1073              		.loc 1 216 5 view .LVU277
 217:../../interpolator.c ****     static float junction_speed_sqr = 0;
 1074              		.loc 1 217 5 view .LVU278
 218:../../interpolator.c ****     static float half_speed_change = 0;
 1075              		.loc 1 218 5 view .LVU279
 219:../../interpolator.c ****     static bool initial_accel_negative = false;
 1076              		.loc 1 219 5 view .LVU280
 220:../../interpolator.c **** 
 1077              		.loc 1 220 5 view .LVU281
 224:../../interpolator.c ****     //static uint8_t accel_profile = 0;
 1078              		.loc 1 224 5 view .LVU282
 227:../../interpolator.c **** 
 1079              		.loc 1 227 5 view .LVU283
 1080              	.LVL30:
 230:../../interpolator.c ****     {
 1081              		.loc 1 230 5 view .LVU284
 230:../../interpolator.c ****     {
 1082              		.loc 1 230 11 is_stmt 0 view .LVU285
 1083 0006 FAE1     		b	.L115
 1084              	.LVL31:
 1085              	.L139:
 1086              	.LBB44:
 1087              	.LBB45:
 253:../../interpolator.c ****             {
 1088              		.loc 1 253 13 is_stmt 1 view .LVU286
 253:../../interpolator.c ****             {
 1089              		.loc 1 253 17 is_stmt 0 view .LVU287
 1090 0008 FFF7FEFF 		bl	planner_buffer_is_empty
 1091              	.LVL32:
 253:../../interpolator.c ****             {
 1092              		.loc 1 253 16 view .LVU288
 1093 000c 30BB     		cbnz	r0, .L89
 258:../../interpolator.c ****             #ifdef GCODE_PROCESS_LINE_NUMBERS
 1094              		.loc 1 258 13 is_stmt 1 view .LVU289
 258:../../interpolator.c ****             #ifdef GCODE_PROCESS_LINE_NUMBERS
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 36


 1095              		.loc 1 258 34 is_stmt 0 view .LVU290
 1096 000e FFF7FEFF 		bl	planner_get_block
 1097              	.LVL33:
 258:../../interpolator.c ****             #ifdef GCODE_PROCESS_LINE_NUMBERS
 1098              		.loc 1 258 32 view .LVU291
 1099 0012 894B     		ldr	r3, .L141
 1100 0014 1860     		str	r0, [r3]
 263:../../interpolator.c ****             {
 1101              		.loc 1 263 13 is_stmt 1 view .LVU292
 263:../../interpolator.c ****             {
 1102              		.loc 1 263 35 is_stmt 0 view .LVU293
 1103 0016 808D     		ldrh	r0, [r0, #44]
 263:../../interpolator.c ****             {
 1104              		.loc 1 263 16 view .LVU294
 1105 0018 C0B9     		cbnz	r0, .L128
 1106              	.L81:
 268:../../interpolator.c ****             {
 1107              		.loc 1 268 13 is_stmt 1 view .LVU295
 268:../../interpolator.c ****             {
 1108              		.loc 1 268 35 is_stmt 0 view .LVU296
 1109 001a 874B     		ldr	r3, .L141
 1110 001c 1D68     		ldr	r5, [r3]
 268:../../interpolator.c ****             {
 1111              		.loc 1 268 16 view .LVU297
 1112 001e 0021     		movs	r1, #0
 1113 0020 2869     		ldr	r0, [r5, #16]	@ float
 1114 0022 FFF7FEFF 		bl	__aeabi_fcmpeq
 1115              	.LVL34:
 1116 0026 A0B9     		cbnz	r0, .L129
 283:../../interpolator.c ****             itp_blk_data[itp_blk_data_write].totalsteps = 0;
 1117              		.loc 1 283 13 is_stmt 1 view .LVU298
 283:../../interpolator.c ****             itp_blk_data[itp_blk_data_write].totalsteps = 0;
 1118              		.loc 1 283 45 is_stmt 0 view .LVU299
 1119 0028 844F     		ldr	r7, .L141+4
 1120 002a 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
 283:../../interpolator.c ****             itp_blk_data[itp_blk_data_write].totalsteps = 0;
 1121              		.loc 1 283 54 view .LVU300
 1122 002c 844C     		ldr	r4, .L141+8
 1123 002e 5A01     		lsls	r2, r3, #5
 1124 0030 04EB4313 		add	r3, r4, r3, lsl #5
 1125 0034 0026     		movs	r6, #0
 1126 0036 A654     		strb	r6, [r4, r2]
 284:../../interpolator.c ****             //itp_blk_data[itp_blk_data_write].step_freq = F_STEP_MIN;
 1127              		.loc 1 284 13 is_stmt 1 view .LVU301
 284:../../interpolator.c ****             //itp_blk_data[itp_blk_data_write].step_freq = F_STEP_MIN;
 1128              		.loc 1 284 57 is_stmt 0 view .LVU302
 1129 0038 1E61     		str	r6, [r3, #16]
 287:../../interpolator.c ****             //applies the inverse kinematic to get next position in steps
 1130              		.loc 1 287 13 is_stmt 1 view .LVU303
 289:../../interpolator.c **** 
 1131              		.loc 1 289 13 view .LVU304
 1132 003a 01A9     		add	r1, sp, #4
 1133 003c 281D     		adds	r0, r5, #4
 1134 003e FFF7FEFF 		bl	kinematics_apply_inverse
 1135              	.LVL35:
 292:../../interpolator.c ****             for (uint8_t i = STEPPER_COUNT; i != 0;)
 1136              		.loc 1 292 13 view .LVU305
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 37


 292:../../interpolator.c ****             for (uint8_t i = STEPPER_COUNT; i != 0;)
 1137              		.loc 1 292 45 is_stmt 0 view .LVU306
 1138 0042 3D78     		ldrb	r5, [r7]	@ zero_extendqisi2
 292:../../interpolator.c ****             for (uint8_t i = STEPPER_COUNT; i != 0;)
 1139              		.loc 1 292 54 view .LVU307
 1140 0044 6B01     		lsls	r3, r5, #5
 1141 0046 E654     		strb	r6, [r4, r3]
 293:../../interpolator.c ****             {
 1142              		.loc 1 293 13 is_stmt 1 view .LVU308
 1143              	.LBB46:
 293:../../interpolator.c ****             {
 1144              		.loc 1 293 18 view .LVU309
 1145              	.LVL36:
 293:../../interpolator.c ****             {
 1146              		.loc 1 293 26 is_stmt 0 view .LVU310
 1147 0048 0324     		movs	r4, #3
 293:../../interpolator.c ****             {
 1148              		.loc 1 293 13 view .LVU311
 1149 004a 30E0     		b	.L84
 1150              	.LVL37:
 1151              	.L128:
 293:../../interpolator.c ****             {
 1152              		.loc 1 293 13 view .LVU312
 1153              	.LBE46:
 265:../../interpolator.c ****             }
 1154              		.loc 1 265 17 is_stmt 1 view .LVU313
 1155 004c FFF7FEFF 		bl	itp_delay
 1156              	.LVL38:
 1157 0050 E3E7     		b	.L81
 1158              	.L129:
 277:../../interpolator.c ****                 planner_discard_block();
 1159              		.loc 1 277 17 view .LVU314
 277:../../interpolator.c ****                 planner_discard_block();
 1160              		.loc 1 277 36 is_stmt 0 view .LVU315
 1161 0052 794B     		ldr	r3, .L141
 1162 0054 0022     		movs	r2, #0
 1163 0056 1A60     		str	r2, [r3]
 278:../../interpolator.c ****                 break; //exits after adding the dwell segment if motion is 0 (empty motion block)
 1164              		.loc 1 278 17 is_stmt 1 view .LVU316
 1165 0058 FFF7FEFF 		bl	planner_discard_block
 1166              	.LVL39:
 279:../../interpolator.c ****             }
 1167              		.loc 1 279 17 view .LVU317
 1168              	.L89:
 1169              	.LBE45:
 1170              	.LBE44:
 506:../../interpolator.c ****     {
 1171              		.loc 1 506 5 view .LVU318
 506:../../interpolator.c ****     {
 1172              		.loc 1 506 10 is_stmt 0 view .LVU319
 1173 005c F320     		movs	r0, #243
 1174 005e FFF7FEFF 		bl	cnc_get_exec_state
 1175              	.LVL40:
 506:../../interpolator.c ****     {
 1176              		.loc 1 506 8 view .LVU320
 1177 0062 28B9     		cbnz	r0, .L76
 506:../../interpolator.c ****     {
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 38


 1178              		.loc 1 506 87 discriminator 1 view .LVU321
 1179 0064 774B     		ldr	r3, .L141+12
 1180 0066 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1181 0068 DBB2     		uxtb	r3, r3
 506:../../interpolator.c ****     {
 1182              		.loc 1 506 64 discriminator 1 view .LVU322
 1183 006a 052B     		cmp	r3, #5
 1184 006c 40F08682 		bne	.L130
 1185              	.L76:
 514:../../interpolator.c **** 
 1186              		.loc 1 514 1 view .LVU323
 1187 0070 05B0     		add	sp, sp, #20
 1188              	.LCFI16:
 1189              		.cfi_remember_state
 1190              		.cfi_def_cfa_offset 36
 1191              		@ sp needed
 1192 0072 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1193              	.LVL41:
 1194              	.L132:
 1195              	.LCFI17:
 1196              		.cfi_restore_state
 1197              	.LBB66:
 1198              	.LBB49:
 1199              	.LBB47:
 300:../../interpolator.c ****                     itp_blk_data[itp_blk_data_write].steps[i] = ~itp_blk_data[itp_blk_data_write].s
 1200              		.loc 1 300 21 is_stmt 1 view .LVU324
 300:../../interpolator.c ****                     itp_blk_data[itp_blk_data_write].steps[i] = ~itp_blk_data[itp_blk_data_write].s
 1201              		.loc 1 300 67 is_stmt 0 view .LVU325
 1202 0076 0121     		movs	r1, #1
 1203 0078 01FA04F0 		lsl	r0, r1, r4
 300:../../interpolator.c ****                     itp_blk_data[itp_blk_data_write].steps[i] = ~itp_blk_data[itp_blk_data_write].s
 1204              		.loc 1 300 62 view .LVU326
 1205 007c 704B     		ldr	r3, .L141+8
 1206 007e 6E01     		lsls	r6, r5, #5
 1207 0080 995D     		ldrb	r1, [r3, r6]	@ zero_extendqisi2
 1208 0082 0143     		orrs	r1, r1, r0
 1209 0084 9955     		strb	r1, [r3, r6]
 301:../../interpolator.c ****                 }
 1210              		.loc 1 301 21 is_stmt 1 view .LVU327
 301:../../interpolator.c ****                 }
 1211              		.loc 1 301 104 is_stmt 0 view .LVU328
 1212 0086 04EBC501 		add	r1, r4, r5, lsl #3
 1213 008a 03EB8103 		add	r3, r3, r1, lsl #2
 1214 008e 5968     		ldr	r1, [r3, #4]
 301:../../interpolator.c ****                 }
 1215              		.loc 1 301 108 view .LVU329
 1216 0090 4942     		rsbs	r1, r1, #0
 301:../../interpolator.c ****                 }
 1217              		.loc 1 301 63 view .LVU330
 1218 0092 5960     		str	r1, [r3, #4]
 1219              	.L85:
 304:../../interpolator.c ****             }
 1220              		.loc 1 304 17 is_stmt 1 view .LVU331
 304:../../interpolator.c ****             }
 1221              		.loc 1 304 63 is_stmt 0 view .LVU332
 1222 0094 6A4B     		ldr	r3, .L141+8
 1223 0096 02EBC502 		add	r2, r2, r5, lsl #3
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 39


 1224 009a 03EB8202 		add	r2, r3, r2, lsl #2
 1225 009e 5268     		ldr	r2, [r2, #4]
 1226 00a0 03EB4513 		add	r3, r3, r5, lsl #5
 1227 00a4 1969     		ldr	r1, [r3, #16]
 1228 00a6 8A42     		cmp	r2, r1
 1229 00a8 38BF     		it	cc
 1230 00aa 0A46     		movcc	r2, r1
 304:../../interpolator.c ****             }
 1231              		.loc 1 304 61 view .LVU333
 1232 00ac 1A61     		str	r2, [r3, #16]
 1233              	.LVL42:
 1234              	.L84:
 293:../../interpolator.c ****             {
 1235              		.loc 1 293 45 is_stmt 1 discriminator 1 view .LVU334
 293:../../interpolator.c ****             {
 1236              		.loc 1 293 13 is_stmt 0 discriminator 1 view .LVU335
 1237 00ae A4B1     		cbz	r4, .L131
 295:../../interpolator.c ****                 itp_blk_data[itp_blk_data_write].steps[i] = step_new_pos[i] - itp_step_pos[i];
 1238              		.loc 1 295 17 is_stmt 1 view .LVU336
 295:../../interpolator.c ****                 itp_blk_data[itp_blk_data_write].steps[i] = step_new_pos[i] - itp_step_pos[i];
 1239              		.loc 1 295 18 is_stmt 0 view .LVU337
 1240 00b0 013C     		subs	r4, r4, #1
 1241              	.LVL43:
 295:../../interpolator.c ****                 itp_blk_data[itp_blk_data_write].steps[i] = step_new_pos[i] - itp_step_pos[i];
 1242              		.loc 1 295 18 view .LVU338
 1243 00b2 E4B2     		uxtb	r4, r4
 1244              	.LVL44:
 296:../../interpolator.c **** 
 1245              		.loc 1 296 17 is_stmt 1 view .LVU339
 296:../../interpolator.c **** 
 1246              		.loc 1 296 73 is_stmt 0 view .LVU340
 1247 00b4 2246     		mov	r2, r4
 1248 00b6 04AB     		add	r3, sp, #16
 1249 00b8 03EB8403 		add	r3, r3, r4, lsl #2
 1250 00bc 53F80C3C 		ldr	r3, [r3, #-12]
 296:../../interpolator.c **** 
 1251              		.loc 1 296 91 view .LVU341
 1252 00c0 6149     		ldr	r1, .L141+16
 1253 00c2 51F82410 		ldr	r1, [r1, r4, lsl #2]
 296:../../interpolator.c **** 
 1254              		.loc 1 296 77 view .LVU342
 1255 00c6 5B1A     		subs	r3, r3, r1
 296:../../interpolator.c **** 
 1256              		.loc 1 296 59 view .LVU343
 1257 00c8 04EBC500 		add	r0, r4, r5, lsl #3
 1258 00cc 5C49     		ldr	r1, .L141+8
 1259 00ce 01EB8001 		add	r1, r1, r0, lsl #2
 1260 00d2 4B60     		str	r3, [r1, #4]
 298:../../interpolator.c ****                 {
 1261              		.loc 1 298 17 is_stmt 1 view .LVU344
 298:../../interpolator.c ****                 {
 1262              		.loc 1 298 19 is_stmt 0 view .LVU345
 1263 00d4 002B     		cmp	r3, #0
 1264 00d6 DDDA     		bge	.L85
 1265 00d8 CDE7     		b	.L132
 1266              	.L131:
 298:../../interpolator.c ****                 {
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 40


 1267              		.loc 1 298 19 view .LVU346
 1268              	.LBE47:
 309:../../interpolator.c **** 
 1269              		.loc 1 309 13 is_stmt 1 view .LVU347
 1270 00da 5B4B     		ldr	r3, .L141+16
 1271 00dc 04AA     		add	r2, sp, #16
 1272 00de 12E90700 		ldmdb	r2, {r0, r1, r2}
 1273 00e2 83E80700 		stm	r3, {r0, r1, r2}
 312:../../interpolator.c ****             min_step_distance = 1.0f / steps_per_mm;
 1274              		.loc 1 312 13 view .LVU348
 312:../../interpolator.c ****             min_step_distance = 1.0f / steps_per_mm;
 1275              		.loc 1 312 68 is_stmt 0 view .LVU349
 1276 00e6 564B     		ldr	r3, .L141+8
 1277 00e8 03EB4513 		add	r3, r3, r5, lsl #5
 1278 00ec 1E69     		ldr	r6, [r3, #16]
 312:../../interpolator.c ****             min_step_distance = 1.0f / steps_per_mm;
 1279              		.loc 1 312 29 view .LVU350
 1280 00ee 3046     		mov	r0, r6
 1281 00f0 FFF7FEFF 		bl	__aeabi_ui2f
 1282              	.LVL45:
 312:../../interpolator.c ****             min_step_distance = 1.0f / steps_per_mm;
 1283              		.loc 1 312 101 view .LVU351
 1284 00f4 504B     		ldr	r3, .L141
 1285 00f6 1F68     		ldr	r7, [r3]
 312:../../interpolator.c ****             min_step_distance = 1.0f / steps_per_mm;
 1286              		.loc 1 312 81 view .LVU352
 1287 00f8 3969     		ldr	r1, [r7, #16]	@ float
 1288 00fa FFF7FEFF 		bl	__aeabi_fdiv
 1289              	.LVL46:
 1290 00fe 0146     		mov	r1, r0
 312:../../interpolator.c ****             min_step_distance = 1.0f / steps_per_mm;
 1291              		.loc 1 312 26 view .LVU353
 1292 0100 524B     		ldr	r3, .L141+20
 1293 0102 1860     		str	r0, [r3]	@ float
 313:../../interpolator.c **** 
 1294              		.loc 1 313 13 is_stmt 1 view .LVU354
 313:../../interpolator.c **** 
 1295              		.loc 1 313 38 is_stmt 0 view .LVU355
 1296 0104 4FF07E50 		mov	r0, #1065353216
 1297 0108 FFF7FEFF 		bl	__aeabi_fdiv
 1298              	.LVL47:
 313:../../interpolator.c **** 
 1299              		.loc 1 313 31 view .LVU356
 1300 010c 504B     		ldr	r3, .L141+24
 1301 010e 1860     		str	r0, [r3]	@ float
 316:../../interpolator.c **** 
 1302              		.loc 1 316 13 is_stmt 1 view .LVU357
 316:../../interpolator.c **** 
 1303              		.loc 1 316 31 is_stmt 0 view .LVU358
 1304 0110 504B     		ldr	r3, .L141+28
 1305 0112 1E60     		str	r6, [r3]
 319:../../interpolator.c **** 
 1306              		.loc 1 319 13 is_stmt 1 view .LVU359
 319:../../interpolator.c **** 
 1307              		.loc 1 319 30 is_stmt 0 view .LVU360
 1308 0114 504B     		ldr	r3, .L141+32
 1309 0116 0122     		movs	r2, #1
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 41


 1310 0118 1A70     		strb	r2, [r3]
 321:../../interpolator.c **** 
 1311              		.loc 1 321 13 is_stmt 1 view .LVU361
 321:../../interpolator.c **** 
 1312              		.loc 1 321 59 is_stmt 0 view .LVU362
 1313 011a 5049     		ldr	r1, .L141+36
 1314 011c 786A     		ldr	r0, [r7, #36]	@ float
 1315 011e FFF7FEFF 		bl	__aeabi_fmul
 1316              	.LVL48:
 321:../../interpolator.c **** 
 1317              		.loc 1 321 31 view .LVU363
 1318 0122 4F4B     		ldr	r3, .L141+40
 1319 0124 1860     		str	r0, [r3]	@ float
 323:../../interpolator.c ****             for (uint8_t i = 0; i < STEPPER_COUNT; i++)
 1320              		.loc 1 323 13 is_stmt 1 view .LVU364
 323:../../interpolator.c ****             for (uint8_t i = 0; i < STEPPER_COUNT; i++)
 1321              		.loc 1 323 22 is_stmt 0 view .LVU365
 1322 0126 7608     		lsrs	r6, r6, #1
 1323              	.LVL49:
 324:../../interpolator.c ****             {
 1324              		.loc 1 324 13 is_stmt 1 view .LVU366
 1325              	.LBB48:
 324:../../interpolator.c ****             {
 1326              		.loc 1 324 18 view .LVU367
 324:../../interpolator.c ****             {
 1327              		.loc 1 324 13 is_stmt 0 view .LVU368
 1328 0128 08E0     		b	.L87
 1329              	.LVL50:
 1330              	.L88:
 326:../../interpolator.c ****             }
 1331              		.loc 1 326 17 is_stmt 1 discriminator 3 view .LVU369
 326:../../interpolator.c ****             }
 1332              		.loc 1 326 60 is_stmt 0 discriminator 3 view .LVU370
 1333 012a 04EBC503 		add	r3, r4, r5, lsl #3
 1334 012e 1A1D     		adds	r2, r3, #4
 1335 0130 434B     		ldr	r3, .L141+8
 1336 0132 03EB8203 		add	r3, r3, r2, lsl #2
 1337 0136 5E60     		str	r6, [r3, #4]
 324:../../interpolator.c ****             {
 1338              		.loc 1 324 52 is_stmt 1 discriminator 3 view .LVU371
 324:../../interpolator.c ****             {
 1339              		.loc 1 324 53 is_stmt 0 discriminator 3 view .LVU372
 1340 0138 0134     		adds	r4, r4, #1
 1341              	.LVL51:
 324:../../interpolator.c ****             {
 1342              		.loc 1 324 53 discriminator 3 view .LVU373
 1343 013a E4B2     		uxtb	r4, r4
 1344              	.LVL52:
 1345              	.L87:
 324:../../interpolator.c ****             {
 1346              		.loc 1 324 33 is_stmt 1 discriminator 1 view .LVU374
 324:../../interpolator.c ****             {
 1347              		.loc 1 324 13 is_stmt 0 discriminator 1 view .LVU375
 1348 013c 022C     		cmp	r4, #2
 1349 013e F4D9     		bls	.L88
 1350 0140 6DE1     		b	.L79
 1351              	.LVL53:
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 42


 1352              	.L90:
 324:../../interpolator.c ****             {
 1353              		.loc 1 324 13 discriminator 1 view .LVU376
 1354              	.LBE48:
 1355              	.LBE49:
 350:../../interpolator.c ****         {
 1356              		.loc 1 350 14 is_stmt 1 view .LVU377
 350:../../interpolator.c ****         {
 1357              		.loc 1 350 18 is_stmt 0 view .LVU378
 1358 0142 454B     		ldr	r3, .L141+32
 1359 0144 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 350:../../interpolator.c ****         {
 1360              		.loc 1 350 17 view .LVU379
 1361 0146 002B     		cmp	r3, #0
 1362 0148 00F08A81 		beq	.L91
 1363              	.LBB50:
 352:../../interpolator.c ****             float exit_speed_sqr = planner_get_block_exit_speed_sqr();
 1364              		.loc 1 352 13 is_stmt 1 view .LVU380
 352:../../interpolator.c ****             float exit_speed_sqr = planner_get_block_exit_speed_sqr();
 1365              		.loc 1 352 30 is_stmt 0 view .LVU381
 1366 014c 4FF00008 		mov	r8, #0
 1367 0150 414B     		ldr	r3, .L141+32
 1368 0152 83F80080 		strb	r8, [r3]
 353:../../interpolator.c ****             junction_speed_sqr = planner_get_block_top_speed();
 1369              		.loc 1 353 13 is_stmt 1 view .LVU382
 353:../../interpolator.c ****             junction_speed_sqr = planner_get_block_top_speed();
 1370              		.loc 1 353 36 is_stmt 0 view .LVU383
 1371 0156 FFF7FEFF 		bl	planner_get_block_exit_speed_sqr
 1372              	.LVL54:
 1373 015a 0646     		mov	r6, r0
 1374              	.LVL55:
 354:../../interpolator.c **** 
 1375              		.loc 1 354 13 is_stmt 1 view .LVU384
 354:../../interpolator.c **** 
 1376              		.loc 1 354 34 is_stmt 0 view .LVU385
 1377 015c FFF7FEFF 		bl	planner_get_block_top_speed
 1378              	.LVL56:
 354:../../interpolator.c **** 
 1379              		.loc 1 354 34 view .LVU386
 1380 0160 0546     		mov	r5, r0
 354:../../interpolator.c **** 
 1381              		.loc 1 354 32 view .LVU387
 1382 0162 404B     		ldr	r3, .L141+44
 1383 0164 1860     		str	r0, [r3]	@ float
 356:../../interpolator.c ****             deaccel_from = 0;
 1384              		.loc 1 356 13 is_stmt 1 view .LVU388
 356:../../interpolator.c ****             deaccel_from = 0;
 1385              		.loc 1 356 25 is_stmt 0 view .LVU389
 1386 0166 3B4B     		ldr	r3, .L141+28
 1387 0168 1F68     		ldr	r7, [r3]
 1388 016a 3F4B     		ldr	r3, .L141+48
 1389 016c 1F60     		str	r7, [r3]
 357:../../interpolator.c ****             if (junction_speed_sqr != itp_cur_plan_block->entry_feed_sqr)
 1390              		.loc 1 357 13 is_stmt 1 view .LVU390
 357:../../interpolator.c ****             if (junction_speed_sqr != itp_cur_plan_block->entry_feed_sqr)
 1391              		.loc 1 357 26 is_stmt 0 view .LVU391
 1392 016e 3F4B     		ldr	r3, .L141+52
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 43


 1393 0170 C3F80080 		str	r8, [r3]
 358:../../interpolator.c ****             {
 1394              		.loc 1 358 13 is_stmt 1 view .LVU392
 358:../../interpolator.c ****             {
 1395              		.loc 1 358 57 is_stmt 0 view .LVU393
 1396 0174 304B     		ldr	r3, .L141
 1397 0176 D3F80080 		ldr	r8, [r3]
 1398 017a D8F81490 		ldr	r9, [r8, #20]	@ float
 358:../../interpolator.c ****             {
 1399              		.loc 1 358 16 view .LVU394
 1400 017e 4946     		mov	r1, r9
 1401 0180 FFF7FEFF 		bl	__aeabi_fcmpeq
 1402              	.LVL57:
 1403 0184 78BB     		cbnz	r0, .L92
 1404              	.LBB51:
 360:../../interpolator.c ****                 accel_until -= floorf(accel_dist * steps_per_mm);
 1405              		.loc 1 360 17 is_stmt 1 view .LVU395
 360:../../interpolator.c ****                 accel_until -= floorf(accel_dist * steps_per_mm);
 1406              		.loc 1 360 43 is_stmt 0 view .LVU396
 1407 0186 4946     		mov	r1, r9
 1408 0188 2846     		mov	r0, r5
 1409 018a FFF7FEFF 		bl	__aeabi_fsub
 1410              	.LVL58:
 1411 018e 8246     		mov	r10, r0
 1412 0190 0021     		movs	r1, #0
 1413 0192 FFF7FEFF 		bl	__aeabi_fcmpgt
 1414              	.LVL59:
 1415 0196 0028     		cmp	r0, #0
 1416 0198 47D0     		beq	.L133
 1417              	.L94:
 360:../../interpolator.c ****                 accel_until -= floorf(accel_dist * steps_per_mm);
 1418              		.loc 1 360 41 discriminator 4 view .LVU397
 1419 019a 4FF07C51 		mov	r1, #1056964608
 1420 019e 5046     		mov	r0, r10
 1421 01a0 FFF7FEFF 		bl	__aeabi_fmul
 1422              	.LVL60:
 360:../../interpolator.c ****                 accel_until -= floorf(accel_dist * steps_per_mm);
 1423              		.loc 1 360 23 discriminator 4 view .LVU398
 1424 01a4 D8F82810 		ldr	r1, [r8, #40]	@ float
 1425 01a8 FFF7FEFF 		bl	__aeabi_fmul
 1426              	.LVL61:
 361:../../interpolator.c ****                 initial_accel_negative = (junction_speed_sqr < itp_cur_plan_block->entry_feed_sqr);
 1427              		.loc 1 361 17 is_stmt 1 discriminator 4 view .LVU399
 361:../../interpolator.c ****                 initial_accel_negative = (junction_speed_sqr < itp_cur_plan_block->entry_feed_sqr);
 1428              		.loc 1 361 32 is_stmt 0 discriminator 4 view .LVU400
 1429 01ac 274B     		ldr	r3, .L141+20
 1430 01ae 1968     		ldr	r1, [r3]	@ float
 1431 01b0 FFF7FEFF 		bl	__aeabi_fmul
 1432              	.LVL62:
 361:../../interpolator.c ****                 initial_accel_negative = (junction_speed_sqr < itp_cur_plan_block->entry_feed_sqr);
 1433              		.loc 1 361 32 discriminator 4 view .LVU401
 1434 01b4 FFF7FEFF 		bl	floorf
 1435              	.LVL63:
 1436 01b8 8246     		mov	r10, r0
 361:../../interpolator.c ****                 initial_accel_negative = (junction_speed_sqr < itp_cur_plan_block->entry_feed_sqr);
 1437              		.loc 1 361 29 discriminator 4 view .LVU402
 1438 01ba 3846     		mov	r0, r7
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 44


 1439 01bc FFF7FEFF 		bl	__aeabi_ui2f
 1440              	.LVL64:
 1441 01c0 5146     		mov	r1, r10
 1442 01c2 FFF7FEFF 		bl	__aeabi_fsub
 1443              	.LVL65:
 1444 01c6 FFF7FEFF 		bl	__aeabi_f2uiz
 1445              	.LVL66:
 1446 01ca 274B     		ldr	r3, .L141+48
 1447 01cc 1860     		str	r0, [r3]
 362:../../interpolator.c ****             }
 1448              		.loc 1 362 17 is_stmt 1 discriminator 4 view .LVU403
 362:../../interpolator.c ****             }
 1449              		.loc 1 362 62 is_stmt 0 discriminator 4 view .LVU404
 1450 01ce 4FF0010A 		mov	r10, #1
 1451 01d2 4946     		mov	r1, r9
 1452 01d4 2846     		mov	r0, r5
 1453 01d6 FFF7FEFF 		bl	__aeabi_fcmplt
 1454              	.LVL67:
 1455 01da 08B9     		cbnz	r0, .L95
 1456 01dc 4FF0000A 		mov	r10, #0
 1457              	.L95:
 362:../../interpolator.c ****             }
 1458              		.loc 1 362 40 discriminator 4 view .LVU405
 1459 01e0 234B     		ldr	r3, .L141+56
 1460 01e2 83F800A0 		strb	r10, [r3]
 1461              	.L92:
 362:../../interpolator.c ****             }
 1462              		.loc 1 362 40 discriminator 4 view .LVU406
 1463              	.LBE51:
 366:../../interpolator.c ****             {
 1464              		.loc 1 366 13 is_stmt 1 view .LVU407
 366:../../interpolator.c ****             {
 1465              		.loc 1 366 28 is_stmt 0 view .LVU408
 1466 01e6 204B     		ldr	r3, .L141+48
 1467 01e8 1B68     		ldr	r3, [r3]
 366:../../interpolator.c ****             {
 1468              		.loc 1 366 15 view .LVU409
 1469 01ea 9F42     		cmp	r7, r3
 1470 01ec 20D0     		beq	.L134
 1471              	.L96:
 371:../../interpolator.c ****             {
 1472              		.loc 1 371 13 is_stmt 1 view .LVU410
 371:../../interpolator.c ****             {
 1473              		.loc 1 371 16 is_stmt 0 view .LVU411
 1474 01ee 3146     		mov	r1, r6
 1475 01f0 2846     		mov	r0, r5
 1476 01f2 FFF7FEFF 		bl	__aeabi_fcmpgt
 1477              	.LVL68:
 1478 01f6 0028     		cmp	r0, #0
 1479 01f8 00F03281 		beq	.L91
 1480              	.LBB52:
 373:../../interpolator.c ****                 deaccel_from = floorf(deaccel_dist * steps_per_mm);
 1481              		.loc 1 373 17 is_stmt 1 view .LVU412
 373:../../interpolator.c ****                 deaccel_from = floorf(deaccel_dist * steps_per_mm);
 1482              		.loc 1 373 65 is_stmt 0 view .LVU413
 1483 01fc 3146     		mov	r1, r6
 1484 01fe 2846     		mov	r0, r5
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 45


 1485 0200 FFF7FEFF 		bl	__aeabi_fsub
 1486              	.LVL69:
 373:../../interpolator.c ****                 deaccel_from = floorf(deaccel_dist * steps_per_mm);
 1487              		.loc 1 373 43 view .LVU414
 1488 0204 4FF07C51 		mov	r1, #1056964608
 1489 0208 FFF7FEFF 		bl	__aeabi_fmul
 1490              	.LVL70:
 373:../../interpolator.c ****                 deaccel_from = floorf(deaccel_dist * steps_per_mm);
 1491              		.loc 1 373 23 view .LVU415
 1492 020c D8F82810 		ldr	r1, [r8, #40]	@ float
 1493 0210 FFF7FEFF 		bl	__aeabi_fmul
 1494              	.LVL71:
 374:../../interpolator.c ****             }
 1495              		.loc 1 374 17 is_stmt 1 view .LVU416
 374:../../interpolator.c ****             }
 1496              		.loc 1 374 32 is_stmt 0 view .LVU417
 1497 0214 0D4B     		ldr	r3, .L141+20
 1498 0216 1968     		ldr	r1, [r3]	@ float
 1499 0218 FFF7FEFF 		bl	__aeabi_fmul
 1500              	.LVL72:
 374:../../interpolator.c ****             }
 1501              		.loc 1 374 32 view .LVU418
 1502 021c FFF7FEFF 		bl	floorf
 1503              	.LVL73:
 374:../../interpolator.c ****             }
 1504              		.loc 1 374 30 view .LVU419
 1505 0220 FFF7FEFF 		bl	__aeabi_f2uiz
 1506              	.LVL74:
 1507 0224 114B     		ldr	r3, .L141+52
 1508 0226 1860     		str	r0, [r3]
 1509 0228 1AE1     		b	.L91
 1510              	.L133:
 374:../../interpolator.c ****             }
 1511              		.loc 1 374 30 view .LVU420
 1512              	.LBE52:
 1513              	.LBB53:
 360:../../interpolator.c ****                 accel_until -= floorf(accel_dist * steps_per_mm);
 1514              		.loc 1 360 43 discriminator 2 view .LVU421
 1515 022a 0AF1004A 		add	r10, r10, #-2147483648
 1516 022e B4E7     		b	.L94
 1517              	.L134:
 1518              	.LBE53:
 368:../../interpolator.c **** 			}
 1519              		.loc 1 368 14 is_stmt 1 view .LVU422
 368:../../interpolator.c **** 			}
 1520              		.loc 1 368 49 is_stmt 0 view .LVU423
 1521 0230 C8F81450 		str	r5, [r8, #20]	@ float
 1522 0234 DBE7     		b	.L96
 1523              	.L142:
 1524 0236 00BF     		.align	2
 1525              	.L141:
 1526 0238 00000000 		.word	.LANCHOR9
 1527 023c 00000000 		.word	.LANCHOR2
 1528 0240 00000000 		.word	.LANCHOR3
 1529 0244 00000000 		.word	.LANCHOR6
 1530 0248 00000000 		.word	.LANCHOR11
 1531 024c 00000000 		.word	.LANCHOR14
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 46


 1532 0250 00000000 		.word	.LANCHOR15
 1533 0254 00000000 		.word	.LANCHOR16
 1534 0258 00000000 		.word	.LANCHOR8
 1535 025c 0AD7A33B 		.word	1000593162
 1536 0260 00000000 		.word	.LANCHOR17
 1537 0264 00000000 		.word	.LANCHOR20
 1538 0268 00000000 		.word	.LANCHOR18
 1539 026c 00000000 		.word	.LANCHOR19
 1540 0270 00000000 		.word	.LANCHOR21
 1541              	.LVL75:
 1542              	.L99:
 368:../../interpolator.c **** 			}
 1543              		.loc 1 368 49 view .LVU424
 1544              	.LBE50:
 394:../../interpolator.c ****             profile_steps_limit = accel_until;
 1545              		.loc 1 394 76 discriminator 2 view .LVU425
 1546 0274 AF4B     		ldr	r3, .L143
 1547 0276 D3F80080 		ldr	r8, [r3]	@ float
 394:../../interpolator.c ****             profile_steps_limit = accel_until;
 1548              		.loc 1 394 74 discriminator 2 view .LVU426
 1549 027a 08F10048 		add	r8, r8, #-2147483648
 1550              	.L100:
 1551              	.LVL76:
 395:../../interpolator.c ****             sgm->update_speed = true;
 1552              		.loc 1 395 13 is_stmt 1 discriminator 4 view .LVU427
 395:../../interpolator.c ****             sgm->update_speed = true;
 1553              		.loc 1 395 33 is_stmt 0 discriminator 4 view .LVU428
 1554 027e FFF7FEFF 		bl	__aeabi_ui2f
 1555              	.LVL77:
 1556 0282 0546     		mov	r5, r0
 1557              	.LVL78:
 396:../../interpolator.c **** 
 1558              		.loc 1 396 13 is_stmt 1 discriminator 4 view .LVU429
 396:../../interpolator.c **** 
 1559              		.loc 1 396 31 is_stmt 0 discriminator 4 view .LVU430
 1560 0284 04EB8403 		add	r3, r4, r4, lsl #2
 1561 0288 AB4A     		ldr	r2, .L143+4
 1562 028a 02EB8303 		add	r3, r2, r3, lsl #2
 1563 028e 0122     		movs	r2, #1
 1564 0290 1A74     		strb	r2, [r3, #16]
 1565              	.LVL79:
 1566              	.L101:
 417:../../interpolator.c ****         /*
 1567              		.loc 1 417 9 is_stmt 1 view .LVU431
 417:../../interpolator.c ****         /*
 1568              		.loc 1 417 31 is_stmt 0 view .LVU432
 1569 0292 AA4B     		ldr	r3, .L143+8
 1570 0294 1B68     		ldr	r3, [r3]
 1571 0296 5869     		ldr	r0, [r3, #20]	@ float
 1572 0298 FFF7FEFF 		bl	sqrtf
 1573              	.LVL80:
 1574 029c 0146     		mov	r1, r0
 1575              	.LVL81:
 421:../../interpolator.c ****         //if on active hold state
 1576              		.loc 1 421 9 is_stmt 1 view .LVU433
 421:../../interpolator.c ****         //if on active hold state
 1577              		.loc 1 421 23 is_stmt 0 view .LVU434
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 47


 1578 029e 4046     		mov	r0, r8
 1579              	.LVL82:
 421:../../interpolator.c ****         //if on active hold state
 1580              		.loc 1 421 23 view .LVU435
 1581 02a0 FFF7FEFF 		bl	__aeabi_fadd
 1582              	.LVL83:
 421:../../interpolator.c ****         //if on active hold state
 1583              		.loc 1 421 23 view .LVU436
 1584 02a4 0746     		mov	r7, r0
 1585              	.LVL84:
 423:../../interpolator.c ****         {
 1586              		.loc 1 423 9 is_stmt 1 view .LVU437
 423:../../interpolator.c ****         {
 1587              		.loc 1 423 13 is_stmt 0 view .LVU438
 1588 02a6 0220     		movs	r0, #2
 1589              	.LVL85:
 423:../../interpolator.c ****         {
 1590              		.loc 1 423 13 view .LVU439
 1591 02a8 FFF7FEFF 		bl	cnc_get_exec_state
 1592              	.LVL86:
 423:../../interpolator.c ****         {
 1593              		.loc 1 423 12 view .LVU440
 1594 02ac 30B1     		cbz	r0, .L103
 425:../../interpolator.c ****             {
 1595              		.loc 1 425 13 is_stmt 1 view .LVU441
 425:../../interpolator.c ****             {
 1596              		.loc 1 425 16 is_stmt 0 view .LVU442
 1597 02ae 0021     		movs	r1, #0
 1598 02b0 3846     		mov	r0, r7
 1599 02b2 FFF7FEFF 		bl	__aeabi_fcmplt
 1600              	.LVL87:
 1601 02b6 0028     		cmp	r0, #0
 1602 02b8 7FF4DAAE 		bne	.L76
 1603              	.L103:
 432:../../interpolator.c ****         //computes how many steps it can perform at this speed and frame window
 1604              		.loc 1 432 9 is_stmt 1 view .LVU443
 432:../../interpolator.c ****         //computes how many steps it can perform at this speed and frame window
 1605              		.loc 1 432 15 is_stmt 0 view .LVU444
 1606 02bc A049     		ldr	r1, .L143+12
 1607 02be 3846     		mov	r0, r7
 1608 02c0 FFF7FEFF 		bl	__aeabi_fmul
 1609              	.LVL88:
 434:../../interpolator.c ****         //if traveled distance is less the one step fits at least one step
 1610              		.loc 1 434 9 is_stmt 1 view .LVU445
 434:../../interpolator.c ****         //if traveled distance is less the one step fits at least one step
 1611              		.loc 1 434 36 is_stmt 0 view .LVU446
 1612 02c4 9F4B     		ldr	r3, .L143+16
 1613 02c6 1968     		ldr	r1, [r3]	@ float
 1614 02c8 FFF7FEFF 		bl	__aeabi_fmul
 1615              	.LVL89:
 434:../../interpolator.c ****         //if traveled distance is less the one step fits at least one step
 1616              		.loc 1 434 36 view .LVU447
 1617 02cc FFF7FEFF 		bl	floorf
 1618              	.LVL90:
 434:../../interpolator.c ****         //if traveled distance is less the one step fits at least one step
 1619              		.loc 1 434 18 view .LVU448
 1620 02d0 FFF7FEFF 		bl	__aeabi_f2uiz
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 48


 1621              	.LVL91:
 1622 02d4 86B2     		uxth	r6, r0
 1623              	.LVL92:
 436:../../interpolator.c ****         {
 1624              		.loc 1 436 9 is_stmt 1 view .LVU449
 436:../../interpolator.c ****         {
 1625              		.loc 1 436 12 is_stmt 0 view .LVU450
 1626 02d6 06B9     		cbnz	r6, .L104
 438:../../interpolator.c ****         }
 1627              		.loc 1 438 19 view .LVU451
 1628 02d8 0126     		movs	r6, #1
 1629              	.LVL93:
 1630              	.L104:
 441:../../interpolator.c ****         {
 1631              		.loc 1 441 9 is_stmt 1 view .LVU452
 441:../../interpolator.c ****         {
 1632              		.loc 1 441 19 is_stmt 0 view .LVU453
 1633 02da 3046     		mov	r0, r6
 1634 02dc FFF7FEFF 		bl	__aeabi_i2f
 1635              	.LVL94:
 1636 02e0 8146     		mov	r9, r0
 441:../../interpolator.c ****         {
 1637              		.loc 1 441 40 view .LVU454
 1638 02e2 994B     		ldr	r3, .L143+20
 1639 02e4 1868     		ldr	r0, [r3]
 1640 02e6 FFF7FEFF 		bl	__aeabi_ui2f
 1641              	.LVL95:
 1642 02ea 2946     		mov	r1, r5
 1643 02ec FFF7FEFF 		bl	__aeabi_fsub
 1644              	.LVL96:
 1645 02f0 0546     		mov	r5, r0
 1646              	.LVL97:
 441:../../interpolator.c ****         {
 1647              		.loc 1 441 12 view .LVU455
 1648 02f2 0146     		mov	r1, r0
 1649 02f4 4846     		mov	r0, r9
 1650 02f6 FFF7FEFF 		bl	__aeabi_fcmpgt
 1651              	.LVL98:
 1652 02fa 18B1     		cbz	r0, .L105
 443:../../interpolator.c ****         }
 1653              		.loc 1 443 13 is_stmt 1 view .LVU456
 443:../../interpolator.c ****         }
 1654              		.loc 1 443 19 is_stmt 0 view .LVU457
 1655 02fc 2846     		mov	r0, r5
 1656 02fe FFF7FEFF 		bl	__aeabi_f2uiz
 1657              	.LVL99:
 1658 0302 86B2     		uxth	r6, r0
 1659              	.LVL100:
 1660              	.L105:
 447:../../interpolator.c **** 
 1661              		.loc 1 447 9 is_stmt 1 view .LVU458
 447:../../interpolator.c **** 
 1662              		.loc 1 447 34 is_stmt 0 view .LVU459
 1663 0304 3046     		mov	r0, r6
 1664 0306 FFF7FEFF 		bl	__aeabi_i2f
 1665              	.LVL101:
 447:../../interpolator.c **** 
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 49


 1666              		.loc 1 447 26 view .LVU460
 1667 030a 904B     		ldr	r3, .L143+24
 1668 030c 1968     		ldr	r1, [r3]	@ float
 1669 030e FFF7FEFF 		bl	__aeabi_fmul
 1670              	.LVL102:
 1671 0312 8246     		mov	r10, r0
 1672              	.LVL103:
 449:../../interpolator.c ****         {
 1673              		.loc 1 449 9 is_stmt 1 view .LVU461
 449:../../interpolator.c ****         {
 1674              		.loc 1 449 15 is_stmt 0 view .LVU462
 1675 0314 04EB8403 		add	r3, r4, r4, lsl #2
 1676 0318 874A     		ldr	r2, .L143+4
 1677 031a 02EB8303 		add	r3, r2, r3, lsl #2
 1678 031e 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 449:../../interpolator.c ****         {
 1679              		.loc 1 449 11 view .LVU463
 1680 0320 53B3     		cbz	r3, .L107
 1681              	.LBB54:
 451:../../interpolator.c ****             if(speed_change>0)
 1682              		.loc 1 451 13 is_stmt 1 view .LVU464
 452:../../interpolator.c ****             {
 1683              		.loc 1 452 13 view .LVU465
 452:../../interpolator.c ****             {
 1684              		.loc 1 452 15 is_stmt 0 view .LVU466
 1685 0322 0021     		movs	r1, #0
 1686 0324 4046     		mov	r0, r8
 1687              	.LVL104:
 452:../../interpolator.c ****             {
 1688              		.loc 1 452 15 view .LVU467
 1689 0326 FFF7FEFF 		bl	__aeabi_fcmpgt
 1690              	.LVL105:
 1691 032a 0028     		cmp	r0, #0
 1692 032c 00F0C680 		beq	.L126
 455:../../interpolator.c ****             }
 1693              		.loc 1 455 17 is_stmt 1 view .LVU468
 455:../../interpolator.c ****             }
 1694              		.loc 1 455 55 is_stmt 0 view .LVU469
 1695 0330 824B     		ldr	r3, .L143+8
 1696 0332 1D68     		ldr	r5, [r3]
 1697 0334 686A     		ldr	r0, [r5, #36]	@ float
 455:../../interpolator.c ****             }
 1698              		.loc 1 455 35 view .LVU470
 1699 0336 0146     		mov	r1, r0
 1700 0338 FFF7FEFF 		bl	__aeabi_fadd
 1701              	.LVL106:
 455:../../interpolator.c ****             }
 1702              		.loc 1 455 70 view .LVU471
 1703 033c 5146     		mov	r1, r10
 1704 033e FFF7FEFF 		bl	__aeabi_fmul
 1705              	.LVL107:
 455:../../interpolator.c ****             }
 1706              		.loc 1 455 31 view .LVU472
 1707 0342 6969     		ldr	r1, [r5, #20]	@ float
 1708 0344 FFF7FEFF 		bl	__aeabi_fadd
 1709              	.LVL108:
 1710 0348 0546     		mov	r5, r0
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 50


 1711              	.LVL109:
 1712              	.L110:
 463:../../interpolator.c ****             itp_cur_plan_block->entry_feed_sqr = new_speed_sqr;
 1713              		.loc 1 463 13 is_stmt 1 view .LVU473
 463:../../interpolator.c ****             itp_cur_plan_block->entry_feed_sqr = new_speed_sqr;
 1714              		.loc 1 463 37 is_stmt 0 view .LVU474
 1715 034a 2846     		mov	r0, r5
 1716 034c FFF7FEFF 		bl	sqrtf
 1717              	.LVL110:
 1718 0350 0746     		mov	r7, r0
 1719              	.LVL111:
 463:../../interpolator.c ****             itp_cur_plan_block->entry_feed_sqr = new_speed_sqr;
 1720              		.loc 1 463 64 view .LVU475
 1721 0352 DFF8E881 		ldr	r8, .L143+8
 1722              	.LVL112:
 463:../../interpolator.c ****             itp_cur_plan_block->entry_feed_sqr = new_speed_sqr;
 1723              		.loc 1 463 64 view .LVU476
 1724 0356 D8F80030 		ldr	r3, [r8]
 1725 035a 5869     		ldr	r0, [r3, #20]	@ float
 1726 035c FFF7FEFF 		bl	sqrtf
 1727              	.LVL113:
 1728 0360 0146     		mov	r1, r0
 463:../../interpolator.c ****             itp_cur_plan_block->entry_feed_sqr = new_speed_sqr;
 1729              		.loc 1 463 62 view .LVU477
 1730 0362 3846     		mov	r0, r7
 1731 0364 FFF7FEFF 		bl	__aeabi_fadd
 1732              	.LVL114:
 463:../../interpolator.c ****             itp_cur_plan_block->entry_feed_sqr = new_speed_sqr;
 1733              		.loc 1 463 27 view .LVU478
 1734 0368 4FF07C51 		mov	r1, #1056964608
 1735 036c FFF7FEFF 		bl	__aeabi_fmul
 1736              	.LVL115:
 1737 0370 0746     		mov	r7, r0
 1738              	.LVL116:
 464:../../interpolator.c ****         }
 1739              		.loc 1 464 13 is_stmt 1 view .LVU479
 464:../../interpolator.c ****         }
 1740              		.loc 1 464 31 is_stmt 0 view .LVU480
 1741 0372 D8F80030 		ldr	r3, [r8]
 464:../../interpolator.c ****         }
 1742              		.loc 1 464 48 view .LVU481
 1743 0376 5D61     		str	r5, [r3, #20]	@ float
 1744              	.LVL117:
 1745              	.L107:
 464:../../interpolator.c ****         }
 1746              		.loc 1 464 48 view .LVU482
 1747              	.LBE54:
 468:../../interpolator.c ****         sgm->remaining_steps = steps;
 1748              		.loc 1 468 9 is_stmt 1 view .LVU483
 1749 0378 DFF8BC81 		ldr	r8, .L143+4
 1750 037c 4FEA8409 		lsl	r9, r4, #2
 1751 0380 04EB8405 		add	r5, r4, r4, lsl #2
 1752 0384 AD00     		lsls	r5, r5, #2
 1753 0386 0835     		adds	r5, r5, #8
 1754 0388 4544     		add	r5, r5, r8
 1755 038a 05F1020B 		add	fp, r5, #2
 1756 038e 6D4B     		ldr	r3, .L143+16
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 51


 1757 0390 1968     		ldr	r1, [r3]	@ float
 1758 0392 3846     		mov	r0, r7
 1759 0394 FFF7FEFF 		bl	__aeabi_fmul
 1760              	.LVL118:
 1761 0398 5A46     		mov	r2, fp
 1762 039a 2946     		mov	r1, r5
 1763 039c FFF7FEFF 		bl	mcu_freq_to_clocks
 1764              	.LVL119:
 469:../../interpolator.c ****         itp_cur_plan_block->distance -= partial_distance;
 1765              		.loc 1 469 9 view .LVU484
 469:../../interpolator.c ****         itp_cur_plan_block->distance -= partial_distance;
 1766              		.loc 1 469 30 is_stmt 0 view .LVU485
 1767 03a0 09EB040B 		add	fp, r9, r4
 1768 03a4 08EB8B0B 		add	fp, r8, fp, lsl #2
 1769 03a8 ABF80660 		strh	r6, [fp, #6]	@ movhi
 470:../../interpolator.c **** 
 1770              		.loc 1 470 9 is_stmt 1 view .LVU486
 470:../../interpolator.c **** 
 1771              		.loc 1 470 38 is_stmt 0 view .LVU487
 1772 03ac 634B     		ldr	r3, .L143+8
 1773 03ae 1D68     		ldr	r5, [r3]
 1774 03b0 5146     		mov	r1, r10
 1775 03b2 2869     		ldr	r0, [r5, #16]	@ float
 1776 03b4 FFF7FEFF 		bl	__aeabi_fsub
 1777              	.LVL120:
 1778 03b8 2861     		str	r0, [r5, #16]	@ float
 472:../../interpolator.c ****         #ifdef USE_SPINDLE
 1779              		.loc 1 472 9 is_stmt 1 view .LVU488
 472:../../interpolator.c ****         #ifdef USE_SPINDLE
 1780              		.loc 1 472 19 is_stmt 0 view .LVU489
 1781 03ba CBF80C70 		str	r7, [fp, #12]	@ float
 481:../../interpolator.c **** 
 1782              		.loc 1 481 9 is_stmt 1 view .LVU490
 481:../../interpolator.c **** 
 1783              		.loc 1 481 33 is_stmt 0 view .LVU491
 1784 03be BBF80620 		ldrh	r2, [fp, #6]
 481:../../interpolator.c **** 
 1785              		.loc 1 481 27 view .LVU492
 1786 03c2 614B     		ldr	r3, .L143+20
 1787 03c4 1C68     		ldr	r4, [r3]
 1788              	.LVL121:
 481:../../interpolator.c **** 
 1789              		.loc 1 481 27 view .LVU493
 1790 03c6 A41A     		subs	r4, r4, r2
 1791 03c8 1C60     		str	r4, [r3]
 483:../../interpolator.c ****         {
 1792              		.loc 1 483 9 is_stmt 1 view .LVU494
 483:../../interpolator.c ****         {
 1793              		.loc 1 483 31 is_stmt 0 view .LVU495
 1794 03ca 614B     		ldr	r3, .L143+28
 1795 03cc 1868     		ldr	r0, [r3]
 483:../../interpolator.c ****         {
 1796              		.loc 1 483 12 view .LVU496
 1797 03ce 8442     		cmp	r4, r0
 1798 03d0 00F08B80 		beq	.L135
 488:../../interpolator.c ****         {
 1799              		.loc 1 488 14 is_stmt 1 view .LVU497
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 52


 488:../../interpolator.c ****         {
 1800              		.loc 1 488 36 is_stmt 0 view .LVU498
 1801 03d4 5F4B     		ldr	r3, .L143+32
 1802 03d6 1868     		ldr	r0, [r3]
 488:../../interpolator.c ****         {
 1803              		.loc 1 488 17 view .LVU499
 1804 03d8 8442     		cmp	r4, r0
 1805 03da 00F09180 		beq	.L136
 1806              	.L113:
 493:../../interpolator.c **** 
 1807              		.loc 1 493 9 is_stmt 1 view .LVU500
 1808              	.LBB55:
 1809              	.LBI55:
 118:../../interpolator.c **** {
 1810              		.loc 1 118 20 view .LVU501
 1811              	.LBB56:
 120:../../interpolator.c ****     if (++itp_sgm_data_write == INTERPOLATOR_BUFFER_SIZE)
 1812              		.loc 1 120 5 view .LVU502
 120:../../interpolator.c ****     if (++itp_sgm_data_write == INTERPOLATOR_BUFFER_SIZE)
 1813              		.loc 1 120 23 is_stmt 0 view .LVU503
 1814 03de 5E4A     		ldr	r2, .L143+36
 1815 03e0 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1816 03e2 013B     		subs	r3, r3, #1
 1817 03e4 DBB2     		uxtb	r3, r3
 1818 03e6 1370     		strb	r3, [r2]
 121:../../interpolator.c ****     {
 1819              		.loc 1 121 5 is_stmt 1 view .LVU504
 121:../../interpolator.c ****     {
 1820              		.loc 1 121 9 is_stmt 0 view .LVU505
 1821 03e8 5C4A     		ldr	r2, .L143+40
 1822 03ea 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1823 03ec 0133     		adds	r3, r3, #1
 1824 03ee DBB2     		uxtb	r3, r3
 121:../../interpolator.c ****     {
 1825              		.loc 1 121 8 view .LVU506
 1826 03f0 1370     		strb	r3, [r2]
 1827 03f2 052B     		cmp	r3, #5
 1828 03f4 00F08C80 		beq	.L137
 1829              	.L114:
 1830              	.LBE56:
 1831              	.LBE55:
 495:../../interpolator.c ****         {
 1832              		.loc 1 495 9 is_stmt 1 view .LVU507
 495:../../interpolator.c ****         {
 1833              		.loc 1 495 12 is_stmt 0 view .LVU508
 1834 03f8 002C     		cmp	r4, #0
 1835 03fa 00F08D80 		beq	.L138
 1836              	.LVL122:
 1837              	.L115:
 495:../../interpolator.c ****         {
 1838              		.loc 1 495 12 view .LVU509
 1839              	.LBE66:
 230:../../interpolator.c ****     {
 1840              		.loc 1 230 11 is_stmt 1 view .LVU510
 1841              	.LBB67:
 1842              	.LBI67:
 132:../../interpolator.c **** {
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 53


 1843              		.loc 1 132 20 view .LVU511
 1844              	.LBB68:
 134:../../interpolator.c **** }
 1845              		.loc 1 134 5 view .LVU512
 134:../../interpolator.c **** }
 1846              		.loc 1 134 32 is_stmt 0 view .LVU513
 1847 03fe 564B     		ldr	r3, .L143+36
 1848 0400 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1849              	.LBE68:
 1850              	.LBE67:
 230:../../interpolator.c ****     {
 1851              		.loc 1 230 11 view .LVU514
 1852 0402 002B     		cmp	r3, #0
 1853 0404 3FF42AAE 		beq	.L89
 1854              	.LBB69:
 232:../../interpolator.c ****         {
 1855              		.loc 1 232 9 is_stmt 1 view .LVU515
 232:../../interpolator.c ****         {
 1856              		.loc 1 232 12 is_stmt 0 view .LVU516
 1857 0408 F020     		movs	r0, #240
 1858 040a FFF7FEFF 		bl	cnc_get_exec_state
 1859              	.LVL123:
 232:../../interpolator.c ****         {
 1860              		.loc 1 232 11 view .LVU517
 1861 040e 0028     		cmp	r0, #0
 1862 0410 7FF42EAE 		bne	.L76
 250:../../interpolator.c ****         {
 1863              		.loc 1 250 9 is_stmt 1 view .LVU518
 250:../../interpolator.c ****         {
 1864              		.loc 1 250 32 is_stmt 0 view .LVU519
 1865 0414 494B     		ldr	r3, .L143+8
 1866 0416 1B68     		ldr	r3, [r3]
 250:../../interpolator.c ****         {
 1867              		.loc 1 250 12 view .LVU520
 1868 0418 002B     		cmp	r3, #0
 1869 041a 3FF4F5AD 		beq	.L139
 1870              	.L79:
 330:../../interpolator.c ****         {
 1871              		.loc 1 330 9 is_stmt 1 view .LVU521
 1872              	.LBB58:
 1873              	.LBI58:
 132:../../interpolator.c **** {
 1874              		.loc 1 132 20 view .LVU522
 1875              	.LBB59:
 134:../../interpolator.c **** }
 1876              		.loc 1 134 5 view .LVU523
 134:../../interpolator.c **** }
 1877              		.loc 1 134 32 is_stmt 0 view .LVU524
 1878 041e 4E4B     		ldr	r3, .L143+36
 1879 0420 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1880              	.LBE59:
 1881              	.LBE58:
 330:../../interpolator.c ****         {
 1882              		.loc 1 330 11 view .LVU525
 1883 0422 002B     		cmp	r3, #0
 1884 0424 3FF41AAE 		beq	.L89
 338:../../interpolator.c ****         sgm->block = &itp_blk_data[itp_blk_data_write];
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 54


 1885              		.loc 1 338 9 is_stmt 1 view .LVU526
 338:../../interpolator.c ****         sgm->block = &itp_blk_data[itp_blk_data_write];
 1886              		.loc 1 338 28 is_stmt 0 view .LVU527
 1887 0428 4C4B     		ldr	r3, .L143+40
 1888 042a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1889 042c DCB2     		uxtb	r4, r3
 1890              	.LVL124:
 339:../../interpolator.c ****         //sgm->update_speed = true;
 1891              		.loc 1 339 9 is_stmt 1 view .LVU528
 339:../../interpolator.c ****         //sgm->update_speed = true;
 1892              		.loc 1 339 35 is_stmt 0 view .LVU529
 1893 042e 4C4A     		ldr	r2, .L143+44
 1894 0430 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
 339:../../interpolator.c ****         //sgm->update_speed = true;
 1895              		.loc 1 339 22 view .LVU530
 1896 0432 4C4A     		ldr	r2, .L143+48
 1897 0434 02EB4112 		add	r2, r2, r1, lsl #5
 339:../../interpolator.c ****         //sgm->update_speed = true;
 1898              		.loc 1 339 20 view .LVU531
 1899 0438 03EB8303 		add	r3, r3, r3, lsl #2
 1900 043c 3E49     		ldr	r1, .L143+4
 1901 043e 41F82320 		str	r2, [r1, r3, lsl #2]
 343:../../interpolator.c ****         {
 1902              		.loc 1 343 9 is_stmt 1 view .LVU532
 343:../../interpolator.c ****         {
 1903              		.loc 1 343 13 is_stmt 0 view .LVU533
 1904 0442 0220     		movs	r0, #2
 1905 0444 FFF7FEFF 		bl	cnc_get_exec_state
 1906              	.LVL125:
 343:../../interpolator.c ****         {
 1907              		.loc 1 343 12 view .LVU534
 1908 0448 0028     		cmp	r0, #0
 1909 044a 3FF47AAE 		beq	.L90
 346:../../interpolator.c ****             deaccel_from = unprocessed_steps;
 1910              		.loc 1 346 13 is_stmt 1 view .LVU535
 346:../../interpolator.c ****             deaccel_from = unprocessed_steps;
 1911              		.loc 1 346 25 is_stmt 0 view .LVU536
 1912 044e 3E4B     		ldr	r3, .L143+20
 1913 0450 1B68     		ldr	r3, [r3]
 1914 0452 3F4A     		ldr	r2, .L143+28
 1915 0454 1360     		str	r3, [r2]
 347:../../interpolator.c ****             itp_needs_update = true;
 1916              		.loc 1 347 13 is_stmt 1 view .LVU537
 347:../../interpolator.c ****             itp_needs_update = true;
 1917              		.loc 1 347 26 is_stmt 0 view .LVU538
 1918 0456 3F4A     		ldr	r2, .L143+32
 1919 0458 1360     		str	r3, [r2]
 348:../../interpolator.c ****         }
 1920              		.loc 1 348 13 is_stmt 1 view .LVU539
 348:../../interpolator.c ****         }
 1921              		.loc 1 348 30 is_stmt 0 view .LVU540
 1922 045a 434B     		ldr	r3, .L143+52
 1923 045c 0122     		movs	r2, #1
 1924 045e 1A70     		strb	r2, [r3]
 1925              	.L91:
 378:../../interpolator.c ****         float profile_steps_limit;
 1926              		.loc 1 378 9 is_stmt 1 view .LVU541
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 55


 379:../../interpolator.c ****         //acceleration profile
 1927              		.loc 1 379 9 view .LVU542
 381:../../interpolator.c ****         {
 1928              		.loc 1 381 9 view .LVU543
 381:../../interpolator.c ****         {
 1929              		.loc 1 381 31 is_stmt 0 view .LVU544
 1930 0460 394B     		ldr	r3, .L143+20
 1931 0462 1B68     		ldr	r3, [r3]
 1932 0464 3A4A     		ldr	r2, .L143+28
 1933 0466 1068     		ldr	r0, [r2]
 381:../../interpolator.c ****         {
 1934              		.loc 1 381 12 view .LVU545
 1935 0468 8342     		cmp	r3, r0
 1936 046a 08D9     		bls	.L98
 394:../../interpolator.c ****             profile_steps_limit = accel_until;
 1937              		.loc 1 394 13 is_stmt 1 view .LVU546
 394:../../interpolator.c ****             profile_steps_limit = accel_until;
 1938              		.loc 1 394 29 is_stmt 0 view .LVU547
 1939 046c 3F4B     		ldr	r3, .L143+56
 1940 046e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 394:../../interpolator.c ****             profile_steps_limit = accel_until;
 1941              		.loc 1 394 74 view .LVU548
 1942 0470 002B     		cmp	r3, #0
 1943 0472 7FF4FFAE 		bne	.L99
 394:../../interpolator.c ****             profile_steps_limit = accel_until;
 1944              		.loc 1 394 74 discriminator 1 view .LVU549
 1945 0476 2F4B     		ldr	r3, .L143
 1946 0478 D3F80080 		ldr	r8, [r3]	@ float
 1947 047c FFE6     		b	.L100
 1948              	.L98:
 399:../../interpolator.c ****         {
 1949              		.loc 1 399 14 is_stmt 1 view .LVU550
 399:../../interpolator.c ****         {
 1950              		.loc 1 399 36 is_stmt 0 view .LVU551
 1951 047e 354A     		ldr	r2, .L143+32
 1952 0480 1068     		ldr	r0, [r2]
 399:../../interpolator.c ****         {
 1953              		.loc 1 399 17 view .LVU552
 1954 0482 8342     		cmp	r3, r0
 1955 0484 0CD9     		bls	.L102
 406:../../interpolator.c ****             profile_steps_limit = deaccel_from;
 1956              		.loc 1 406 13 is_stmt 1 view .LVU553
 1957              	.LVL126:
 407:../../interpolator.c ****             sgm->update_speed = false;
 1958              		.loc 1 407 13 view .LVU554
 407:../../interpolator.c ****             sgm->update_speed = false;
 1959              		.loc 1 407 33 is_stmt 0 view .LVU555
 1960 0486 FFF7FEFF 		bl	__aeabi_ui2f
 1961              	.LVL127:
 1962 048a 0546     		mov	r5, r0
 1963              	.LVL128:
 408:../../interpolator.c ****         }
 1964              		.loc 1 408 13 is_stmt 1 view .LVU556
 408:../../interpolator.c ****         }
 1965              		.loc 1 408 31 is_stmt 0 view .LVU557
 1966 048c 04EB8403 		add	r3, r4, r4, lsl #2
 1967 0490 294A     		ldr	r2, .L143+4
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 56


 1968 0492 02EB8303 		add	r3, r2, r3, lsl #2
 1969 0496 0022     		movs	r2, #0
 1970 0498 1A74     		strb	r2, [r3, #16]
 406:../../interpolator.c ****             profile_steps_limit = deaccel_from;
 1971              		.loc 1 406 26 view .LVU558
 1972 049a 4FF00008 		mov	r8, #0
 1973 049e F8E6     		b	.L101
 1974              	.LVL129:
 1975              	.L102:
 412:../../interpolator.c ****             profile_steps_limit = 0;
 1976              		.loc 1 412 13 is_stmt 1 view .LVU559
 412:../../interpolator.c ****             profile_steps_limit = 0;
 1977              		.loc 1 412 28 is_stmt 0 view .LVU560
 1978 04a0 244B     		ldr	r3, .L143
 1979 04a2 D3F80080 		ldr	r8, [r3]	@ float
 412:../../interpolator.c ****             profile_steps_limit = 0;
 1980              		.loc 1 412 26 view .LVU561
 1981 04a6 08F10048 		add	r8, r8, #-2147483648
 1982              	.LVL130:
 413:../../interpolator.c ****             sgm->update_speed = true;
 1983              		.loc 1 413 13 is_stmt 1 view .LVU562
 414:../../interpolator.c ****         }
 1984              		.loc 1 414 13 view .LVU563
 414:../../interpolator.c ****         }
 1985              		.loc 1 414 31 is_stmt 0 view .LVU564
 1986 04aa 04EB8403 		add	r3, r4, r4, lsl #2
 1987 04ae 224A     		ldr	r2, .L143+4
 1988 04b0 02EB8303 		add	r3, r2, r3, lsl #2
 1989 04b4 0122     		movs	r2, #1
 1990 04b6 1A74     		strb	r2, [r3, #16]
 413:../../interpolator.c ****             sgm->update_speed = true;
 1991              		.loc 1 413 33 view .LVU565
 1992 04b8 0025     		movs	r5, #0
 1993 04ba EAE6     		b	.L101
 1994              	.LVL131:
 1995              	.L126:
 1996              	.LBB60:
 460:../../interpolator.c ****                 new_speed_sqr = MAX(new_speed_sqr, 0); //avoids rounding errors since speed is alwa
 1997              		.loc 1 460 17 is_stmt 1 view .LVU566
 460:../../interpolator.c ****                 new_speed_sqr = MAX(new_speed_sqr, 0); //avoids rounding errors since speed is alwa
 1998              		.loc 1 460 51 is_stmt 0 view .LVU567
 1999 04bc 1F4B     		ldr	r3, .L143+8
 2000 04be 1B68     		ldr	r3, [r3]
 2001 04c0 5D69     		ldr	r5, [r3, #20]	@ float
 460:../../interpolator.c ****                 new_speed_sqr = MAX(new_speed_sqr, 0); //avoids rounding errors since speed is alwa
 2002              		.loc 1 460 93 view .LVU568
 2003 04c2 586A     		ldr	r0, [r3, #36]	@ float
 460:../../interpolator.c ****                 new_speed_sqr = MAX(new_speed_sqr, 0); //avoids rounding errors since speed is alwa
 2004              		.loc 1 460 73 view .LVU569
 2005 04c4 0146     		mov	r1, r0
 2006 04c6 FFF7FEFF 		bl	__aeabi_fadd
 2007              	.LVL132:
 460:../../interpolator.c ****                 new_speed_sqr = MAX(new_speed_sqr, 0); //avoids rounding errors since speed is alwa
 2008              		.loc 1 460 108 view .LVU570
 2009 04ca 5146     		mov	r1, r10
 2010 04cc FFF7FEFF 		bl	__aeabi_fmul
 2011              	.LVL133:
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 57


 2012 04d0 0146     		mov	r1, r0
 460:../../interpolator.c ****                 new_speed_sqr = MAX(new_speed_sqr, 0); //avoids rounding errors since speed is alwa
 2013              		.loc 1 460 31 view .LVU571
 2014 04d2 2846     		mov	r0, r5
 2015 04d4 FFF7FEFF 		bl	__aeabi_fsub
 2016              	.LVL134:
 2017 04d8 0546     		mov	r5, r0
 2018              	.LVL135:
 461:../../interpolator.c ****             }
 2019              		.loc 1 461 17 is_stmt 1 view .LVU572
 461:../../interpolator.c ****             }
 2020              		.loc 1 461 33 is_stmt 0 view .LVU573
 2021 04da 0021     		movs	r1, #0
 2022 04dc FFF7FEFF 		bl	__aeabi_fcmpgt
 2023              	.LVL136:
 461:../../interpolator.c ****             }
 2024              		.loc 1 461 33 view .LVU574
 2025 04e0 0028     		cmp	r0, #0
 2026 04e2 7FF432AF 		bne	.L110
 2027 04e6 0025     		movs	r5, #0
 2028              	.LVL137:
 461:../../interpolator.c ****             }
 2029              		.loc 1 461 33 view .LVU575
 2030 04e8 2FE7     		b	.L110
 2031              	.LVL138:
 2032              	.L135:
 461:../../interpolator.c ****             }
 2033              		.loc 1 461 33 view .LVU576
 2034              	.LBE60:
 485:../../interpolator.c ****             itp_cur_plan_block->distance = min_step_distance * accel_until;
 2035              		.loc 1 485 13 is_stmt 1 view .LVU577
 485:../../interpolator.c ****             itp_cur_plan_block->distance = min_step_distance * accel_until;
 2036              		.loc 1 485 48 is_stmt 0 view .LVU578
 2037 04ea 214B     		ldr	r3, .L143+60
 2038 04ec 1B68     		ldr	r3, [r3]	@ float
 2039 04ee 6B61     		str	r3, [r5, #20]	@ float
 486:../../interpolator.c ****         }
 2040              		.loc 1 486 13 is_stmt 1 view .LVU579
 486:../../interpolator.c ****         }
 2041              		.loc 1 486 62 is_stmt 0 view .LVU580
 2042 04f0 FFF7FEFF 		bl	__aeabi_ui2f
 2043              	.LVL139:
 2044 04f4 154B     		ldr	r3, .L143+24
 2045 04f6 1968     		ldr	r1, [r3]	@ float
 2046 04f8 FFF7FEFF 		bl	__aeabi_fmul
 2047              	.LVL140:
 486:../../interpolator.c ****         }
 2048              		.loc 1 486 42 view .LVU581
 2049 04fc 2861     		str	r0, [r5, #16]	@ float
 2050 04fe 6EE7     		b	.L113
 2051              	.L136:
 490:../../interpolator.c ****         }
 2052              		.loc 1 490 13 is_stmt 1 view .LVU582
 490:../../interpolator.c ****         }
 2053              		.loc 1 490 62 is_stmt 0 view .LVU583
 2054 0500 FFF7FEFF 		bl	__aeabi_ui2f
 2055              	.LVL141:
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 58


 2056 0504 114B     		ldr	r3, .L143+24
 2057 0506 1968     		ldr	r1, [r3]	@ float
 2058 0508 FFF7FEFF 		bl	__aeabi_fmul
 2059              	.LVL142:
 490:../../interpolator.c ****         }
 2060              		.loc 1 490 42 view .LVU584
 2061 050c 2861     		str	r0, [r5, #16]	@ float
 2062 050e 66E7     		b	.L113
 2063              	.L137:
 2064              	.LBB61:
 2065              	.LBB57:
 123:../../interpolator.c ****     }
 2066              		.loc 1 123 9 is_stmt 1 view .LVU585
 123:../../interpolator.c ****     }
 2067              		.loc 1 123 28 is_stmt 0 view .LVU586
 2068 0510 1346     		mov	r3, r2
 2069 0512 0022     		movs	r2, #0
 2070 0514 1A70     		strb	r2, [r3]
 2071 0516 6FE7     		b	.L114
 2072              	.L138:
 2073              	.LBE57:
 2074              	.LBE61:
 497:../../interpolator.c ****             itp_cur_plan_block = NULL;
 2075              		.loc 1 497 13 is_stmt 1 view .LVU587
 2076              	.LBB62:
 2077              	.LBI62:
 160:../../interpolator.c **** {
 2078              		.loc 1 160 20 view .LVU588
 2079              	.LBB63:
 163:../../interpolator.c ****     {
 2080              		.loc 1 163 5 view .LVU589
 163:../../interpolator.c ****     {
 2081              		.loc 1 163 9 is_stmt 0 view .LVU590
 2082 0518 114A     		ldr	r2, .L143+44
 2083 051a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2084 051c 0133     		adds	r3, r3, #1
 2085 051e DBB2     		uxtb	r3, r3
 163:../../interpolator.c ****     {
 2086              		.loc 1 163 8 view .LVU591
 2087 0520 1370     		strb	r3, [r2]
 2088 0522 052B     		cmp	r3, #5
 2089 0524 26D0     		beq	.L140
 2090              	.L116:
 2091              	.LBE63:
 2092              	.LBE62:
 498:../../interpolator.c ****             planner_discard_block(); //discards planner block
 2093              		.loc 1 498 13 is_stmt 1 view .LVU592
 498:../../interpolator.c ****             planner_discard_block(); //discards planner block
 2094              		.loc 1 498 32 is_stmt 0 view .LVU593
 2095 0526 054B     		ldr	r3, .L143+8
 2096 0528 0022     		movs	r2, #0
 2097 052a 1A60     		str	r2, [r3]
 499:../../interpolator.c ****             //accel_profile = 0; //no updates necessary to planner
 2098              		.loc 1 499 13 is_stmt 1 view .LVU594
 2099 052c FFF7FEFF 		bl	planner_discard_block
 2100              	.LVL143:
 2101 0530 65E7     		b	.L115
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 59


 2102              	.L144:
 2103 0532 00BF     		.align	2
 2104              	.L143:
 2105 0534 00000000 		.word	.LANCHOR17
 2106 0538 00000000 		.word	.LANCHOR7
 2107 053c 00000000 		.word	.LANCHOR9
 2108 0540 0AD7233C 		.word	1008981770
 2109 0544 00000000 		.word	.LANCHOR14
 2110 0548 00000000 		.word	.LANCHOR16
 2111 054c 00000000 		.word	.LANCHOR15
 2112 0550 00000000 		.word	.LANCHOR18
 2113 0554 00000000 		.word	.LANCHOR19
 2114 0558 00000000 		.word	.LANCHOR6
 2115 055c 00000000 		.word	.LANCHOR4
 2116 0560 00000000 		.word	.LANCHOR2
 2117 0564 00000000 		.word	.LANCHOR3
 2118 0568 00000000 		.word	.LANCHOR8
 2119 056c 00000000 		.word	.LANCHOR21
 2120 0570 00000000 		.word	.LANCHOR20
 2121              	.L140:
 2122              	.LBB65:
 2123              	.LBB64:
 165:../../interpolator.c ****     }
 2124              		.loc 1 165 9 view .LVU595
 165:../../interpolator.c ****     }
 2125              		.loc 1 165 28 is_stmt 0 view .LVU596
 2126 0574 1346     		mov	r3, r2
 2127 0576 0022     		movs	r2, #0
 2128 0578 1A70     		strb	r2, [r3]
 2129 057a D4E7     		b	.L116
 2130              	.LVL144:
 2131              	.L130:
 165:../../interpolator.c ****     }
 2132              		.loc 1 165 28 view .LVU597
 2133              	.LBE64:
 2134              	.LBE65:
 2135              	.LBE69:
 511:../../interpolator.c ****         mcu_start_step_ISR(itp_sgm_data[itp_sgm_data_read].clocks_per_tick, itp_sgm_data[itp_sgm_da
 2136              		.loc 1 511 9 is_stmt 1 view .LVU598
 2137 057c 0120     		movs	r0, #1
 2138 057e FFF7FEFF 		bl	cnc_set_exec_state
 2139              	.LVL145:
 512:../../interpolator.c ****     }
 2140              		.loc 1 512 9 view .LVU599
 2141 0582 064B     		ldr	r3, .L145
 2142 0584 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2143 0586 064A     		ldr	r2, .L145+4
 2144 0588 03EB8301 		add	r1, r3, r3, lsl #2
 2145 058c 02EB8101 		add	r1, r2, r1, lsl #2
 2146 0590 0B46     		mov	r3, r1
 2147 0592 897A     		ldrb	r1, [r1, #10]	@ zero_extendqisi2
 2148 0594 1889     		ldrh	r0, [r3, #8]
 2149 0596 FFF7FEFF 		bl	mcu_start_step_ISR
 2150              	.LVL146:
 2151 059a 69E5     		b	.L76
 2152              	.L146:
 2153              		.align	2
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 60


 2154              	.L145:
 2155 059c 00000000 		.word	.LANCHOR5
 2156 05a0 00000000 		.word	.LANCHOR7
 2157              		.cfi_endproc
 2158              	.LFE76:
 2160              		.section	.bss.accel_until.7695,"aw",%nobits
 2161              		.align	2
 2162              		.set	.LANCHOR18,. + 0
 2165              	accel_until.7695:
 2166 0000 00000000 		.space	4
 2167              		.section	.bss.deaccel_from.7696,"aw",%nobits
 2168              		.align	2
 2169              		.set	.LANCHOR19,. + 0
 2172              	deaccel_from.7696:
 2173 0000 00000000 		.space	4
 2174              		.section	.bss.half_speed_change.7698,"aw",%nobits
 2175              		.align	2
 2176              		.set	.LANCHOR17,. + 0
 2179              	half_speed_change.7698:
 2180 0000 00000000 		.space	4
 2181              		.section	.bss.initial_accel_negative.7699,"aw",%nobits
 2182              		.set	.LANCHOR21,. + 0
 2185              	initial_accel_negative.7699:
 2186 0000 00       		.space	1
 2187              		.section	.bss.itp_blk_data,"aw",%nobits
 2188              		.align	2
 2189              		.set	.LANCHOR3,. + 0
 2192              	itp_blk_data:
 2193 0000 00000000 		.space	160
 2193      00000000 
 2193      00000000 
 2193      00000000 
 2193      00000000 
 2194              		.section	.bss.itp_blk_data_write,"aw",%nobits
 2195              		.set	.LANCHOR2,. + 0
 2198              	itp_blk_data_write:
 2199 0000 00       		.space	1
 2200              		.section	.bss.itp_busy,"aw",%nobits
 2201              		.set	.LANCHOR0,. + 0
 2204              	itp_busy:
 2205 0000 00       		.space	1
 2206              		.section	.bss.itp_cur_plan_block,"aw",%nobits
 2207              		.align	2
 2208              		.set	.LANCHOR9,. + 0
 2211              	itp_cur_plan_block:
 2212 0000 00000000 		.space	4
 2213              		.section	.bss.itp_isr_finnished,"aw",%nobits
 2214              		.set	.LANCHOR1,. + 0
 2217              	itp_isr_finnished:
 2218 0000 00       		.space	1
 2219              		.section	.bss.itp_needs_update,"aw",%nobits
 2220              		.set	.LANCHOR8,. + 0
 2223              	itp_needs_update:
 2224 0000 00       		.space	1
 2225              		.section	.bss.itp_rt_spindle,"aw",%nobits
 2228              	itp_rt_spindle:
 2229 0000 00       		.space	1
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 61


 2230              		.section	.bss.itp_rt_step_pos,"aw",%nobits
 2231              		.align	2
 2232              		.set	.LANCHOR12,. + 0
 2235              	itp_rt_step_pos:
 2236 0000 00000000 		.space	12
 2236      00000000 
 2236      00000000 
 2237              		.section	.bss.itp_running_sgm,"aw",%nobits
 2238              		.align	2
 2239              		.set	.LANCHOR10,. + 0
 2242              	itp_running_sgm:
 2243 0000 00000000 		.space	4
 2244              		.section	.bss.itp_sgm_data,"aw",%nobits
 2245              		.align	2
 2246              		.set	.LANCHOR7,. + 0
 2249              	itp_sgm_data:
 2250 0000 00000000 		.space	100
 2250      00000000 
 2250      00000000 
 2250      00000000 
 2250      00000000 
 2251              		.section	.bss.itp_sgm_data_read,"aw",%nobits
 2252              		.set	.LANCHOR5,. + 0
 2255              	itp_sgm_data_read:
 2256 0000 00       		.space	1
 2257              		.section	.bss.itp_sgm_data_slots,"aw",%nobits
 2258              		.set	.LANCHOR6,. + 0
 2261              	itp_sgm_data_slots:
 2262 0000 00       		.space	1
 2263              		.section	.bss.itp_sgm_data_write,"aw",%nobits
 2264              		.set	.LANCHOR4,. + 0
 2267              	itp_sgm_data_write:
 2268 0000 00       		.space	1
 2269              		.section	.bss.itp_step_pos,"aw",%nobits
 2270              		.align	2
 2271              		.set	.LANCHOR11,. + 0
 2274              	itp_step_pos:
 2275 0000 00000000 		.space	12
 2275      00000000 
 2275      00000000 
 2276              		.section	.bss.junction_speed_sqr.7697,"aw",%nobits
 2277              		.align	2
 2278              		.set	.LANCHOR20,. + 0
 2281              	junction_speed_sqr.7697:
 2282 0000 00000000 		.space	4
 2283              		.section	.bss.min_step_distance.7693,"aw",%nobits
 2284              		.align	2
 2285              		.set	.LANCHOR15,. + 0
 2288              	min_step_distance.7693:
 2289 0000 00000000 		.space	4
 2290              		.section	.bss.stepbits.7755,"aw",%nobits
 2291              		.set	.LANCHOR13,. + 0
 2294              	stepbits.7755:
 2295 0000 00       		.space	1
 2296              		.section	.bss.steps_per_mm.7694,"aw",%nobits
 2297              		.align	2
 2298              		.set	.LANCHOR14,. + 0
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 62


 2301              	steps_per_mm.7694:
 2302 0000 00000000 		.space	4
 2303              		.section	.bss.unprocessed_steps.7700,"aw",%nobits
 2304              		.align	2
 2305              		.set	.LANCHOR16,. + 0
 2308              	unprocessed_steps.7700:
 2309 0000 00000000 		.space	4
 2310              		.text
 2311              	.Letext0:
 2312              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 2313              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\lib\\gcc\\arm-none
 2314              		.file 4 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 2315              		.file 5 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 2316              		.file 6 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 2317              		.file 7 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 2318              		.file 8 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 2319              		.file 9 "Drivers/CMSIS/Include/core_cm3.h"
 2320              		.file 10 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 2321              		.file 11 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 2322              		.file 12 "../../settings.h"
 2323              		.file 13 "../../planner.h"
 2324              		.file 14 "../../mcu.h"
 2325              		.file 15 "../../io_control.h"
 2326              		.file 16 "../../cnc.h"
 2327              		.file 17 "../../kinematics.h"
 2328              		.file 18 "<built-in>"
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 63


DEFINED SYMBOLS
                            *ABS*:00000000 interpolator.c
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:16     .text.itp_init:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:24     .text.itp_init:00000000 itp_init
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:96     .text.itp_init:00000038 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:108    .text.itp_update:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:115    .text.itp_update:00000000 itp_update
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:132    .text.itp_update:00000008 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:137    .text.itp_stop:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:144    .text.itp_stop:00000000 itp_stop
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:168    .text.itp_clear:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:175    .text.itp_clear:00000000 itp_clear
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:237    .text.itp_clear:00000034 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:250    .text.itp_get_rt_position:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:257    .text.itp_get_rt_position:00000000 itp_get_rt_position
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:298    .text.itp_get_rt_position:0000001c $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:303    .text.itp_reset_rt_position:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:310    .text.itp_reset_rt_position:00000000 itp_reset_rt_position
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:405    .text.itp_reset_rt_position:00000060 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:411    .text.itp_get_rt_feed:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:418    .text.itp_get_rt_feed:00000000 itp_get_rt_feed
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:473    .text.itp_get_rt_feed:00000030 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:480    .text.itp_step_reset_isr:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:487    .text.itp_step_reset_isr:00000000 itp_step_reset_isr
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:603    .text.itp_step_reset_isr:0000006c $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:614    .text.itp_step_isr:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:621    .text.itp_step_isr:00000000 itp_step_isr
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:897    .text.itp_step_isr:00000134 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:909    .text.itp_delay:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:916    .text.itp_delay:00000000 itp_delay
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:1025   .text.itp_delay:0000007c $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:1043   .text.itp_run:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:1050   .text.itp_run:00000000 itp_run
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:1526   .text.itp_run:00000238 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:1546   .text.itp_run:00000274 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2105   .text.itp_run:00000534 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2126   .text.itp_run:00000574 $t
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2155   .text.itp_run:0000059c $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2161   .bss.accel_until.7695:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2165   .bss.accel_until.7695:00000000 accel_until.7695
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2168   .bss.deaccel_from.7696:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2172   .bss.deaccel_from.7696:00000000 deaccel_from.7696
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2175   .bss.half_speed_change.7698:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2179   .bss.half_speed_change.7698:00000000 half_speed_change.7698
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2185   .bss.initial_accel_negative.7699:00000000 initial_accel_negative.7699
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2186   .bss.initial_accel_negative.7699:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2188   .bss.itp_blk_data:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2192   .bss.itp_blk_data:00000000 itp_blk_data
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2198   .bss.itp_blk_data_write:00000000 itp_blk_data_write
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2199   .bss.itp_blk_data_write:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2204   .bss.itp_busy:00000000 itp_busy
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2205   .bss.itp_busy:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2207   .bss.itp_cur_plan_block:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2211   .bss.itp_cur_plan_block:00000000 itp_cur_plan_block
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2217   .bss.itp_isr_finnished:00000000 itp_isr_finnished
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2218   .bss.itp_isr_finnished:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2223   .bss.itp_needs_update:00000000 itp_needs_update
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 64


C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2224   .bss.itp_needs_update:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2228   .bss.itp_rt_spindle:00000000 itp_rt_spindle
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2229   .bss.itp_rt_spindle:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2231   .bss.itp_rt_step_pos:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2235   .bss.itp_rt_step_pos:00000000 itp_rt_step_pos
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2238   .bss.itp_running_sgm:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2242   .bss.itp_running_sgm:00000000 itp_running_sgm
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2245   .bss.itp_sgm_data:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2249   .bss.itp_sgm_data:00000000 itp_sgm_data
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2255   .bss.itp_sgm_data_read:00000000 itp_sgm_data_read
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2256   .bss.itp_sgm_data_read:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2261   .bss.itp_sgm_data_slots:00000000 itp_sgm_data_slots
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2262   .bss.itp_sgm_data_slots:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2267   .bss.itp_sgm_data_write:00000000 itp_sgm_data_write
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2268   .bss.itp_sgm_data_write:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2270   .bss.itp_step_pos:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2274   .bss.itp_step_pos:00000000 itp_step_pos
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2277   .bss.junction_speed_sqr.7697:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2281   .bss.junction_speed_sqr.7697:00000000 junction_speed_sqr.7697
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2284   .bss.min_step_distance.7693:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2288   .bss.min_step_distance.7693:00000000 min_step_distance.7693
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2294   .bss.stepbits.7755:00000000 stepbits.7755
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2295   .bss.stepbits.7755:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2297   .bss.steps_per_mm.7694:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2301   .bss.steps_per_mm.7694:00000000 steps_per_mm.7694
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2304   .bss.unprocessed_steps.7700:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s:2308   .bss.unprocessed_steps.7700:00000000 unprocessed_steps.7700

UNDEFINED SYMBOLS
memset
mcu_step_stop_ISR
cnc_clear_exec_state
kinematics_apply_forward
kinematics_apply_inverse
g_settings
cnc_get_exec_state
io_set_steps
io_set_dirs
mcu_change_step_ISR
io_toggle_steps
mcu_enable_interrupts
mcu_disable_interrupts
cnc_set_exec_state
mcu_freq_to_clocks
__aeabi_fcmpeq
__aeabi_ui2f
__aeabi_fdiv
__aeabi_fmul
__aeabi_fsub
__aeabi_fcmpgt
__aeabi_f2uiz
__aeabi_fcmplt
__aeabi_fadd
__aeabi_i2f
planner_buffer_is_empty
planner_get_block
planner_discard_block
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\cchCsBRt.s 			page 65


planner_get_block_exit_speed_sqr
planner_get_block_top_speed
floorf
sqrtf
mcu_start_step_ISR
