ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"serial.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.serial_init,"ax",%progbits
  16              		.align	1
  17              		.global	serial_init
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	serial_init:
  25              	.LFB65:
  26              		.file 1 "../../serial.c"
   1:../../serial.c **** /*
   2:../../serial.c **** 	Name: serial.c
   3:../../serial.c **** 	Description: Serial communication basic read/write functions µCNC.
   4:../../serial.c **** 
   5:../../serial.c **** 	Copyright: Copyright (c) João Martins
   6:../../serial.c **** 	Author: João Martins
   7:../../serial.c **** 	Date: 30/12/2019
   8:../../serial.c **** 
   9:../../serial.c **** 	µCNC is free software: you can redistribute it and/or modify
  10:../../serial.c **** 	it under the terms of the GNU General Public License as published by
  11:../../serial.c **** 	the Free Software Foundation, either version 3 of the License, or
  12:../../serial.c **** 	(at your option) any later version. Please see <http://www.gnu.org/licenses/>
  13:../../serial.c **** 
  14:../../serial.c **** 	µCNC is distributed WITHOUT ANY WARRANTY;
  15:../../serial.c **** 	Also without the implied warranty of	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  16:../../serial.c **** 	See the	GNU General Public License for more details.
  17:../../serial.c **** */
  18:../../serial.c **** 
  19:../../serial.c **** #include "grbl_interface.h"
  20:../../serial.c **** #include "settings.h"
  21:../../serial.c **** #include "mcudefs.h"
  22:../../serial.c **** #include "mcu.h"
  23:../../serial.c **** #include "io_control.h"
  24:../../serial.c **** #include "cnc.h"
  25:../../serial.c **** #include "serial.h"
  26:../../serial.c **** #include "utils.h"
  27:../../serial.c **** 
  28:../../serial.c **** #include <math.h>
  29:../../serial.c **** 
  30:../../serial.c **** static unsigned char serial_rx_buffer[RX_BUFFER_SIZE];
  31:../../serial.c **** volatile static uint8_t serial_rx_count;
  32:../../serial.c **** static uint8_t serial_rx_read;
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 2


  33:../../serial.c **** volatile static uint8_t serial_rx_write;
  34:../../serial.c **** 
  35:../../serial.c **** static unsigned char serial_tx_buffer[TX_BUFFER_SIZE];
  36:../../serial.c **** volatile static uint8_t serial_tx_read;
  37:../../serial.c **** static uint8_t serial_tx_write;
  38:../../serial.c **** volatile static uint8_t serial_tx_count;
  39:../../serial.c **** 
  40:../../serial.c **** static uint8_t serial_read_select;
  41:../../serial.c **** static uint16_t serial_read_index;
  42:../../serial.c **** 
  43:../../serial.c **** //static void serial_rx_clear();
  44:../../serial.c **** 
  45:../../serial.c **** void serial_init(void)
  46:../../serial.c **** {
  27              		.loc 1 46 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  47:../../serial.c **** #ifdef FORCE_GLOBALS_TO_0
  48:../../serial.c ****     serial_rx_write = 0;
  49:../../serial.c ****     serial_rx_read = 0;
  50:../../serial.c ****     serial_rx_count = 0;
  51:../../serial.c **** 
  52:../../serial.c ****     serial_tx_read = 0;
  53:../../serial.c ****     serial_tx_write = 0;
  54:../../serial.c ****     serial_tx_count = 0;
  55:../../serial.c **** 
  56:../../serial.c ****     //resets buffers
  57:../../serial.c ****     memset(&serial_rx_buffer, 0, sizeof(serial_rx_buffer));
  58:../../serial.c ****     memset(&serial_tx_buffer, 0, sizeof(serial_tx_buffer));
  59:../../serial.c **** #endif
  60:../../serial.c **** }
  32              		.loc 1 60 1 view .LVU1
  33 0000 7047     		bx	lr
  34              		.cfi_endproc
  35              	.LFE65:
  37              		.section	.text.serial_rx_is_empty,"ax",%progbits
  38              		.align	1
  39              		.global	serial_rx_is_empty
  40              		.syntax unified
  41              		.thumb
  42              		.thumb_func
  43              		.fpu softvfp
  45              	serial_rx_is_empty:
  46              	.LFB66:
  61:../../serial.c **** 
  62:../../serial.c **** bool serial_rx_is_empty(void)
  63:../../serial.c **** {
  47              		.loc 1 63 1 view -0
  48              		.cfi_startproc
  49              		@ args = 0, pretend = 0, frame = 0
  50              		@ frame_needed = 0, uses_anonymous_args = 0
  51              		@ link register save eliminated.
  64:../../serial.c ****     switch (serial_read_select)
  52              		.loc 1 64 5 view .LVU3
  53 0000 084B     		ldr	r3, .L7
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 3


  54 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  55 0004 3BB1     		cbz	r3, .L3
  56 0006 013B     		subs	r3, r3, #1
  57 0008 DBB2     		uxtb	r3, r3
  58 000a 012B     		cmp	r3, #1
  59 000c 01D8     		bhi	.L6
  60 000e 0020     		movs	r0, #0
  65:../../serial.c ****     {
  66:../../serial.c ****     case SERIAL_UART:
  67:../../serial.c ****         return (!serial_rx_count);
  68:../../serial.c ****     case SERIAL_N0:
  69:../../serial.c ****     case SERIAL_N1:
  70:../../serial.c ****         return false;
  71:../../serial.c ****     }
  72:../../serial.c **** 
  73:../../serial.c ****     return true;
  74:../../serial.c **** }
  61              		.loc 1 74 1 is_stmt 0 view .LVU4
  62 0010 7047     		bx	lr
  63              	.L6:
  73:../../serial.c **** }
  64              		.loc 1 73 12 view .LVU5
  65 0012 0120     		movs	r0, #1
  66 0014 7047     		bx	lr
  67              	.L3:
  67:../../serial.c ****     case SERIAL_N0:
  68              		.loc 1 67 9 is_stmt 1 view .LVU6
  67:../../serial.c ****     case SERIAL_N0:
  69              		.loc 1 67 17 is_stmt 0 view .LVU7
  70 0016 044B     		ldr	r3, .L7+4
  71 0018 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
  72 001a B0FA80F0 		clz	r0, r0
  73 001e 4009     		lsrs	r0, r0, #5
  74 0020 7047     		bx	lr
  75              	.L8:
  76 0022 00BF     		.align	2
  77              	.L7:
  78 0024 00000000 		.word	.LANCHOR0
  79 0028 00000000 		.word	.LANCHOR1
  80              		.cfi_endproc
  81              	.LFE66:
  83              		.section	.text.serial_tx_is_empty,"ax",%progbits
  84              		.align	1
  85              		.global	serial_tx_is_empty
  86              		.syntax unified
  87              		.thumb
  88              		.thumb_func
  89              		.fpu softvfp
  91              	serial_tx_is_empty:
  92              	.LFB67:
  75:../../serial.c **** 
  76:../../serial.c **** bool serial_tx_is_empty(void)
  77:../../serial.c **** {
  93              		.loc 1 77 1 is_stmt 1 view -0
  94              		.cfi_startproc
  95              		@ args = 0, pretend = 0, frame = 0
  96              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 4


  97              		@ link register save eliminated.
  78:../../serial.c ****     return (!serial_tx_count);
  98              		.loc 1 78 5 view .LVU9
  99              		.loc 1 78 13 is_stmt 0 view .LVU10
 100 0000 024B     		ldr	r3, .L10
 101 0002 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
  79:../../serial.c **** }
 102              		.loc 1 79 1 view .LVU11
 103 0004 B0FA80F0 		clz	r0, r0
 104 0008 4009     		lsrs	r0, r0, #5
 105 000a 7047     		bx	lr
 106              	.L11:
 107              		.align	2
 108              	.L10:
 109 000c 00000000 		.word	.LANCHOR2
 110              		.cfi_endproc
 111              	.LFE67:
 113              		.section	.text.serial_ungetc,"ax",%progbits
 114              		.align	1
 115              		.global	serial_ungetc
 116              		.syntax unified
 117              		.thumb
 118              		.thumb_func
 119              		.fpu softvfp
 121              	serial_ungetc:
 122              	.LFB69:
  80:../../serial.c **** 
  81:../../serial.c **** unsigned char serial_getc(void)
  82:../../serial.c **** {
  83:../../serial.c ****     unsigned char c;
  84:../../serial.c **** 
  85:../../serial.c ****     switch (serial_read_select)
  86:../../serial.c ****     {
  87:../../serial.c ****     case SERIAL_UART:
  88:../../serial.c ****         if (!serial_rx_count)
  89:../../serial.c ****         {
  90:../../serial.c ****             return EOL;
  91:../../serial.c ****         }
  92:../../serial.c **** 
  93:../../serial.c ****         do
  94:../../serial.c ****         {
  95:../../serial.c ****             c = serial_rx_buffer[serial_rx_read];
  96:../../serial.c ****             if (++serial_rx_read == RX_BUFFER_SIZE)
  97:../../serial.c ****             {
  98:../../serial.c ****                 serial_rx_read = 0;
  99:../../serial.c ****             }
 100:../../serial.c ****             switch (c)
 101:../../serial.c ****             {
 102:../../serial.c ****             case EOL: //EOL
 103:../../serial.c ****                 serial_rx_count--;
 104:../../serial.c ****                 return EOL;
 105:../../serial.c ****             case ' ':
 106:../../serial.c ****             case '\t': //eats white chars
 107:../../serial.c ****                 break;
 108:../../serial.c ****             default:
 109:../../serial.c ****                 if (c >= 'a' && c <= 'z') //serial only returns upper case letters
 110:../../serial.c ****                 {
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 5


 111:../../serial.c ****                     c -= 32;
 112:../../serial.c ****                 }
 113:../../serial.c **** #ifdef ECHO_CMD
 114:../../serial.c ****                 serial_putc(c);
 115:../../serial.c **** #endif
 116:../../serial.c ****                 return c;
 117:../../serial.c ****             }
 118:../../serial.c ****         } while (serial_rx_count);
 119:../../serial.c ****         break;
 120:../../serial.c ****     case SERIAL_N0:
 121:../../serial.c ****     case SERIAL_N1:
 122:../../serial.c ****         c = mcu_eeprom_getc(serial_read_index++);
 123:../../serial.c ****         if (c)
 124:../../serial.c ****         {
 125:../../serial.c ****             serial_putc(c);
 126:../../serial.c ****         }
 127:../../serial.c ****         else
 128:../../serial.c ****         {
 129:../../serial.c ****             serial_putc(':');
 130:../../serial.c ****             serial_read_select = SERIAL_UART; // resets the serial select
 131:../../serial.c ****         }
 132:../../serial.c ****         return c;
 133:../../serial.c ****     }
 134:../../serial.c **** 
 135:../../serial.c ****     return EOL;
 136:../../serial.c **** }
 137:../../serial.c **** 
 138:../../serial.c **** void serial_ungetc(void)
 139:../../serial.c **** {
 123              		.loc 1 139 1 is_stmt 1 view -0
 124              		.cfi_startproc
 125              		@ args = 0, pretend = 0, frame = 0
 126              		@ frame_needed = 0, uses_anonymous_args = 0
 127              		@ link register save eliminated.
 140:../../serial.c ****     if (--serial_rx_read == 0xFF)
 128              		.loc 1 140 5 view .LVU13
 129              		.loc 1 140 9 is_stmt 0 view .LVU14
 130 0000 0A4A     		ldr	r2, .L16
 131 0002 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 132 0004 013B     		subs	r3, r3, #1
 133 0006 DBB2     		uxtb	r3, r3
 134              		.loc 1 140 8 view .LVU15
 135 0008 1370     		strb	r3, [r2]
 136 000a FF2B     		cmp	r3, #255
 137 000c 0AD0     		beq	.L15
 138              	.L13:
 141:../../serial.c ****     {
 142:../../serial.c ****         serial_rx_read = RX_BUFFER_SIZE - 1;
 143:../../serial.c ****     }
 144:../../serial.c **** 
 145:../../serial.c ****     if (serial_rx_buffer[serial_rx_read] == EOL)
 139              		.loc 1 145 5 is_stmt 1 view .LVU16
 140              		.loc 1 145 25 is_stmt 0 view .LVU17
 141 000e 074B     		ldr	r3, .L16
 142 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 143 0012 074A     		ldr	r2, .L16+4
 144 0014 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 6


 145              		.loc 1 145 8 view .LVU18
 146 0016 23B9     		cbnz	r3, .L12
 146:../../serial.c ****     {
 147:../../serial.c ****         serial_rx_count++; //recoverd command
 147              		.loc 1 147 9 is_stmt 1 view .LVU19
 148              		.loc 1 147 24 is_stmt 0 view .LVU20
 149 0018 064A     		ldr	r2, .L16+8
 150 001a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 151 001c 0133     		adds	r3, r3, #1
 152 001e DBB2     		uxtb	r3, r3
 153 0020 1370     		strb	r3, [r2]
 154              	.L12:
 148:../../serial.c ****     }
 149:../../serial.c **** }
 155              		.loc 1 149 1 view .LVU21
 156 0022 7047     		bx	lr
 157              	.L15:
 142:../../serial.c ****     }
 158              		.loc 1 142 9 is_stmt 1 view .LVU22
 142:../../serial.c ****     }
 159              		.loc 1 142 24 is_stmt 0 view .LVU23
 160 0024 1346     		mov	r3, r2
 161 0026 0022     		movs	r2, #0
 162 0028 1A70     		strb	r2, [r3]
 163 002a F0E7     		b	.L13
 164              	.L17:
 165              		.align	2
 166              	.L16:
 167 002c 00000000 		.word	.LANCHOR3
 168 0030 00000000 		.word	.LANCHOR4
 169 0034 00000000 		.word	.LANCHOR1
 170              		.cfi_endproc
 171              	.LFE69:
 173              		.section	.text.serial_peek,"ax",%progbits
 174              		.align	1
 175              		.global	serial_peek
 176              		.syntax unified
 177              		.thumb
 178              		.thumb_func
 179              		.fpu softvfp
 181              	serial_peek:
 182              	.LFB71:
 150:../../serial.c **** 
 151:../../serial.c **** void serial_select(uint8_t source)
 152:../../serial.c **** {
 153:../../serial.c ****     serial_read_select = source;
 154:../../serial.c ****     switch (serial_read_select)
 155:../../serial.c ****     {
 156:../../serial.c ****     case SERIAL_N0:
 157:../../serial.c ****         serial_putc('>');
 158:../../serial.c ****         serial_read_index = STARTUP_BLOCK0_ADDRESS_OFFSET;
 159:../../serial.c ****         break;
 160:../../serial.c ****     case SERIAL_N1:
 161:../../serial.c ****         serial_putc('>');
 162:../../serial.c ****         serial_read_index = STARTUP_BLOCK1_ADDRESS_OFFSET;
 163:../../serial.c ****         break;
 164:../../serial.c ****     }
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 7


 165:../../serial.c **** }
 166:../../serial.c **** 
 167:../../serial.c **** unsigned char serial_peek(void)
 168:../../serial.c **** {
 183              		.loc 1 168 1 is_stmt 1 view -0
 184              		.cfi_startproc
 185              		@ args = 0, pretend = 0, frame = 0
 186              		@ frame_needed = 0, uses_anonymous_args = 0
 187 0000 08B5     		push	{r3, lr}
 188              	.LCFI0:
 189              		.cfi_def_cfa_offset 8
 190              		.cfi_offset 3, -8
 191              		.cfi_offset 14, -4
 169:../../serial.c ****     unsigned char c;
 192              		.loc 1 169 5 view .LVU25
 170:../../serial.c ****     switch (serial_read_select)
 193              		.loc 1 170 5 view .LVU26
 194 0002 174B     		ldr	r3, .L32
 195 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 196 0006 83B1     		cbz	r3, .L24
 197 0008 013B     		subs	r3, r3, #1
 198 000a DBB2     		uxtb	r3, r3
 199 000c 012B     		cmp	r3, #1
 200 000e 24D8     		bhi	.L29
 171:../../serial.c ****     {
 172:../../serial.c ****     case SERIAL_UART:
 173:../../serial.c ****         while (serial_rx_count)
 174:../../serial.c ****         {
 175:../../serial.c ****             c = serial_rx_buffer[serial_rx_read];
 176:../../serial.c ****             switch (c)
 177:../../serial.c ****             {
 178:../../serial.c ****             case ' ':
 179:../../serial.c ****             case '\t': //eats white chars
 180:../../serial.c ****                 if (++serial_rx_read == RX_BUFFER_SIZE)
 181:../../serial.c ****                 {
 182:../../serial.c ****                     serial_rx_read = 0;
 183:../../serial.c ****                 }
 184:../../serial.c ****                 break;
 185:../../serial.c ****             default:
 186:../../serial.c ****                 if (c >= 'a' && c <= 'z') //serial only returns upper case letters
 187:../../serial.c ****                 {
 188:../../serial.c ****                     c -= 32;
 189:../../serial.c ****                 }
 190:../../serial.c ****                 return c;
 191:../../serial.c ****             }
 192:../../serial.c ****         }
 193:../../serial.c ****         break;
 194:../../serial.c ****     case SERIAL_N0:
 195:../../serial.c ****     case SERIAL_N1:
 196:../../serial.c ****         return mcu_eeprom_getc(serial_read_index);
 201              		.loc 1 196 9 view .LVU27
 202              		.loc 1 196 16 is_stmt 0 view .LVU28
 203 0010 144B     		ldr	r3, .L32+4
 204 0012 1888     		ldrh	r0, [r3]
 205 0014 FFF7FEFF 		bl	mcu_eeprom_getc
 206              	.LVL0:
 207 0018 20E0     		b	.L20
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 8


 208              	.LVL1:
 209              	.L31:
 210              		.loc 1 196 16 view .LVU29
 211 001a 2028     		cmp	r0, #32
 212 001c 15D1     		bne	.L23
 213              	.L22:
 180:../../serial.c ****                 {
 214              		.loc 1 180 17 is_stmt 1 view .LVU30
 180:../../serial.c ****                 {
 215              		.loc 1 180 21 is_stmt 0 view .LVU31
 216 001e 0133     		adds	r3, r3, #1
 217 0020 DBB2     		uxtb	r3, r3
 180:../../serial.c ****                 {
 218              		.loc 1 180 20 view .LVU32
 219 0022 114A     		ldr	r2, .L32+8
 220 0024 1370     		strb	r3, [r2]
 221 0026 012B     		cmp	r3, #1
 222 0028 0BD0     		beq	.L30
 223              	.LVL2:
 224              	.L24:
 173:../../serial.c ****         {
 225              		.loc 1 173 15 is_stmt 1 view .LVU33
 173:../../serial.c ****         {
 226              		.loc 1 173 16 is_stmt 0 view .LVU34
 227 002a 104B     		ldr	r3, .L32+12
 228 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 173:../../serial.c ****         {
 229              		.loc 1 173 15 view .LVU35
 230 002e 03F0FF00 		and	r0, r3, #255
 231 0032 9BB1     		cbz	r3, .L20
 175:../../serial.c ****             switch (c)
 232              		.loc 1 175 13 is_stmt 1 view .LVU36
 175:../../serial.c ****             switch (c)
 233              		.loc 1 175 33 is_stmt 0 view .LVU37
 234 0034 0C4B     		ldr	r3, .L32+8
 235 0036 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 175:../../serial.c ****             switch (c)
 236              		.loc 1 175 15 view .LVU38
 237 0038 0D4A     		ldr	r2, .L32+16
 238 003a D05C     		ldrb	r0, [r2, r3]	@ zero_extendqisi2
 239              	.LVL3:
 176:../../serial.c ****             {
 240              		.loc 1 176 13 is_stmt 1 view .LVU39
 241 003c 0928     		cmp	r0, #9
 242 003e ECD1     		bne	.L31
 243 0040 EDE7     		b	.L22
 244              	.L30:
 182:../../serial.c ****                 }
 245              		.loc 1 182 21 view .LVU40
 182:../../serial.c ****                 }
 246              		.loc 1 182 36 is_stmt 0 view .LVU41
 247 0042 1346     		mov	r3, r2
 248 0044 0022     		movs	r2, #0
 249 0046 1A70     		strb	r2, [r3]
 250 0048 EFE7     		b	.L24
 251              	.L23:
 186:../../serial.c ****                 {
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 9


 252              		.loc 1 186 17 is_stmt 1 view .LVU42
 186:../../serial.c ****                 {
 253              		.loc 1 186 30 is_stmt 0 view .LVU43
 254 004a A0F16103 		sub	r3, r0, #97
 255 004e DBB2     		uxtb	r3, r3
 186:../../serial.c ****                 {
 256              		.loc 1 186 20 view .LVU44
 257 0050 192B     		cmp	r3, #25
 258 0052 03D8     		bhi	.L20
 188:../../serial.c ****                 }
 259              		.loc 1 188 21 is_stmt 1 view .LVU45
 188:../../serial.c ****                 }
 260              		.loc 1 188 23 is_stmt 0 view .LVU46
 261 0054 2038     		subs	r0, r0, #32
 262              	.LVL4:
 188:../../serial.c ****                 }
 263              		.loc 1 188 23 view .LVU47
 264 0056 C0B2     		uxtb	r0, r0
 265              	.LVL5:
 188:../../serial.c ****                 }
 266              		.loc 1 188 23 view .LVU48
 267 0058 00E0     		b	.L20
 268              	.LVL6:
 269              	.L29:
 170:../../serial.c ****     {
 270              		.loc 1 170 5 view .LVU49
 271 005a 0020     		movs	r0, #0
 272              	.L20:
 197:../../serial.c ****     }
 198:../../serial.c ****     return EOL;
 199:../../serial.c **** }
 273              		.loc 1 199 1 view .LVU50
 274 005c 08BD     		pop	{r3, pc}
 275              	.L33:
 276 005e 00BF     		.align	2
 277              	.L32:
 278 0060 00000000 		.word	.LANCHOR0
 279 0064 00000000 		.word	.LANCHOR5
 280 0068 00000000 		.word	.LANCHOR3
 281 006c 00000000 		.word	.LANCHOR1
 282 0070 00000000 		.word	.LANCHOR4
 283              		.cfi_endproc
 284              	.LFE71:
 286              		.section	.text.serial_putc,"ax",%progbits
 287              		.align	1
 288              		.global	serial_putc
 289              		.syntax unified
 290              		.thumb
 291              		.thumb_func
 292              		.fpu softvfp
 294              	serial_putc:
 295              	.LVL7:
 296              	.LFB73:
 200:../../serial.c **** 
 201:../../serial.c **** void serial_inject_cmd(const unsigned char *__s)
 202:../../serial.c **** {
 203:../../serial.c ****     unsigned char c = rom_strptr(__s++);
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 10


 204:../../serial.c ****     do
 205:../../serial.c ****     {
 206:../../serial.c ****         serial_rx_isr(c);
 207:../../serial.c ****         c = rom_strptr(__s++);
 208:../../serial.c ****     } while (c != 0);
 209:../../serial.c **** }
 210:../../serial.c **** 
 211:../../serial.c **** void serial_putc(unsigned char c)
 212:../../serial.c **** {
 297              		.loc 1 212 1 is_stmt 1 view -0
 298              		.cfi_startproc
 299              		@ args = 0, pretend = 0, frame = 0
 300              		@ frame_needed = 0, uses_anonymous_args = 0
 301              		.loc 1 212 1 is_stmt 0 view .LVU52
 302 0000 08B5     		push	{r3, lr}
 303              	.LCFI1:
 304              		.cfi_def_cfa_offset 8
 305              		.cfi_offset 3, -8
 306              		.cfi_offset 14, -4
 213:../../serial.c ****     #ifdef ENABLE_SYNC_TX
 214:../../serial.c ****     mcu_putc(c);
 307              		.loc 1 214 5 is_stmt 1 view .LVU53
 308 0002 FFF7FEFF 		bl	mcu_putc
 309              	.LVL8:
 215:../../serial.c ****     #else
 216:../../serial.c ****     while ((serial_tx_write == serial_tx_read) && (serial_tx_count != 0))
 217:../../serial.c ****     {
 218:../../serial.c ****         mcu_start_send();    //starts async send and loops while buffer full
 219:../../serial.c ****         if (!cnc_doevents()) //on any alarm abort
 220:../../serial.c ****         {
 221:../../serial.c ****             return;
 222:../../serial.c ****         }
 223:../../serial.c ****     } //while buffer is full
 224:../../serial.c **** 
 225:../../serial.c ****     serial_tx_buffer[serial_tx_write] = c;
 226:../../serial.c ****     serial_tx_write++;
 227:../../serial.c ****     if (c == '\n' || c == '\r')
 228:../../serial.c ****     {
 229:../../serial.c ****         serial_tx_count++;
 230:../../serial.c ****         mcu_start_send();
 231:../../serial.c ****     }
 232:../../serial.c **** 
 233:../../serial.c ****     if (serial_tx_write == TX_BUFFER_SIZE)
 234:../../serial.c ****     {
 235:../../serial.c ****         serial_tx_write = 0;
 236:../../serial.c ****     }
 237:../../serial.c ****     #endif
 238:../../serial.c **** }
 310              		.loc 1 238 1 is_stmt 0 view .LVU54
 311 0006 08BD     		pop	{r3, pc}
 312              		.cfi_endproc
 313              	.LFE73:
 315              		.section	.text.serial_getc,"ax",%progbits
 316              		.align	1
 317              		.global	serial_getc
 318              		.syntax unified
 319              		.thumb
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 11


 320              		.thumb_func
 321              		.fpu softvfp
 323              	serial_getc:
 324              	.LFB68:
  82:../../serial.c ****     unsigned char c;
 325              		.loc 1 82 1 is_stmt 1 view -0
 326              		.cfi_startproc
 327              		@ args = 0, pretend = 0, frame = 0
 328              		@ frame_needed = 0, uses_anonymous_args = 0
 329 0000 10B5     		push	{r4, lr}
 330              	.LCFI2:
 331              		.cfi_def_cfa_offset 8
 332              		.cfi_offset 4, -8
 333              		.cfi_offset 14, -4
  83:../../serial.c **** 
 334              		.loc 1 83 5 view .LVU56
  85:../../serial.c ****     {
 335              		.loc 1 85 5 view .LVU57
 336 0002 244B     		ldr	r3, .L51
 337 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 338 0006 73B1     		cbz	r3, .L37
 339 0008 013B     		subs	r3, r3, #1
 340 000a DBB2     		uxtb	r3, r3
 341 000c 012B     		cmp	r3, #1
 342 000e 3DD8     		bhi	.L48
 122:../../serial.c ****         if (c)
 343              		.loc 1 122 9 view .LVU58
 122:../../serial.c ****         if (c)
 344              		.loc 1 122 13 is_stmt 0 view .LVU59
 345 0010 214B     		ldr	r3, .L51+4
 346 0012 1888     		ldrh	r0, [r3]
 347 0014 421C     		adds	r2, r0, #1
 348 0016 1A80     		strh	r2, [r3]	@ movhi
 349 0018 FFF7FEFF 		bl	mcu_eeprom_getc
 350              	.LVL9:
 123:../../serial.c ****         {
 351              		.loc 1 123 9 is_stmt 1 view .LVU60
 123:../../serial.c ****         {
 352              		.loc 1 123 12 is_stmt 0 view .LVU61
 353 001c 0446     		mov	r4, r0
 354 001e 70B3     		cbz	r0, .L44
 125:../../serial.c ****         }
 355              		.loc 1 125 13 is_stmt 1 view .LVU62
 356 0020 FFF7FEFF 		bl	serial_putc
 357              	.LVL10:
 125:../../serial.c ****         }
 358              		.loc 1 125 13 is_stmt 0 view .LVU63
 359 0024 33E0     		b	.L38
 360              	.L37:
  88:../../serial.c ****         {
 361              		.loc 1 88 9 is_stmt 1 view .LVU64
  88:../../serial.c ****         {
 362              		.loc 1 88 13 is_stmt 0 view .LVU65
 363 0026 1D4B     		ldr	r3, .L51+8
 364 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  88:../../serial.c ****         {
 365              		.loc 1 88 12 view .LVU66
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 12


 366 002a 03F0FF04 		and	r4, r3, #255
 367 002e 73B3     		cbz	r3, .L38
 368              	.L43:
  93:../../serial.c ****         {
 369              		.loc 1 93 9 is_stmt 1 view .LVU67
  95:../../serial.c ****             if (++serial_rx_read == RX_BUFFER_SIZE)
 370              		.loc 1 95 13 view .LVU68
  95:../../serial.c ****             if (++serial_rx_read == RX_BUFFER_SIZE)
 371              		.loc 1 95 33 is_stmt 0 view .LVU69
 372 0030 1B4A     		ldr	r2, .L51+12
 373 0032 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
  95:../../serial.c ****             if (++serial_rx_read == RX_BUFFER_SIZE)
 374              		.loc 1 95 15 view .LVU70
 375 0034 1B49     		ldr	r1, .L51+16
 376 0036 CC5C     		ldrb	r4, [r1, r3]	@ zero_extendqisi2
 377              	.LVL11:
  96:../../serial.c ****             {
 378              		.loc 1 96 13 is_stmt 1 view .LVU71
  96:../../serial.c ****             {
 379              		.loc 1 96 17 is_stmt 0 view .LVU72
 380 0038 0133     		adds	r3, r3, #1
 381 003a DBB2     		uxtb	r3, r3
  96:../../serial.c ****             {
 382              		.loc 1 96 16 view .LVU73
 383 003c 1370     		strb	r3, [r2]
 384 003e 012B     		cmp	r3, #1
 385 0040 0CD0     		beq	.L49
 386              	.L40:
 100:../../serial.c ****             {
 387              		.loc 1 100 13 is_stmt 1 view .LVU74
 388 0042 092C     		cmp	r4, #9
 389 0044 14D0     		beq	.L41
 390 0046 202C     		cmp	r4, #32
 391 0048 12D0     		beq	.L41
 392 004a 5CB1     		cbz	r4, .L50
 109:../../serial.c ****                 {
 393              		.loc 1 109 17 view .LVU75
 109:../../serial.c ****                 {
 394              		.loc 1 109 30 is_stmt 0 view .LVU76
 395 004c A4F16103 		sub	r3, r4, #97
 396 0050 DBB2     		uxtb	r3, r3
 109:../../serial.c ****                 {
 397              		.loc 1 109 20 view .LVU77
 398 0052 192B     		cmp	r3, #25
 399 0054 1BD8     		bhi	.L38
 111:../../serial.c ****                 }
 400              		.loc 1 111 21 is_stmt 1 view .LVU78
 111:../../serial.c ****                 }
 401              		.loc 1 111 23 is_stmt 0 view .LVU79
 402 0056 203C     		subs	r4, r4, #32
 403              	.LVL12:
 111:../../serial.c ****                 }
 404              		.loc 1 111 23 view .LVU80
 405 0058 E4B2     		uxtb	r4, r4
 406              	.LVL13:
 111:../../serial.c ****                 }
 407              		.loc 1 111 23 view .LVU81
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 13


 408 005a 18E0     		b	.L38
 409              	.L49:
  98:../../serial.c ****             }
 410              		.loc 1 98 17 is_stmt 1 view .LVU82
  98:../../serial.c ****             }
 411              		.loc 1 98 32 is_stmt 0 view .LVU83
 412 005c 1346     		mov	r3, r2
 413 005e 0022     		movs	r2, #0
 414 0060 1A70     		strb	r2, [r3]
 415 0062 EEE7     		b	.L40
 416              	.L50:
 103:../../serial.c ****                 return EOL;
 417              		.loc 1 103 17 is_stmt 1 view .LVU84
 103:../../serial.c ****                 return EOL;
 418              		.loc 1 103 32 is_stmt 0 view .LVU85
 419 0064 0D4A     		ldr	r2, .L51+8
 420 0066 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 421 0068 013B     		subs	r3, r3, #1
 422 006a DBB2     		uxtb	r3, r3
 423 006c 1370     		strb	r3, [r2]
 104:../../serial.c ****             case ' ':
 424              		.loc 1 104 17 is_stmt 1 view .LVU86
 104:../../serial.c ****             case ' ':
 425              		.loc 1 104 24 is_stmt 0 view .LVU87
 426 006e 0EE0     		b	.L38
 427              	.L41:
 107:../../serial.c ****             default:
 428              		.loc 1 107 17 is_stmt 1 view .LVU88
 118:../../serial.c ****         break;
 429              		.loc 1 118 17 view .LVU89
 118:../../serial.c ****         break;
 430              		.loc 1 118 18 is_stmt 0 view .LVU90
 431 0070 0A4B     		ldr	r3, .L51+8
 432 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 118:../../serial.c ****         break;
 433              		.loc 1 118 9 view .LVU91
 434 0074 03F0FF04 		and	r4, r3, #255
 435              	.LVL14:
 118:../../serial.c ****         break;
 436              		.loc 1 118 9 view .LVU92
 437 0078 002B     		cmp	r3, #0
 438 007a D9D1     		bne	.L43
 439 007c 07E0     		b	.L38
 440              	.LVL15:
 441              	.L44:
 129:../../serial.c ****             serial_read_select = SERIAL_UART; // resets the serial select
 442              		.loc 1 129 13 is_stmt 1 view .LVU93
 443 007e 3A20     		movs	r0, #58
 444              	.LVL16:
 129:../../serial.c ****             serial_read_select = SERIAL_UART; // resets the serial select
 445              		.loc 1 129 13 is_stmt 0 view .LVU94
 446 0080 FFF7FEFF 		bl	serial_putc
 447              	.LVL17:
 130:../../serial.c ****         }
 448              		.loc 1 130 13 is_stmt 1 view .LVU95
 130:../../serial.c ****         }
 449              		.loc 1 130 32 is_stmt 0 view .LVU96
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 14


 450 0084 034B     		ldr	r3, .L51
 451 0086 0022     		movs	r2, #0
 452 0088 1A70     		strb	r2, [r3]
 453 008a 00E0     		b	.L38
 454              	.L48:
  85:../../serial.c ****     {
 455              		.loc 1 85 5 view .LVU97
 456 008c 0024     		movs	r4, #0
 457              	.L38:
 136:../../serial.c **** 
 458              		.loc 1 136 1 view .LVU98
 459 008e 2046     		mov	r0, r4
 460 0090 10BD     		pop	{r4, pc}
 461              	.L52:
 462 0092 00BF     		.align	2
 463              	.L51:
 464 0094 00000000 		.word	.LANCHOR0
 465 0098 00000000 		.word	.LANCHOR5
 466 009c 00000000 		.word	.LANCHOR1
 467 00a0 00000000 		.word	.LANCHOR3
 468 00a4 00000000 		.word	.LANCHOR4
 469              		.cfi_endproc
 470              	.LFE68:
 472              		.section	.text.serial_select,"ax",%progbits
 473              		.align	1
 474              		.global	serial_select
 475              		.syntax unified
 476              		.thumb
 477              		.thumb_func
 478              		.fpu softvfp
 480              	serial_select:
 481              	.LVL18:
 482              	.LFB70:
 152:../../serial.c ****     serial_read_select = source;
 483              		.loc 1 152 1 is_stmt 1 view -0
 484              		.cfi_startproc
 485              		@ args = 0, pretend = 0, frame = 0
 486              		@ frame_needed = 0, uses_anonymous_args = 0
 152:../../serial.c ****     serial_read_select = source;
 487              		.loc 1 152 1 is_stmt 0 view .LVU100
 488 0000 08B5     		push	{r3, lr}
 489              	.LCFI3:
 490              		.cfi_def_cfa_offset 8
 491              		.cfi_offset 3, -8
 492              		.cfi_offset 14, -4
 153:../../serial.c ****     switch (serial_read_select)
 493              		.loc 1 153 5 is_stmt 1 view .LVU101
 153:../../serial.c ****     switch (serial_read_select)
 494              		.loc 1 153 24 is_stmt 0 view .LVU102
 495 0002 0A4B     		ldr	r3, .L58
 496 0004 1870     		strb	r0, [r3]
 154:../../serial.c ****     {
 497              		.loc 1 154 5 is_stmt 1 view .LVU103
 498 0006 0128     		cmp	r0, #1
 499 0008 02D0     		beq	.L54
 500 000a 0228     		cmp	r0, #2
 501 000c 07D0     		beq	.L55
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 15


 502              	.LVL19:
 503              	.L53:
 165:../../serial.c **** 
 504              		.loc 1 165 1 is_stmt 0 view .LVU104
 505 000e 08BD     		pop	{r3, pc}
 506              	.LVL20:
 507              	.L54:
 157:../../serial.c ****         serial_read_index = STARTUP_BLOCK0_ADDRESS_OFFSET;
 508              		.loc 1 157 9 is_stmt 1 view .LVU105
 509 0010 3E20     		movs	r0, #62
 510              	.LVL21:
 157:../../serial.c ****         serial_read_index = STARTUP_BLOCK0_ADDRESS_OFFSET;
 511              		.loc 1 157 9 is_stmt 0 view .LVU106
 512 0012 FFF7FEFF 		bl	serial_putc
 513              	.LVL22:
 158:../../serial.c ****         break;
 514              		.loc 1 158 9 is_stmt 1 view .LVU107
 158:../../serial.c ****         break;
 515              		.loc 1 158 27 is_stmt 0 view .LVU108
 516 0016 064B     		ldr	r3, .L58+4
 517 0018 DA22     		movs	r2, #218
 518 001a 1A80     		strh	r2, [r3]	@ movhi
 159:../../serial.c ****     case SERIAL_N1:
 519              		.loc 1 159 9 is_stmt 1 view .LVU109
 520 001c F7E7     		b	.L53
 521              	.LVL23:
 522              	.L55:
 161:../../serial.c ****         serial_read_index = STARTUP_BLOCK1_ADDRESS_OFFSET;
 523              		.loc 1 161 9 view .LVU110
 524 001e 3E20     		movs	r0, #62
 525              	.LVL24:
 161:../../serial.c ****         serial_read_index = STARTUP_BLOCK1_ADDRESS_OFFSET;
 526              		.loc 1 161 9 is_stmt 0 view .LVU111
 527 0020 FFF7FEFF 		bl	serial_putc
 528              	.LVL25:
 162:../../serial.c ****         break;
 529              		.loc 1 162 9 is_stmt 1 view .LVU112
 162:../../serial.c ****         break;
 530              		.loc 1 162 27 is_stmt 0 view .LVU113
 531 0024 024B     		ldr	r3, .L58+4
 532 0026 DB22     		movs	r2, #219
 533 0028 1A80     		strh	r2, [r3]	@ movhi
 163:../../serial.c ****     }
 534              		.loc 1 163 9 is_stmt 1 view .LVU114
 165:../../serial.c **** 
 535              		.loc 1 165 1 is_stmt 0 view .LVU115
 536 002a F0E7     		b	.L53
 537              	.L59:
 538              		.align	2
 539              	.L58:
 540 002c 00000000 		.word	.LANCHOR0
 541 0030 00000000 		.word	.LANCHOR5
 542              		.cfi_endproc
 543              	.LFE70:
 545              		.section	.text.serial_print_str,"ax",%progbits
 546              		.align	1
 547              		.global	serial_print_str
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 16


 548              		.syntax unified
 549              		.thumb
 550              		.thumb_func
 551              		.fpu softvfp
 553              	serial_print_str:
 554              	.LVL26:
 555              	.LFB74:
 239:../../serial.c **** 
 240:../../serial.c **** void serial_print_str(const unsigned char *__s)
 241:../../serial.c **** {
 556              		.loc 1 241 1 is_stmt 1 view -0
 557              		.cfi_startproc
 558              		@ args = 0, pretend = 0, frame = 0
 559              		@ frame_needed = 0, uses_anonymous_args = 0
 560              		.loc 1 241 1 is_stmt 0 view .LVU117
 561 0000 10B5     		push	{r4, lr}
 562              	.LCFI4:
 563              		.cfi_def_cfa_offset 8
 564              		.cfi_offset 4, -8
 565              		.cfi_offset 14, -4
 242:../../serial.c ****     unsigned char c = rom_strptr(__s++);
 566              		.loc 1 242 5 is_stmt 1 view .LVU118
 567              		.loc 1 242 37 is_stmt 0 view .LVU119
 568 0002 0446     		mov	r4, r0
 569              	.LVL27:
 570              		.loc 1 242 19 view .LVU120
 571 0004 14F8010B 		ldrb	r0, [r4], #1	@ zero_extendqisi2
 572              	.LVL28:
 573              	.L61:
 243:../../serial.c ****     do
 574              		.loc 1 243 5 is_stmt 1 discriminator 1 view .LVU121
 244:../../serial.c ****     {
 245:../../serial.c ****         serial_putc(c);
 575              		.loc 1 245 9 discriminator 1 view .LVU122
 576 0008 FFF7FEFF 		bl	serial_putc
 577              	.LVL29:
 246:../../serial.c ****         c = rom_strptr(__s++);
 578              		.loc 1 246 9 discriminator 1 view .LVU123
 579              		.loc 1 246 11 is_stmt 0 discriminator 1 view .LVU124
 580 000c 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 581 000e 0134     		adds	r4, r4, #1
 582              	.LVL30:
 247:../../serial.c ****     } while (c != 0);
 583              		.loc 1 247 13 is_stmt 1 discriminator 1 view .LVU125
 584              		.loc 1 247 5 is_stmt 0 discriminator 1 view .LVU126
 585 0010 0028     		cmp	r0, #0
 586 0012 F9D1     		bne	.L61
 248:../../serial.c **** }
 587              		.loc 1 248 1 view .LVU127
 588 0014 10BD     		pop	{r4, pc}
 589              		.loc 1 248 1 view .LVU128
 590              		.cfi_endproc
 591              	.LFE74:
 593              		.section	.text.serial_print_int,"ax",%progbits
 594              		.align	1
 595              		.global	serial_print_int
 596              		.syntax unified
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 17


 597              		.thumb
 598              		.thumb_func
 599              		.fpu softvfp
 601              	serial_print_int:
 602              	.LVL31:
 603              	.LFB75:
 249:../../serial.c **** 
 250:../../serial.c **** void serial_print_int(uint16_t num)
 251:../../serial.c **** {
 604              		.loc 1 251 1 is_stmt 1 view -0
 605              		.cfi_startproc
 606              		@ args = 0, pretend = 0, frame = 8
 607              		@ frame_needed = 0, uses_anonymous_args = 0
 608              		.loc 1 251 1 is_stmt 0 view .LVU130
 609 0000 10B5     		push	{r4, lr}
 610              	.LCFI5:
 611              		.cfi_def_cfa_offset 8
 612              		.cfi_offset 4, -8
 613              		.cfi_offset 14, -4
 614 0002 82B0     		sub	sp, sp, #8
 615              	.LCFI6:
 616              		.cfi_def_cfa_offset 16
 252:../../serial.c ****     if (num == 0)
 617              		.loc 1 252 5 is_stmt 1 view .LVU131
 618              		.loc 1 252 8 is_stmt 0 view .LVU132
 619 0004 10B1     		cbz	r0, .L70
 620 0006 0246     		mov	r2, r0
 253:../../serial.c ****     {
 254:../../serial.c ****         serial_putc('0');
 255:../../serial.c ****         return;
 256:../../serial.c ****     }
 257:../../serial.c **** 
 258:../../serial.c ****     unsigned char buffer[6];
 259:../../serial.c ****     uint8_t i = 0;
 621              		.loc 1 259 13 view .LVU133
 622 0008 0024     		movs	r4, #0
 623 000a 1DE0     		b	.L64
 624              	.L70:
 254:../../serial.c ****         return;
 625              		.loc 1 254 9 is_stmt 1 view .LVU134
 626 000c 3020     		movs	r0, #48
 627              	.LVL32:
 254:../../serial.c ****         return;
 628              		.loc 1 254 9 is_stmt 0 view .LVU135
 629 000e FFF7FEFF 		bl	serial_putc
 630              	.LVL33:
 255:../../serial.c ****     }
 631              		.loc 1 255 9 is_stmt 1 view .LVU136
 632 0012 27E0     		b	.L63
 633              	.LVL34:
 634              	.L66:
 635              	.LBB2:
 260:../../serial.c **** 
 261:../../serial.c ****     while (num > 0)
 262:../../serial.c ****     {
 263:../../serial.c ****         uint8_t digit = num % 10;
 636              		.loc 1 263 9 view .LVU137
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 18


 637              		.loc 1 263 17 is_stmt 0 view .LVU138
 638 0014 144B     		ldr	r3, .L71
 639 0016 A3FB0213 		umull	r1, r3, r3, r2
 640 001a DB08     		lsrs	r3, r3, #3
 641 001c 03EB8303 		add	r3, r3, r3, lsl #2
 642 0020 A2EB4303 		sub	r3, r2, r3, lsl #1
 643              	.LVL35:
 264:../../serial.c ****         num = ((((uint32_t)num * (UINT16_MAX / 10)) >> 16) + ((digit != 0) ? 0 : 1)); //same has di
 644              		.loc 1 264 9 is_stmt 1 view .LVU139
 645              		.loc 1 264 32 is_stmt 0 view .LVU140
 646 0024 41F69911 		movw	r1, #6553
 647 0028 01FB02F1 		mul	r1, r1, r2
 648              		.loc 1 264 80 view .LVU141
 649 002c 13F0FF03 		ands	r3, r3, #255
 650              	.LVL36:
 651              		.loc 1 264 80 view .LVU142
 652 0030 0CBF     		ite	eq
 653 0032 0122     		moveq	r2, #1
 654              	.LVL37:
 655              		.loc 1 264 80 view .LVU143
 656 0034 0022     		movne	r2, #0
 657              		.loc 1 264 13 view .LVU144
 658 0036 02EB1142 		add	r2, r2, r1, lsr #16
 659 003a 92B2     		uxth	r2, r2
 660              	.LVL38:
 265:../../serial.c ****         buffer[i++] = digit;
 661              		.loc 1 265 9 is_stmt 1 view .LVU145
 662              		.loc 1 265 17 is_stmt 0 view .LVU146
 663 003c 611C     		adds	r1, r4, #1
 664              	.LVL39:
 665              		.loc 1 265 21 view .LVU147
 666 003e 02A8     		add	r0, sp, #8
 667 0040 0444     		add	r4, r4, r0
 668 0042 04F8083C 		strb	r3, [r4, #-8]
 669              		.loc 1 265 17 view .LVU148
 670 0046 CCB2     		uxtb	r4, r1
 671              	.LVL40:
 672              	.L64:
 673              		.loc 1 265 17 view .LVU149
 674              	.LBE2:
 261:../../serial.c ****     {
 675              		.loc 1 261 11 is_stmt 1 view .LVU150
 676 0048 002A     		cmp	r2, #0
 677 004a E3D1     		bne	.L66
 678              	.LVL41:
 679              	.L67:
 266:../../serial.c ****         /*buffer[i++] = num % 10;
 267:../../serial.c ****         num /= 10;*/
 268:../../serial.c ****     }
 269:../../serial.c **** 
 270:../../serial.c ****     do
 680              		.loc 1 270 5 discriminator 1 view .LVU151
 271:../../serial.c ****     {
 272:../../serial.c ****         i--;
 681              		.loc 1 272 9 discriminator 1 view .LVU152
 682              		.loc 1 272 10 is_stmt 0 discriminator 1 view .LVU153
 683 004c 013C     		subs	r4, r4, #1
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 19


 684              	.LVL42:
 685              		.loc 1 272 10 discriminator 1 view .LVU154
 686 004e E4B2     		uxtb	r4, r4
 687              	.LVL43:
 273:../../serial.c ****         serial_putc('0' + buffer[i]);
 688              		.loc 1 273 9 is_stmt 1 discriminator 1 view .LVU155
 689              		.loc 1 273 33 is_stmt 0 discriminator 1 view .LVU156
 690 0050 02AB     		add	r3, sp, #8
 691 0052 2344     		add	r3, r3, r4
 692 0054 13F8080C 		ldrb	r0, [r3, #-8]	@ zero_extendqisi2
 693              		.loc 1 273 9 discriminator 1 view .LVU157
 694 0058 3030     		adds	r0, r0, #48
 695 005a C0B2     		uxtb	r0, r0
 696 005c FFF7FEFF 		bl	serial_putc
 697              	.LVL44:
 274:../../serial.c ****     } while (i);
 698              		.loc 1 274 13 is_stmt 1 discriminator 1 view .LVU158
 699              		.loc 1 274 5 is_stmt 0 discriminator 1 view .LVU159
 700 0060 002C     		cmp	r4, #0
 701 0062 F3D1     		bne	.L67
 702              	.LVL45:
 703              	.L63:
 275:../../serial.c **** }
 704              		.loc 1 275 1 view .LVU160
 705 0064 02B0     		add	sp, sp, #8
 706              	.LCFI7:
 707              		.cfi_def_cfa_offset 8
 708              		@ sp needed
 709 0066 10BD     		pop	{r4, pc}
 710              	.L72:
 711              		.align	2
 712              	.L71:
 713 0068 CDCCCCCC 		.word	-858993459
 714              		.cfi_endproc
 715              	.LFE75:
 717              		.global	__aeabi_f2d
 718              		.global	__aeabi_dmul
 719              		.global	__aeabi_d2f
 720              		.global	__aeabi_fcmplt
 721              		.global	__aeabi_f2uiz
 722              		.global	__aeabi_i2f
 723              		.global	__aeabi_fsub
 724              		.global	__aeabi_fmul
 725              		.section	.text.serial_print_flt,"ax",%progbits
 726              		.align	1
 727              		.global	serial_print_flt
 728              		.syntax unified
 729              		.thumb
 730              		.thumb_func
 731              		.fpu softvfp
 733              	serial_print_flt:
 734              	.LVL46:
 735              	.LFB76:
 276:../../serial.c **** #ifdef GCODE_PROCESS_LINE_NUMBERS
 277:../../serial.c **** void serial_print_long(uint32_t num)
 278:../../serial.c **** {
 279:../../serial.c ****     if (num == 0)
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 20


 280:../../serial.c ****     {
 281:../../serial.c ****         serial_putc('0');
 282:../../serial.c ****         return;
 283:../../serial.c ****     }
 284:../../serial.c **** 
 285:../../serial.c ****     unsigned char buffer[11];
 286:../../serial.c ****     uint8_t i = 0;
 287:../../serial.c **** 
 288:../../serial.c ****     while (num > 0)
 289:../../serial.c ****     {
 290:../../serial.c ****         uint8_t digit = num % 10;
 291:../../serial.c ****         num = (uint32_t)truncf((float)num * 0.1f);
 292:../../serial.c ****         buffer[i++] = digit;
 293:../../serial.c ****         /*buffer[i++] = num % 10;
 294:../../serial.c ****         num /= 10;*/
 295:../../serial.c ****     }
 296:../../serial.c **** 
 297:../../serial.c ****     do
 298:../../serial.c ****     {
 299:../../serial.c ****         i--;
 300:../../serial.c ****         serial_putc('0' + buffer[i]);
 301:../../serial.c ****     } while (i);
 302:../../serial.c **** }
 303:../../serial.c **** #endif
 304:../../serial.c **** /*
 305:../../serial.c **** void serial_print_int(uint16_t num)
 306:../../serial.c **** {
 307:../../serial.c **** 	char buffer[6];
 308:../../serial.c **** 	sprintf(buffer, MSG_INT, num);
 309:../../serial.c **** 
 310:../../serial.c **** 	uint8_t i = 0;
 311:../../serial.c **** 	do
 312:../../serial.c **** 	{
 313:../../serial.c **** 		serial_putc(buffer[i]);
 314:../../serial.c **** 		i++;
 315:../../serial.c **** 	} while(buffer[i] != 0);
 316:../../serial.c **** 
 317:../../serial.c **** }*/
 318:../../serial.c **** 
 319:../../serial.c **** void serial_print_flt(float num)
 320:../../serial.c **** {
 736              		.loc 1 320 1 is_stmt 1 view -0
 737              		.cfi_startproc
 738              		@ args = 0, pretend = 0, frame = 0
 739              		@ frame_needed = 0, uses_anonymous_args = 0
 740              		.loc 1 320 1 is_stmt 0 view .LVU162
 741 0000 38B5     		push	{r3, r4, r5, lr}
 742              	.LCFI8:
 743              		.cfi_def_cfa_offset 16
 744              		.cfi_offset 3, -16
 745              		.cfi_offset 4, -12
 746              		.cfi_offset 5, -8
 747              		.cfi_offset 14, -4
 748 0002 0446     		mov	r4, r0
 321:../../serial.c ****     if (g_settings.report_inches)
 749              		.loc 1 321 5 is_stmt 1 view .LVU163
 750              		.loc 1 321 19 is_stmt 0 view .LVU164
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 21


 751 0004 2C4B     		ldr	r3, .L88+8
 752 0006 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 753              		.loc 1 321 8 view .LVU165
 754 0008 4BB1     		cbz	r3, .L74
 322:../../serial.c ****     {
 323:../../serial.c ****         num *= MM_INCH_MULT;
 755              		.loc 1 323 9 is_stmt 1 view .LVU166
 756              		.loc 1 323 13 is_stmt 0 view .LVU167
 757 000a FFF7FEFF 		bl	__aeabi_f2d
 758              	.LVL47:
 759              		.loc 1 323 13 view .LVU168
 760 000e 28A3     		adr	r3, .L88
 761 0010 D3E90023 		ldrd	r2, [r3]
 762 0014 FFF7FEFF 		bl	__aeabi_dmul
 763              	.LVL48:
 764 0018 FFF7FEFF 		bl	__aeabi_d2f
 765              	.LVL49:
 766 001c 0446     		mov	r4, r0
 767              	.LVL50:
 768              	.L74:
 324:../../serial.c ****     }
 325:../../serial.c **** 
 326:../../serial.c ****     if (num < 0)
 769              		.loc 1 326 5 is_stmt 1 view .LVU169
 770              		.loc 1 326 8 is_stmt 0 view .LVU170
 771 001e 0021     		movs	r1, #0
 772 0020 2046     		mov	r0, r4
 773              		.loc 1 326 8 view .LVU171
 774 0022 FFF7FEFF 		bl	__aeabi_fcmplt
 775              	.LVL51:
 776              		.loc 1 326 8 view .LVU172
 777 0026 60BB     		cbnz	r0, .L83
 778              	.LVL52:
 779              	.L75:
 327:../../serial.c ****     {
 328:../../serial.c ****         serial_putc('-');
 329:../../serial.c ****         num = -num;
 330:../../serial.c ****     }
 331:../../serial.c **** 
 332:../../serial.c ****     uint16_t digits = (uint16_t)floorf(num);
 780              		.loc 1 332 5 is_stmt 1 view .LVU173
 781              		.loc 1 332 33 is_stmt 0 view .LVU174
 782 0028 2046     		mov	r0, r4
 783 002a FFF7FEFF 		bl	floorf
 784              	.LVL53:
 785              		.loc 1 332 14 view .LVU175
 786 002e FFF7FEFF 		bl	__aeabi_f2uiz
 787              	.LVL54:
 788 0032 85B2     		uxth	r5, r0
 789              	.LVL55:
 333:../../serial.c ****     serial_print_int(digits);
 790              		.loc 1 333 5 is_stmt 1 view .LVU176
 791 0034 2846     		mov	r0, r5
 792 0036 FFF7FEFF 		bl	serial_print_int
 793              	.LVL56:
 334:../../serial.c ****     serial_putc('.');
 794              		.loc 1 334 5 view .LVU177
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 22


 795 003a 2E20     		movs	r0, #46
 796 003c FFF7FEFF 		bl	serial_putc
 797              	.LVL57:
 335:../../serial.c ****     num -= digits;
 798              		.loc 1 335 5 view .LVU178
 799              		.loc 1 335 9 is_stmt 0 view .LVU179
 800 0040 2846     		mov	r0, r5
 801 0042 FFF7FEFF 		bl	__aeabi_i2f
 802              	.LVL58:
 803 0046 0146     		mov	r1, r0
 804 0048 2046     		mov	r0, r4
 805 004a FFF7FEFF 		bl	__aeabi_fsub
 806              	.LVL59:
 336:../../serial.c **** 
 337:../../serial.c ****     num *= 1000;
 807              		.loc 1 337 5 is_stmt 1 view .LVU180
 808              		.loc 1 337 9 is_stmt 0 view .LVU181
 809 004e 1B49     		ldr	r1, .L88+12
 810 0050 FFF7FEFF 		bl	__aeabi_fmul
 811              	.LVL60:
 338:../../serial.c ****     digits = (uint16_t)roundf(num);
 812              		.loc 1 338 5 is_stmt 1 view .LVU182
 813              		.loc 1 338 24 is_stmt 0 view .LVU183
 814 0054 FFF7FEFF 		bl	roundf
 815              	.LVL61:
 816              		.loc 1 338 12 view .LVU184
 817 0058 FFF7FEFF 		bl	__aeabi_f2uiz
 818              	.LVL62:
 819 005c 84B2     		uxth	r4, r0
 820              	.LVL63:
 339:../../serial.c **** 
 340:../../serial.c ****     if (g_settings.report_inches)
 821              		.loc 1 340 5 is_stmt 1 view .LVU185
 822              		.loc 1 340 19 is_stmt 0 view .LVU186
 823 005e 164B     		ldr	r3, .L88+8
 824 0060 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 825              		.loc 1 340 8 view .LVU187
 826 0062 33B1     		cbz	r3, .L77
 341:../../serial.c ****     {
 342:../../serial.c ****         if (digits < 10000)
 827              		.loc 1 342 9 is_stmt 1 view .LVU188
 828              		.loc 1 342 12 is_stmt 0 view .LVU189
 829 0064 42F20F73 		movw	r3, #9999
 830 0068 9C42     		cmp	r4, r3
 831 006a 10D9     		bls	.L84
 832              	.L78:
 343:../../serial.c ****         {
 344:../../serial.c ****             serial_putc('0');
 345:../../serial.c ****         }
 346:../../serial.c **** 
 347:../../serial.c ****         if (digits < 1000)
 833              		.loc 1 347 9 is_stmt 1 view .LVU190
 834              		.loc 1 347 12 is_stmt 0 view .LVU191
 835 006c B4F57A7F 		cmp	r4, #1000
 836 0070 11D3     		bcc	.L85
 837              	.L77:
 348:../../serial.c ****         {
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 23


 349:../../serial.c ****             serial_putc('0');
 350:../../serial.c ****         }
 351:../../serial.c ****     }
 352:../../serial.c **** 
 353:../../serial.c ****     if (digits < 100)
 838              		.loc 1 353 5 is_stmt 1 view .LVU192
 839              		.loc 1 353 8 is_stmt 0 view .LVU193
 840 0072 632C     		cmp	r4, #99
 841 0074 13D9     		bls	.L86
 842              	.L79:
 354:../../serial.c ****     {
 355:../../serial.c ****         serial_putc('0');
 356:../../serial.c ****     }
 357:../../serial.c **** 
 358:../../serial.c ****     if (digits < 10)
 843              		.loc 1 358 5 is_stmt 1 view .LVU194
 844              		.loc 1 358 8 is_stmt 0 view .LVU195
 845 0076 092C     		cmp	r4, #9
 846 0078 15D9     		bls	.L87
 847              	.L80:
 359:../../serial.c ****     {
 360:../../serial.c ****         serial_putc('0');
 361:../../serial.c ****     }
 362:../../serial.c **** 
 363:../../serial.c ****     serial_print_int(digits);
 848              		.loc 1 363 5 is_stmt 1 view .LVU196
 849 007a 2046     		mov	r0, r4
 850 007c FFF7FEFF 		bl	serial_print_int
 851              	.LVL64:
 364:../../serial.c **** }
 852              		.loc 1 364 1 is_stmt 0 view .LVU197
 853 0080 38BD     		pop	{r3, r4, r5, pc}
 854              	.LVL65:
 855              	.L83:
 328:../../serial.c ****         num = -num;
 856              		.loc 1 328 9 is_stmt 1 view .LVU198
 857 0082 2D20     		movs	r0, #45
 858 0084 FFF7FEFF 		bl	serial_putc
 859              	.LVL66:
 329:../../serial.c ****     }
 860              		.loc 1 329 9 view .LVU199
 329:../../serial.c ****     }
 861              		.loc 1 329 13 is_stmt 0 view .LVU200
 862 0088 04F10044 		add	r4, r4, #-2147483648
 863              	.LVL67:
 329:../../serial.c ****     }
 864              		.loc 1 329 13 view .LVU201
 865 008c CCE7     		b	.L75
 866              	.LVL68:
 867              	.L84:
 344:../../serial.c ****         }
 868              		.loc 1 344 13 is_stmt 1 view .LVU202
 869 008e 3020     		movs	r0, #48
 870 0090 FFF7FEFF 		bl	serial_putc
 871              	.LVL69:
 872 0094 EAE7     		b	.L78
 873              	.L85:
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 24


 349:../../serial.c ****         }
 874              		.loc 1 349 13 view .LVU203
 875 0096 3020     		movs	r0, #48
 876 0098 FFF7FEFF 		bl	serial_putc
 877              	.LVL70:
 878 009c E9E7     		b	.L77
 879              	.L86:
 355:../../serial.c ****     }
 880              		.loc 1 355 9 view .LVU204
 881 009e 3020     		movs	r0, #48
 882 00a0 FFF7FEFF 		bl	serial_putc
 883              	.LVL71:
 884 00a4 E7E7     		b	.L79
 885              	.L87:
 360:../../serial.c ****     }
 886              		.loc 1 360 9 view .LVU205
 887 00a6 3020     		movs	r0, #48
 888 00a8 FFF7FEFF 		bl	serial_putc
 889              	.LVL72:
 890 00ac E5E7     		b	.L80
 891              	.L89:
 892 00ae 00BF     		.align	3
 893              	.L88:
 894 00b0 0A8542A1 		.word	-1589476086
 895 00b4 5028A43F 		.word	1067722832
 896 00b8 00000000 		.word	g_settings
 897 00bc 00007A44 		.word	1148846080
 898              		.cfi_endproc
 899              	.LFE76:
 901              		.section	.text.serial_print_intarr,"ax",%progbits
 902              		.align	1
 903              		.global	serial_print_intarr
 904              		.syntax unified
 905              		.thumb
 906              		.thumb_func
 907              		.fpu softvfp
 909              	serial_print_intarr:
 910              	.LVL73:
 911              	.LFB77:
 365:../../serial.c **** 
 366:../../serial.c **** void serial_print_intarr(uint16_t *arr, uint8_t count)
 367:../../serial.c **** {
 912              		.loc 1 367 1 view -0
 913              		.cfi_startproc
 914              		@ args = 0, pretend = 0, frame = 0
 915              		@ frame_needed = 0, uses_anonymous_args = 0
 916              		.loc 1 367 1 is_stmt 0 view .LVU207
 917 0000 38B5     		push	{r3, r4, r5, lr}
 918              	.LCFI9:
 919              		.cfi_def_cfa_offset 16
 920              		.cfi_offset 3, -16
 921              		.cfi_offset 4, -12
 922              		.cfi_offset 5, -8
 923              		.cfi_offset 14, -4
 924 0002 0546     		mov	r5, r0
 925 0004 0C46     		mov	r4, r1
 926 0006 03E0     		b	.L92
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 25


 927              	.LVL74:
 928              	.L95:
 368:../../serial.c ****     do
 369:../../serial.c ****     {
 370:../../serial.c ****         serial_print_int(*arr++);
 371:../../serial.c ****         count--;
 372:../../serial.c ****         if (count)
 373:../../serial.c ****         {
 374:../../serial.c ****             serial_putc(',');
 929              		.loc 1 374 13 is_stmt 1 view .LVU208
 930 0008 2C20     		movs	r0, #44
 931 000a FFF7FEFF 		bl	serial_putc
 932              	.LVL75:
 933              	.L91:
 375:../../serial.c ****         }
 376:../../serial.c **** 
 377:../../serial.c ****     } while (count);
 934              		.loc 1 377 13 view .LVU209
 935              		.loc 1 377 5 is_stmt 0 view .LVU210
 936 000e 44B1     		cbz	r4, .L94
 937              	.LVL76:
 938              	.L92:
 368:../../serial.c ****     do
 939              		.loc 1 368 5 is_stmt 1 view .LVU211
 370:../../serial.c ****         count--;
 940              		.loc 1 370 9 view .LVU212
 370:../../serial.c ****         count--;
 941              		.loc 1 370 9 is_stmt 0 view .LVU213
 942 0010 2888     		ldrh	r0, [r5]
 943 0012 0235     		adds	r5, r5, #2
 944              	.LVL77:
 370:../../serial.c ****         count--;
 945              		.loc 1 370 9 view .LVU214
 946 0014 FFF7FEFF 		bl	serial_print_int
 947              	.LVL78:
 371:../../serial.c ****         if (count)
 948              		.loc 1 371 9 is_stmt 1 view .LVU215
 371:../../serial.c ****         if (count)
 949              		.loc 1 371 14 is_stmt 0 view .LVU216
 950 0018 013C     		subs	r4, r4, #1
 951              	.LVL79:
 372:../../serial.c ****         {
 952              		.loc 1 372 9 is_stmt 1 view .LVU217
 372:../../serial.c ****         {
 953              		.loc 1 372 12 is_stmt 0 view .LVU218
 954 001a 14F0FF04 		ands	r4, r4, #255
 955              	.LVL80:
 372:../../serial.c ****         {
 956              		.loc 1 372 12 view .LVU219
 957 001e F6D0     		beq	.L91
 958 0020 F2E7     		b	.L95
 959              	.L94:
 378:../../serial.c **** }
 960              		.loc 1 378 1 view .LVU220
 961 0022 38BD     		pop	{r3, r4, r5, pc}
 962              		.loc 1 378 1 view .LVU221
 963              		.cfi_endproc
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 26


 964              	.LFE77:
 966              		.section	.text.serial_print_fltarr,"ax",%progbits
 967              		.align	1
 968              		.global	serial_print_fltarr
 969              		.syntax unified
 970              		.thumb
 971              		.thumb_func
 972              		.fpu softvfp
 974              	serial_print_fltarr:
 975              	.LVL81:
 976              	.LFB78:
 379:../../serial.c **** 
 380:../../serial.c **** void serial_print_fltarr(float *arr, uint8_t count)
 381:../../serial.c **** {
 977              		.loc 1 381 1 is_stmt 1 view -0
 978              		.cfi_startproc
 979              		@ args = 0, pretend = 0, frame = 0
 980              		@ frame_needed = 0, uses_anonymous_args = 0
 981              		.loc 1 381 1 is_stmt 0 view .LVU223
 982 0000 38B5     		push	{r3, r4, r5, lr}
 983              	.LCFI10:
 984              		.cfi_def_cfa_offset 16
 985              		.cfi_offset 3, -16
 986              		.cfi_offset 4, -12
 987              		.cfi_offset 5, -8
 988              		.cfi_offset 14, -4
 989 0002 0546     		mov	r5, r0
 990 0004 0C46     		mov	r4, r1
 991 0006 03E0     		b	.L98
 992              	.LVL82:
 993              	.L101:
 382:../../serial.c ****     do
 383:../../serial.c ****     {
 384:../../serial.c ****         serial_print_flt(*arr++);
 385:../../serial.c ****         count--;
 386:../../serial.c ****         if (count)
 387:../../serial.c ****         {
 388:../../serial.c ****             serial_putc(',');
 994              		.loc 1 388 13 is_stmt 1 view .LVU224
 995 0008 2C20     		movs	r0, #44
 996 000a FFF7FEFF 		bl	serial_putc
 997              	.LVL83:
 998              	.L97:
 389:../../serial.c ****         }
 390:../../serial.c **** 
 391:../../serial.c ****     } while (count);
 999              		.loc 1 391 13 view .LVU225
 1000              		.loc 1 391 5 is_stmt 0 view .LVU226
 1001 000e 44B1     		cbz	r4, .L100
 1002              	.LVL84:
 1003              	.L98:
 382:../../serial.c ****     do
 1004              		.loc 1 382 5 is_stmt 1 view .LVU227
 384:../../serial.c ****         count--;
 1005              		.loc 1 384 9 view .LVU228
 384:../../serial.c ****         count--;
 1006              		.loc 1 384 9 is_stmt 0 view .LVU229
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 27


 1007 0010 2868     		ldr	r0, [r5]	@ float
 1008 0012 0435     		adds	r5, r5, #4
 1009              	.LVL85:
 384:../../serial.c ****         count--;
 1010              		.loc 1 384 9 view .LVU230
 1011 0014 FFF7FEFF 		bl	serial_print_flt
 1012              	.LVL86:
 385:../../serial.c ****         if (count)
 1013              		.loc 1 385 9 is_stmt 1 view .LVU231
 385:../../serial.c ****         if (count)
 1014              		.loc 1 385 14 is_stmt 0 view .LVU232
 1015 0018 013C     		subs	r4, r4, #1
 1016              	.LVL87:
 386:../../serial.c ****         {
 1017              		.loc 1 386 9 is_stmt 1 view .LVU233
 386:../../serial.c ****         {
 1018              		.loc 1 386 12 is_stmt 0 view .LVU234
 1019 001a 14F0FF04 		ands	r4, r4, #255
 1020              	.LVL88:
 386:../../serial.c ****         {
 1021              		.loc 1 386 12 view .LVU235
 1022 001e F6D0     		beq	.L97
 1023 0020 F2E7     		b	.L101
 1024              	.L100:
 392:../../serial.c **** }
 1025              		.loc 1 392 1 view .LVU236
 1026 0022 38BD     		pop	{r3, r4, r5, pc}
 1027              		.loc 1 392 1 view .LVU237
 1028              		.cfi_endproc
 1029              	.LFE78:
 1031              		.section	.text.serial_flush,"ax",%progbits
 1032              		.align	1
 1033              		.global	serial_flush
 1034              		.syntax unified
 1035              		.thumb
 1036              		.thumb_func
 1037              		.fpu softvfp
 1039              	serial_flush:
 1040              	.LFB79:
 393:../../serial.c **** 
 394:../../serial.c **** void serial_flush(void)
 395:../../serial.c **** {
 1041              		.loc 1 395 1 is_stmt 1 view -0
 1042              		.cfi_startproc
 1043              		@ args = 0, pretend = 0, frame = 0
 1044              		@ frame_needed = 0, uses_anonymous_args = 0
 1045 0000 08B5     		push	{r3, lr}
 1046              	.LCFI11:
 1047              		.cfi_def_cfa_offset 8
 1048              		.cfi_offset 3, -8
 1049              		.cfi_offset 14, -4
 396:../../serial.c ****     while (serial_tx_count)
 1050              		.loc 1 396 5 view .LVU239
 1051              	.L103:
 1052              		.loc 1 396 11 view .LVU240
 1053              		.loc 1 396 12 is_stmt 0 view .LVU241
 1054 0002 054B     		ldr	r3, .L107
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 28


 1055 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1056              		.loc 1 396 11 view .LVU242
 1057 0006 2BB1     		cbz	r3, .L102
 397:../../serial.c ****     {
 398:../../serial.c ****         mcu_start_send();
 1058              		.loc 1 398 9 is_stmt 1 view .LVU243
 1059 0008 FFF7FEFF 		bl	mcu_start_send
 1060              	.LVL89:
 399:../../serial.c ****         if (!cnc_doevents())
 1061              		.loc 1 399 9 view .LVU244
 1062              		.loc 1 399 14 is_stmt 0 view .LVU245
 1063 000c FFF7FEFF 		bl	cnc_doevents
 1064              	.LVL90:
 1065              		.loc 1 399 12 view .LVU246
 1066 0010 0028     		cmp	r0, #0
 1067 0012 F6D1     		bne	.L103
 1068              	.L102:
 400:../../serial.c ****         {
 401:../../serial.c ****             return;
 402:../../serial.c ****         }
 403:../../serial.c ****     }
 404:../../serial.c **** }
 1069              		.loc 1 404 1 view .LVU247
 1070 0014 08BD     		pop	{r3, pc}
 1071              	.L108:
 1072 0016 00BF     		.align	2
 1073              	.L107:
 1074 0018 00000000 		.word	.LANCHOR2
 1075              		.cfi_endproc
 1076              	.LFE79:
 1078              		.section	.text.serial_tx_isr,"ax",%progbits
 1079              		.align	1
 1080              		.global	serial_tx_isr
 1081              		.syntax unified
 1082              		.thumb
 1083              		.thumb_func
 1084              		.fpu softvfp
 1086              	serial_tx_isr:
 1087              	.LFB81:
 405:../../serial.c **** 
 406:../../serial.c **** //ISR
 407:../../serial.c **** //New char handle strategy
 408:../../serial.c **** //All ascii will be sent to buffer and processed later (including comments)
 409:../../serial.c **** void serial_rx_isr(unsigned char c)
 410:../../serial.c **** {
 411:../../serial.c ****     uint8_t write;
 412:../../serial.c ****     if (c < ((unsigned char)'~')) //ascii (except CMD_CODE_CYCLE_START and DEL)
 413:../../serial.c ****     {
 414:../../serial.c ****         switch (c)
 415:../../serial.c ****         {
 416:../../serial.c ****         case CMD_CODE_RESET:
 417:../../serial.c ****             serial_rx_clear(); //dumps all unexecuted commands
 418:../../serial.c ****         case CMD_CODE_FEED_HOLD:
 419:../../serial.c ****         case CMD_CODE_REPORT:
 420:../../serial.c ****             cnc_call_rt_command((uint8_t)c);
 421:../../serial.c ****             return;
 422:../../serial.c ****         case '\r':
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 29


 423:../../serial.c ****         case '\n':
 424:../../serial.c ****             c = EOL; //replaces CR and LF with EOL and continues
 425:../../serial.c ****         case EOL:
 426:../../serial.c ****             serial_rx_count++; //continues
 427:../../serial.c ****         default:
 428:../../serial.c ****             write = serial_rx_write;
 429:../../serial.c ****             serial_rx_buffer[write] = c;
 430:../../serial.c ****             if (++write == RX_BUFFER_SIZE)
 431:../../serial.c ****             {
 432:../../serial.c ****                 write = 0;
 433:../../serial.c ****             }
 434:../../serial.c ****             //writes the overflow char ahead
 435:../../serial.c ****             serial_rx_buffer[write] = OVF;
 436:../../serial.c ****             serial_rx_write = write;
 437:../../serial.c ****             break;
 438:../../serial.c ****         }
 439:../../serial.c ****     }
 440:../../serial.c ****     else //extended ascii (plus CMD_CODE_CYCLE_START and DEL)
 441:../../serial.c ****     {
 442:../../serial.c ****         cnc_call_rt_command((uint8_t)c);
 443:../../serial.c ****     }
 444:../../serial.c **** }
 445:../../serial.c **** 
 446:../../serial.c **** void serial_tx_isr(void)
 447:../../serial.c **** {
 1088              		.loc 1 447 1 is_stmt 1 view -0
 1089              		.cfi_startproc
 1090              		@ args = 0, pretend = 0, frame = 0
 1091              		@ frame_needed = 0, uses_anonymous_args = 0
 1092              		@ link register save eliminated.
 448:../../serial.c ****     #ifndef ENABLE_SYNC_TX
 449:../../serial.c ****     if (!serial_tx_count)
 450:../../serial.c ****     {
 451:../../serial.c ****         return;
 452:../../serial.c ****     }
 453:../../serial.c ****     uint8_t read = serial_tx_read;
 454:../../serial.c ****     unsigned char c = serial_tx_buffer[read];
 455:../../serial.c ****     COM_OUTREG = c;
 456:../../serial.c ****     if (c == '\n' || c == '\r')
 457:../../serial.c ****     {
 458:../../serial.c ****         if (!--serial_tx_count)
 459:../../serial.c ****         {
 460:../../serial.c ****             mcu_stop_send();
 461:../../serial.c ****         }
 462:../../serial.c ****     }
 463:../../serial.c ****     if (++read == TX_BUFFER_SIZE)
 464:../../serial.c ****     {
 465:../../serial.c ****         read = 0;
 466:../../serial.c ****     }
 467:../../serial.c ****     serial_tx_read = read;
 468:../../serial.c ****     #endif
 469:../../serial.c **** }
 1093              		.loc 1 469 1 view .LVU249
 1094 0000 7047     		bx	lr
 1095              		.cfi_endproc
 1096              	.LFE81:
 1098              		.section	.text.serial_rx_clear,"ax",%progbits
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 30


 1099              		.align	1
 1100              		.global	serial_rx_clear
 1101              		.syntax unified
 1102              		.thumb
 1103              		.thumb_func
 1104              		.fpu softvfp
 1106              	serial_rx_clear:
 1107              	.LFB82:
 470:../../serial.c **** 
 471:../../serial.c **** void serial_rx_clear(void)
 472:../../serial.c **** {
 1108              		.loc 1 472 1 view -0
 1109              		.cfi_startproc
 1110              		@ args = 0, pretend = 0, frame = 0
 1111              		@ frame_needed = 0, uses_anonymous_args = 0
 1112              		@ link register save eliminated.
 473:../../serial.c ****     serial_rx_write = 0;
 1113              		.loc 1 473 5 view .LVU251
 1114              		.loc 1 473 21 is_stmt 0 view .LVU252
 1115 0000 0023     		movs	r3, #0
 1116 0002 044A     		ldr	r2, .L111
 1117 0004 1370     		strb	r3, [r2]
 474:../../serial.c ****     serial_rx_read = 0;
 1118              		.loc 1 474 5 is_stmt 1 view .LVU253
 1119              		.loc 1 474 20 is_stmt 0 view .LVU254
 1120 0006 044A     		ldr	r2, .L111+4
 1121 0008 1370     		strb	r3, [r2]
 475:../../serial.c ****     serial_rx_count = 0;
 1122              		.loc 1 475 5 is_stmt 1 view .LVU255
 1123              		.loc 1 475 21 is_stmt 0 view .LVU256
 1124 000a 044A     		ldr	r2, .L111+8
 1125 000c 1370     		strb	r3, [r2]
 476:../../serial.c ****     serial_rx_buffer[0] = EOL;
 1126              		.loc 1 476 5 is_stmt 1 view .LVU257
 1127              		.loc 1 476 25 is_stmt 0 view .LVU258
 1128 000e 044A     		ldr	r2, .L111+12
 1129 0010 1370     		strb	r3, [r2]
 477:../../serial.c ****     /*serial_tx_write = 0;
 478:../../serial.c ****     serial_tx_read = 0;
 479:../../serial.c ****     serial_tx_count = 0;*/
 480:../../serial.c **** }
 1130              		.loc 1 480 1 view .LVU259
 1131 0012 7047     		bx	lr
 1132              	.L112:
 1133              		.align	2
 1134              	.L111:
 1135 0014 00000000 		.word	.LANCHOR6
 1136 0018 00000000 		.word	.LANCHOR3
 1137 001c 00000000 		.word	.LANCHOR1
 1138 0020 00000000 		.word	.LANCHOR4
 1139              		.cfi_endproc
 1140              	.LFE82:
 1142              		.section	.text.serial_rx_isr,"ax",%progbits
 1143              		.align	1
 1144              		.global	serial_rx_isr
 1145              		.syntax unified
 1146              		.thumb
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 31


 1147              		.thumb_func
 1148              		.fpu softvfp
 1150              	serial_rx_isr:
 1151              	.LVL91:
 1152              	.LFB80:
 410:../../serial.c ****     uint8_t write;
 1153              		.loc 1 410 1 is_stmt 1 view -0
 1154              		.cfi_startproc
 1155              		@ args = 0, pretend = 0, frame = 0
 1156              		@ frame_needed = 0, uses_anonymous_args = 0
 410:../../serial.c ****     uint8_t write;
 1157              		.loc 1 410 1 is_stmt 0 view .LVU261
 1158 0000 10B5     		push	{r4, lr}
 1159              	.LCFI12:
 1160              		.cfi_def_cfa_offset 8
 1161              		.cfi_offset 4, -8
 1162              		.cfi_offset 14, -4
 1163 0002 0446     		mov	r4, r0
 411:../../serial.c ****     if (c < ((unsigned char)'~')) //ascii (except CMD_CODE_CYCLE_START and DEL)
 1164              		.loc 1 411 5 is_stmt 1 view .LVU262
 412:../../serial.c ****     {
 1165              		.loc 1 412 5 view .LVU263
 412:../../serial.c ****     {
 1166              		.loc 1 412 8 is_stmt 0 view .LVU264
 1167 0004 7D28     		cmp	r0, #125
 1168 0006 32D8     		bhi	.L114
 414:../../serial.c ****         {
 1169              		.loc 1 414 9 is_stmt 1 view .LVU265
 1170 0008 2128     		cmp	r0, #33
 1171 000a 14D8     		bhi	.L115
 1172 000c 2128     		cmp	r0, #33
 1173 000e 14D8     		bhi	.L116
 1174 0010 DFE800F0 		tbb	[pc, r0]
 1175              	.L118:
 1176 0014 25       		.byte	(.L120-.L118)/2
 1177 0015 13       		.byte	(.L116-.L118)/2
 1178 0016 13       		.byte	(.L116-.L118)/2
 1179 0017 13       		.byte	(.L116-.L118)/2
 1180 0018 13       		.byte	(.L116-.L118)/2
 1181 0019 13       		.byte	(.L116-.L118)/2
 1182 001a 13       		.byte	(.L116-.L118)/2
 1183 001b 13       		.byte	(.L116-.L118)/2
 1184 001c 13       		.byte	(.L116-.L118)/2
 1185 001d 13       		.byte	(.L116-.L118)/2
 1186 001e 25       		.byte	(.L120-.L118)/2
 1187 001f 13       		.byte	(.L116-.L118)/2
 1188 0020 13       		.byte	(.L116-.L118)/2
 1189 0021 25       		.byte	(.L120-.L118)/2
 1190 0022 13       		.byte	(.L116-.L118)/2
 1191 0023 13       		.byte	(.L116-.L118)/2
 1192 0024 13       		.byte	(.L116-.L118)/2
 1193 0025 13       		.byte	(.L116-.L118)/2
 1194 0026 13       		.byte	(.L116-.L118)/2
 1195 0027 13       		.byte	(.L116-.L118)/2
 1196 0028 13       		.byte	(.L116-.L118)/2
 1197 0029 13       		.byte	(.L116-.L118)/2
 1198 002a 13       		.byte	(.L116-.L118)/2
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 32


 1199 002b 13       		.byte	(.L116-.L118)/2
 1200 002c 1F       		.byte	(.L119-.L118)/2
 1201 002d 13       		.byte	(.L116-.L118)/2
 1202 002e 13       		.byte	(.L116-.L118)/2
 1203 002f 13       		.byte	(.L116-.L118)/2
 1204 0030 13       		.byte	(.L116-.L118)/2
 1205 0031 13       		.byte	(.L116-.L118)/2
 1206 0032 13       		.byte	(.L116-.L118)/2
 1207 0033 13       		.byte	(.L116-.L118)/2
 1208 0034 13       		.byte	(.L116-.L118)/2
 1209 0035 21       		.byte	(.L117-.L118)/2
 1210              		.p2align 1
 1211              	.L115:
 1212 0036 3F28     		cmp	r0, #63
 1213 0038 0DD0     		beq	.L117
 1214              	.LVL92:
 1215              	.L116:
 428:../../serial.c ****             serial_rx_buffer[write] = c;
 1216              		.loc 1 428 13 view .LVU266
 428:../../serial.c ****             serial_rx_buffer[write] = c;
 1217              		.loc 1 428 19 is_stmt 0 view .LVU267
 1218 003a 0E4B     		ldr	r3, .L126
 1219 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1220              	.LVL93:
 429:../../serial.c ****             if (++write == RX_BUFFER_SIZE)
 1221              		.loc 1 429 13 is_stmt 1 view .LVU268
 430:../../serial.c ****             {
 1222              		.loc 1 430 13 view .LVU269
 430:../../serial.c ****             {
 1223              		.loc 1 430 16 is_stmt 0 view .LVU270
 1224 003e 0133     		adds	r3, r3, #1
 1225              	.LVL94:
 430:../../serial.c ****             {
 1226              		.loc 1 430 16 view .LVU271
 1227 0040 DBB2     		uxtb	r3, r3
 1228              	.LVL95:
 430:../../serial.c ****             {
 1229              		.loc 1 430 16 view .LVU272
 1230 0042 012B     		cmp	r3, #1
 1231 0044 11D0     		beq	.L125
 1232              	.LVL96:
 1233              	.L122:
 435:../../serial.c ****             serial_rx_write = write;
 1234              		.loc 1 435 13 is_stmt 1 view .LVU273
 435:../../serial.c ****             serial_rx_write = write;
 1235              		.loc 1 435 37 is_stmt 0 view .LVU274
 1236 0046 0C4A     		ldr	r2, .L126+4
 1237 0048 7F21     		movs	r1, #127
 1238 004a D154     		strb	r1, [r2, r3]
 436:../../serial.c ****             break;
 1239              		.loc 1 436 13 is_stmt 1 view .LVU275
 436:../../serial.c ****             break;
 1240              		.loc 1 436 29 is_stmt 0 view .LVU276
 1241 004c 094A     		ldr	r2, .L126
 1242 004e 1370     		strb	r3, [r2]
 437:../../serial.c ****         }
 1243              		.loc 1 437 13 is_stmt 1 view .LVU277
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 33


 1244 0050 04E0     		b	.L113
 1245              	.LVL97:
 1246              	.L119:
 417:../../serial.c ****         case CMD_CODE_FEED_HOLD:
 1247              		.loc 1 417 13 view .LVU278
 1248 0052 FFF7FEFF 		bl	serial_rx_clear
 1249              	.LVL98:
 1250              	.L117:
 420:../../serial.c ****             return;
 1251              		.loc 1 420 13 view .LVU279
 1252 0056 2046     		mov	r0, r4
 1253 0058 FFF7FEFF 		bl	cnc_call_rt_command
 1254              	.LVL99:
 421:../../serial.c ****         case '\r':
 1255              		.loc 1 421 13 view .LVU280
 1256              	.L113:
 444:../../serial.c **** 
 1257              		.loc 1 444 1 is_stmt 0 view .LVU281
 1258 005c 10BD     		pop	{r4, pc}
 1259              	.LVL100:
 1260              	.L120:
 426:../../serial.c ****         default:
 1261              		.loc 1 426 13 is_stmt 1 view .LVU282
 426:../../serial.c ****         default:
 1262              		.loc 1 426 28 is_stmt 0 view .LVU283
 1263 005e 074A     		ldr	r2, .L126+8
 1264 0060 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1265 0062 0133     		adds	r3, r3, #1
 1266 0064 DBB2     		uxtb	r3, r3
 1267 0066 1370     		strb	r3, [r2]
 1268 0068 E7E7     		b	.L116
 1269              	.LVL101:
 1270              	.L125:
 432:../../serial.c ****             }
 1271              		.loc 1 432 23 view .LVU284
 1272 006a 0023     		movs	r3, #0
 1273              	.LVL102:
 432:../../serial.c ****             }
 1274              		.loc 1 432 23 view .LVU285
 1275 006c EBE7     		b	.L122
 1276              	.LVL103:
 1277              	.L114:
 442:../../serial.c ****     }
 1278              		.loc 1 442 9 is_stmt 1 view .LVU286
 1279 006e FFF7FEFF 		bl	cnc_call_rt_command
 1280              	.LVL104:
 442:../../serial.c ****     }
 1281              		.loc 1 442 9 is_stmt 0 view .LVU287
 1282 0072 F3E7     		b	.L113
 1283              	.L127:
 1284              		.align	2
 1285              	.L126:
 1286 0074 00000000 		.word	.LANCHOR6
 1287 0078 00000000 		.word	.LANCHOR4
 1288 007c 00000000 		.word	.LANCHOR1
 1289              		.cfi_endproc
 1290              	.LFE80:
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 34


 1292              		.section	.text.serial_inject_cmd,"ax",%progbits
 1293              		.align	1
 1294              		.global	serial_inject_cmd
 1295              		.syntax unified
 1296              		.thumb
 1297              		.thumb_func
 1298              		.fpu softvfp
 1300              	serial_inject_cmd:
 1301              	.LVL105:
 1302              	.LFB72:
 202:../../serial.c ****     unsigned char c = rom_strptr(__s++);
 1303              		.loc 1 202 1 is_stmt 1 view -0
 1304              		.cfi_startproc
 1305              		@ args = 0, pretend = 0, frame = 0
 1306              		@ frame_needed = 0, uses_anonymous_args = 0
 202:../../serial.c ****     unsigned char c = rom_strptr(__s++);
 1307              		.loc 1 202 1 is_stmt 0 view .LVU289
 1308 0000 10B5     		push	{r4, lr}
 1309              	.LCFI13:
 1310              		.cfi_def_cfa_offset 8
 1311              		.cfi_offset 4, -8
 1312              		.cfi_offset 14, -4
 203:../../serial.c ****     do
 1313              		.loc 1 203 5 is_stmt 1 view .LVU290
 203:../../serial.c ****     do
 1314              		.loc 1 203 37 is_stmt 0 view .LVU291
 1315 0002 0446     		mov	r4, r0
 1316              	.LVL106:
 203:../../serial.c ****     do
 1317              		.loc 1 203 19 view .LVU292
 1318 0004 14F8010B 		ldrb	r0, [r4], #1	@ zero_extendqisi2
 1319              	.LVL107:
 1320              	.L129:
 204:../../serial.c ****     {
 1321              		.loc 1 204 5 is_stmt 1 discriminator 1 view .LVU293
 206:../../serial.c ****         c = rom_strptr(__s++);
 1322              		.loc 1 206 9 discriminator 1 view .LVU294
 1323 0008 FFF7FEFF 		bl	serial_rx_isr
 1324              	.LVL108:
 207:../../serial.c ****     } while (c != 0);
 1325              		.loc 1 207 9 discriminator 1 view .LVU295
 207:../../serial.c ****     } while (c != 0);
 1326              		.loc 1 207 11 is_stmt 0 discriminator 1 view .LVU296
 1327 000c 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 1328 000e 0134     		adds	r4, r4, #1
 1329              	.LVL109:
 208:../../serial.c **** }
 1330              		.loc 1 208 13 is_stmt 1 discriminator 1 view .LVU297
 208:../../serial.c **** }
 1331              		.loc 1 208 5 is_stmt 0 discriminator 1 view .LVU298
 1332 0010 0028     		cmp	r0, #0
 1333 0012 F9D1     		bne	.L129
 209:../../serial.c **** 
 1334              		.loc 1 209 1 view .LVU299
 1335 0014 10BD     		pop	{r4, pc}
 209:../../serial.c **** 
 1336              		.loc 1 209 1 view .LVU300
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 35


 1337              		.cfi_endproc
 1338              	.LFE72:
 1340              		.section	.bss.serial_read_index,"aw",%nobits
 1341              		.align	1
 1342              		.set	.LANCHOR5,. + 0
 1345              	serial_read_index:
 1346 0000 0000     		.space	2
 1347              		.section	.bss.serial_read_select,"aw",%nobits
 1348              		.set	.LANCHOR0,. + 0
 1351              	serial_read_select:
 1352 0000 00       		.space	1
 1353              		.section	.bss.serial_rx_buffer,"aw",%nobits
 1354              		.align	2
 1355              		.set	.LANCHOR4,. + 0
 1358              	serial_rx_buffer:
 1359 0000 00       		.space	1
 1360              		.section	.bss.serial_rx_count,"aw",%nobits
 1361              		.set	.LANCHOR1,. + 0
 1364              	serial_rx_count:
 1365 0000 00       		.space	1
 1366              		.section	.bss.serial_rx_read,"aw",%nobits
 1367              		.set	.LANCHOR3,. + 0
 1370              	serial_rx_read:
 1371 0000 00       		.space	1
 1372              		.section	.bss.serial_rx_write,"aw",%nobits
 1373              		.set	.LANCHOR6,. + 0
 1376              	serial_rx_write:
 1377 0000 00       		.space	1
 1378              		.section	.bss.serial_tx_count,"aw",%nobits
 1379              		.set	.LANCHOR2,. + 0
 1382              	serial_tx_count:
 1383 0000 00       		.space	1
 1384              		.section	.bss.serial_tx_read,"aw",%nobits
 1387              	serial_tx_read:
 1388 0000 00       		.space	1
 1389              		.text
 1390              	.Letext0:
 1391              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 1392              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 1393              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 1394              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 1395              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 1396              		.file 7 "../../settings.h"
 1397              		.file 8 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\lib\\gcc\\arm-none
 1398              		.file 9 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 1399              		.file 10 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 1400              		.file 11 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 1401              		.file 12 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 1402              		.file 13 "../../cnc.h"
 1403              		.file 14 "../../mcu.h"
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 36


DEFINED SYMBOLS
                            *ABS*:00000000 serial.c
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:16     .text.serial_init:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:24     .text.serial_init:00000000 serial_init
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:38     .text.serial_rx_is_empty:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:45     .text.serial_rx_is_empty:00000000 serial_rx_is_empty
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:78     .text.serial_rx_is_empty:00000024 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:84     .text.serial_tx_is_empty:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:91     .text.serial_tx_is_empty:00000000 serial_tx_is_empty
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:109    .text.serial_tx_is_empty:0000000c $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:114    .text.serial_ungetc:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:121    .text.serial_ungetc:00000000 serial_ungetc
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:167    .text.serial_ungetc:0000002c $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:174    .text.serial_peek:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:181    .text.serial_peek:00000000 serial_peek
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:278    .text.serial_peek:00000060 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:287    .text.serial_putc:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:294    .text.serial_putc:00000000 serial_putc
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:316    .text.serial_getc:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:323    .text.serial_getc:00000000 serial_getc
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:464    .text.serial_getc:00000094 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:473    .text.serial_select:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:480    .text.serial_select:00000000 serial_select
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:540    .text.serial_select:0000002c $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:546    .text.serial_print_str:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:553    .text.serial_print_str:00000000 serial_print_str
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:594    .text.serial_print_int:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:601    .text.serial_print_int:00000000 serial_print_int
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:713    .text.serial_print_int:00000068 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:726    .text.serial_print_flt:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:733    .text.serial_print_flt:00000000 serial_print_flt
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:894    .text.serial_print_flt:000000b0 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:902    .text.serial_print_intarr:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:909    .text.serial_print_intarr:00000000 serial_print_intarr
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:967    .text.serial_print_fltarr:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:974    .text.serial_print_fltarr:00000000 serial_print_fltarr
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1032   .text.serial_flush:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1039   .text.serial_flush:00000000 serial_flush
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1074   .text.serial_flush:00000018 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1079   .text.serial_tx_isr:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1086   .text.serial_tx_isr:00000000 serial_tx_isr
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1099   .text.serial_rx_clear:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1106   .text.serial_rx_clear:00000000 serial_rx_clear
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1135   .text.serial_rx_clear:00000014 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1143   .text.serial_rx_isr:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1150   .text.serial_rx_isr:00000000 serial_rx_isr
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1176   .text.serial_rx_isr:00000014 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1210   .text.serial_rx_isr:00000036 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1286   .text.serial_rx_isr:00000074 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1293   .text.serial_inject_cmd:00000000 $t
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1300   .text.serial_inject_cmd:00000000 serial_inject_cmd
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1341   .bss.serial_read_index:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1345   .bss.serial_read_index:00000000 serial_read_index
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1351   .bss.serial_read_select:00000000 serial_read_select
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1352   .bss.serial_read_select:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1354   .bss.serial_rx_buffer:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1358   .bss.serial_rx_buffer:00000000 serial_rx_buffer
ARM GAS  C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s 			page 37


C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1364   .bss.serial_rx_count:00000000 serial_rx_count
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1365   .bss.serial_rx_count:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1370   .bss.serial_rx_read:00000000 serial_rx_read
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1371   .bss.serial_rx_read:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1376   .bss.serial_rx_write:00000000 serial_rx_write
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1377   .bss.serial_rx_write:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1382   .bss.serial_tx_count:00000000 serial_tx_count
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1383   .bss.serial_tx_count:00000000 $d
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1387   .bss.serial_tx_read:00000000 serial_tx_read
C:\Users\JCEM\AppData\Local\Temp\ccIgly6V.s:1388   .bss.serial_tx_read:00000000 $d

UNDEFINED SYMBOLS
mcu_eeprom_getc
mcu_putc
__aeabi_f2d
__aeabi_dmul
__aeabi_d2f
__aeabi_fcmplt
__aeabi_f2uiz
__aeabi_i2f
__aeabi_fsub
__aeabi_fmul
floorf
roundf
g_settings
mcu_start_send
cnc_doevents
cnc_call_rt_command
